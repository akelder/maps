<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>European Property Prices for Retirees (2025–2026)</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
  #map { width: 100%; height: 100vh; }

  .legend {
    background: white; padding: 12px 16px; border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    line-height: 1.7; font-size: 12px; max-width: 210px;
  }
  .legend h4 { margin-bottom: 6px; font-size: 13px; color: #333; }
  .legend-item { display: flex; align-items: center; gap: 7px; }
  .legend-circle {
    width: 13px; height: 13px; border-radius: 50%;
    border: 2px solid rgba(0,0,0,0.3); flex-shrink: 0;
  }
  .legend-square {
    width: 13px; height: 13px; border-radius: 2px;
    border: 2px solid rgba(0,0,0,0.3); flex-shrink: 0;
    background: #999;
  }

  .price-marker {
    display: flex; flex-direction: column; align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }
  .price-marker .dot {
    width: 18px; height: 18px; border-radius: 50%;
    border: 2.5px solid rgba(255,255,255,0.9);
    box-shadow: 0 2px 5px rgba(0,0,0,0.4);
  }
  .price-marker .dot.inland { border-radius: 3px; }
  .price-marker .label {
    margin-top: 1px; background: rgba(255,255,255,0.92);
    padding: 1px 5px; border-radius: 3px;
    font-size: 9.5px; font-weight: 700; white-space: nowrap;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2); color: #222;
  }

  .leaflet-popup-content { min-width: 310px; max-width: 370px; }
  .popup-content h3 { margin: 0 0 4px 0; font-size: 16px; }
  .popup-content .tags { margin-bottom: 6px; }
  .popup-content .tag {
    display: inline-block; padding: 1px 6px; border-radius: 3px;
    font-size: 10px; font-weight: 600; margin-right: 3px; margin-bottom: 2px;
  }
  .popup-content .tag.country { color: white; }
  .popup-content .tag.country.montenegro { background: #e74c3c; }
  .popup-content .tag.country.croatia { background: #2980b9; }
  .popup-content .tag.country.slovenia { background: #16a085; }
  .popup-content .tag.country.greece { background: #2c3e50; }
  .popup-content .tag.country.italy { background: #8e44ad; }
  .popup-content .tag.country.albania { background: #d35400; }
  .popup-content .tag.country.portugal { background: #c0392b; }
  .popup-content .tag.country.spain { background: #e67e22; }
  .popup-content .tag.country.czechia { background: #5c6bc0; }
  .popup-content .tag.country.poland { background: #d81b60; }
  .popup-content .tag.country.slovakia { background: #7cb342; }
  .popup-content .tag.country.hungary { background: #43a047; }
  .popup-content .tag.country.serbia { background: #8d6e63; }
  .popup-content .tag.country.bulgaria { background: #546e7a; }
  .popup-content .tag.country.estonia { background: #00acc1; }
  .popup-content .tag.country.belgium { background: #ffb300; }
  .popup-content .tag.country.netherlands { background: #0288d1; }
  .popup-content .tag.eu { background: #eef5ff; color: #2471a3; border: 1px solid #aed6f1; }
  .popup-content .tag.non-eu { background: #fef5e7; color: #b9770e; border: 1px solid #f9e79f; }
  .popup-content .tag.coastal { background: #e8f8f5; color: #148f77; border: 1px solid #a3e4d7; }
  .popup-content .tag.inland { background: #f4ecf7; color: #7d3c98; border: 1px solid #d2b4de; }

  .popup-content .pop-hosp {
    font-size: 11px; color: #555; margin-bottom: 4px;
    display: grid; grid-template-columns: 1fr 1fr; gap: 1px 10px;
  }
  .popup-content .price-range {
    font-size: 16px; font-weight: 700; color: #222; margin: 4px 0;
  }
  .popup-content .section-label {
    font-size: 9px; font-weight: 700; color: #aaa;
    text-transform: uppercase; letter-spacing: 0.5px;
    margin-top: 7px; margin-bottom: 2px;
  }
  .popup-content .detail { font-size: 11.5px; color: #555; line-height: 1.5; }
  .popup-content .pros { color: #1e8449; }
  .popup-content .cons { color: #b03a2e; }
  .popup-content .climate-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 1px 10px;
    font-size: 11px; color: #555; margin-top: 2px;
  }
  .popup-content .housing-cost {
    font-size: 13px; font-weight: 600; color: #333; margin-top: 2px;
  }
  .popup-content .visa-info {
    font-size: 10.5px; color: #666; margin-top: 2px;
    padding: 4px 8px; background: #f8f8f8; border-radius: 4px; line-height: 1.4;
  }

  .popup-content .cost-row {
    display: grid; grid-template-columns: 1fr 1fr; gap: 2px 10px;
    font-size: 11px; color: #555; margin-top: 2px;
  }
  .popup-content .safety-bar-bg {
    display: inline-block; width: 80px; height: 8px; background: #eee;
    border-radius: 4px; vertical-align: middle; margin-left: 4px; position: relative;
    overflow: hidden;
  }
  .popup-content .safety-bar-fill {
    height: 100%; border-radius: 4px; position: absolute; left: 0; top: 0;
  }
  .popup-content .safety-label {
    font-size: 10px; font-weight: 600; margin-left: 4px;
  }
  .popup-content a.drill-link {
    color: inherit; text-decoration: none; display: block;
    border-radius: 4px; padding: 2px 4px; margin: -2px -4px;
    transition: background 0.15s;
  }
  .popup-content a.drill-link:hover {
    background: rgba(52,152,219,0.08);
  }
  .popup-content a.drill-link .drill-hint {
    font-size: 9px; color: #3498db; opacity: 0; transition: opacity 0.15s;
    margin-left: 4px;
  }
  .popup-content a.drill-link:hover .drill-hint { opacity: 1; }
  .popup-content .price-range a.drill-link {
    display: inline; padding: 0; margin: 0;
    border-bottom: 1.5px dashed rgba(52,152,219,0.3);
  }
  .popup-content .price-range a.drill-link:hover {
    background: none; border-bottom-color: #3498db;
  }

  .filter-panel {
    background: white; padding: 10px 14px; border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.25); font-size: 12px;
    max-height: 80vh; overflow-y: auto;
  }
  .filter-panel h4 { margin-bottom: 6px; font-size: 13px; }
  .filter-panel .filter-section { margin-bottom: 4px; border-bottom: 1px solid #eee; padding-bottom: 4px; }
  .filter-panel .filter-section:last-child { border-bottom: none; margin-bottom: 0; }
  .filter-panel label {
    display: flex; align-items: center; gap: 6px;
    cursor: pointer; padding: 2px 0;
  }
  .filter-panel input[type="checkbox"] { cursor: pointer; }

  .filter-section-header {
    display: flex; align-items: center; justify-content: space-between;
    cursor: pointer; user-select: none; padding: 3px 0;
  }
  .filter-section-header:hover { opacity: 0.7; }
  .filter-section-header .arrow { transition: transform 0.2s; font-size: 10px; color: #999; }
  .filter-section-header .arrow.collapsed { transform: rotate(-90deg); }
  .filter-section-body { max-height: 500px; overflow: hidden; transition: max-height 0.25s ease; }
  .filter-section-body.collapsed { max-height: 0; }
  .filter-panel input[type="range"] {
    width: 100%; cursor: pointer; margin: 4px 0;
    accent-color: #3498db;
  }
  .filter-panel .slider-val { font-weight: 600; color: #3498db; }

  /* Collapse toggle buttons */
  .panel-toggle {
    display: none; position: fixed; z-index: 1100;
    background: white; border: none; border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3); cursor: pointer;
    font-size: 16px; width: 34px; height: 34px;
    align-items: center; justify-content: center;
    color: #555;
  }
  .panel-toggle:active { background: #eee; }
  #toggle-filter { top: 10px; right: 10px; }
  #toggle-legend { bottom: 10px; right: 10px; }

  /* Mobile styles */
  @media (max-width: 768px) {
    .panel-toggle { display: flex; }

    .legend {
      padding: 8px 10px; font-size: 10px; line-height: 1.5;
      max-width: 170px;
    }
    .legend h4 { font-size: 11px; margin-bottom: 4px; }
    .legend-circle, .legend-square { width: 10px; height: 10px; }
    .legend-item { gap: 5px; }
    .legend.collapsed { display: none; }

    .filter-panel {
      padding: 8px 10px; font-size: 11px;
      max-height: 60vh;
    }
    .filter-panel h4 { font-size: 12px; }
    .filter-panel label { padding: 1px 0; gap: 4px; }
    .filter-panel.collapsed { display: none; }

    .leaflet-popup-content { min-width: 260px; max-width: 310px; }
    .popup-content h3 { font-size: 14px; }
    .popup-content .price-range { font-size: 14px; }
    .popup-content .pop-hosp { font-size: 10px; grid-template-columns: 1fr; }
    .popup-content .climate-grid { font-size: 10px; }
    .popup-content .cost-row { font-size: 10px; }
    .popup-content .detail { font-size: 10.5px; }
    .popup-content .safety-bar-bg { width: 60px; }
    .popup-content .safety-label { font-size: 9px; }
    .popup-content .housing-cost { font-size: 12px; }
    .popup-content .visa-info { font-size: 9.5px; }

    .price-marker .label { font-size: 8px; }
    .price-marker .dot { width: 14px; height: 14px; }
  }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const locations = [
  // ===================== MONTENEGRO =====================
  {
    name: "Budva", country: "Montenegro", eu: false, inland: false,
    lat: 42.2911, lng: 18.8403,
    pop: 19200, hospital: "Budva General Hospital", hospitalDist: 0, hospitalNote: "Clinical Center Podgorica for specialists (63 km)",
    priceMin: 2500, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€340k" },
    pros: "Main resort town, most apartment supply, vibrant nightlife, good beaches, well-connected by road",
    cons: "Overtouristed in summer, construction boom, not in EU (need residence permit via property/company)",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule. EU citizens exempt from €150k property minimum.",
    climate: { summerHigh: "30–31°C", winterLow: "2°C", snow: "Very rare", rainyDays: 120, sunHours: 2500 }
  },
  {
    name: "Kotor", country: "Montenegro", eu: false, inland: false,
    lat: 42.4247, lng: 18.7712,
    pop: 22600, hospital: "Kotor General Hospital", hospitalDist: 0, hospitalNote: "Clinical Center Podgorica for specialists (90 km)",
    priceMin: 3500, priceMax: 6000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€500k" },
    pros: "UNESCO old town, dramatic fjord-like bay, strong expat community, stunning scenery",
    cons: "Prices rising fast, cruise ship crowds in summer, wettest spot on Adriatic (150 rainy days), not in EU",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule.",
    climate: { summerHigh: "28–31°C", winterLow: "2°C", snow: "Very rare (mountains nearby get snow)", rainyDays: 150, sunHours: 2435 }
  },
  {
    name: "Tivat", country: "Montenegro", eu: false, inland: false,
    lat: 42.4366, lng: 18.6960,
    pop: 15000, hospital: "Kotor General Hospital", hospitalDist: 10, hospitalNote: "Clinical Center Podgorica for specialists (85 km)",
    priceMin: 2700, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€230k–€425k" },
    pros: "Modern marina (Porto Montenegro), international airport, growing expat scene, good restaurants",
    cons: "Lacks old-town charm, luxury zone up to €15k/m², not in EU, small town off-season",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule.",
    climate: { summerHigh: "28–31°C", winterLow: "2°C", snow: "Very rare", rainyDays: 150, sunHours: 2530 }
  },
  {
    name: "Herceg Novi", country: "Montenegro", eu: false, inland: false,
    lat: 42.4531, lng: 18.5375,
    pop: 30900, hospital: "Herceg Novi General Hospital", hospitalDist: 0, hospitalNote: "Clinical Center Podgorica (110 km). Croatian hospitals accessible (Dubrovnik 45 km)",
    priceMin: 1800, priceMax: 3000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€150k–€200k" },
    pros: "Most affordable Bay of Kotor town, near Croatian border (Dubrovnik 45 km), lush vegetation, friendly locals",
    cons: "Steep hills (hard for elderly mobility), not in EU, less international than Budva/Kotor",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule.",
    climate: { summerHigh: "28–30°C", winterLow: "5°C", snow: "Very rare", rainyDays: 129, sunHours: 2500 }
  },
  {
    name: "Bar", country: "Montenegro", eu: false, inland: false,
    lat: 42.0930, lng: 19.1004,
    pop: 42000, hospital: "Bar General Hospital", hospitalDist: 0, hospitalNote: "Clinical Center Podgorica (53 km)",
    priceMin: 1200, priceMax: 2200,
    housing: { type: "3-bed house", size: "100 m²", cost: "€120k–€170k" },
    pros: "Best value on the Adriatic, ferry to Bari (Italy), mild microclimate, olive groves, authentic feel",
    cons: "Less touristy infrastructure, limited English, further from airports, not in EU",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule.",
    climate: { summerHigh: "28–30°C", winterLow: "4°C", snow: "Very rare", rainyDays: 118, sunHours: 2530 }
  },
  {
    name: "Ulcinj", country: "Montenegro", eu: false, inland: false,
    lat: 41.9297, lng: 19.2064,
    pop: 20300, hospital: "Bar General Hospital", hospitalDist: 25, hospitalNote: "Clinical Center Podgorica (78 km)",
    priceMin: 1200, priceMax: 2200,
    housing: { type: "3-bed house", size: "100 m²", cost: "€100k–€150k" },
    pros: "Cheapest on Adriatic, long sandy beaches (rare for region), Albanian-influenced culture, warmest winters in MNE",
    cons: "Most remote Montenegrin coast town, limited healthcare (hospital 25 km), not in EU, less developed",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule.",
    climate: { summerHigh: "30–31°C", winterLow: "3°C", snow: "Very rare", rainyDays: 113, sunHours: 2560 }
  },
  {
    name: "Podgorica", country: "Montenegro", eu: false, inland: true,
    lat: 42.4304, lng: 19.2594,
    pop: 190000, hospital: "Clinical Center of Montenegro", hospitalDist: 0, hospitalNote: "Main national hospital with all specialties",
    priceMin: 1500, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€190k" },
    pros: "Capital city with best healthcare in MNE, international airport, all government services, affordable",
    cons: "Not on coast, extremely hot summers (35°C+), not especially charming, not in EU, limited cultural scene",
    visa: "Not EU. 90 days visa-free. Residence permit via property or company. 11-month/yr residency rule.",
    climate: { summerHigh: "33–35°C", winterLow: "0°C", snow: "Light, ~5 days/yr", rainyDays: 100, sunHours: 2500 }
  },

  // ===================== CROATIA =====================
  {
    name: "Dubrovnik", country: "Croatia", eu: true, inland: false,
    lat: 42.6507, lng: 18.0944,
    pop: 42600, hospital: "Dubrovnik General Hospital", hospitalDist: 0, hospitalNote: "KBC Split for complex cases (230 km)",
    priceMin: 4000, priceMax: 7000,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€320k–€560k" },
    pros: "Iconic walled city, excellent international connections, strong rental income, great cultural scene",
    cons: "Most expensive Croatian coast, extreme overtourism (cruise ships), old town housing tiny, hot summers",
    visa: "EU member. Automatic right to reside — just register at police. Full EU healthcare with EHIC.",
    climate: { summerHigh: "28–30°C", winterLow: "6°C", snow: "Extremely rare", rainyDays: 135, sunHours: 2525 }
  },
  {
    name: "Split", country: "Croatia", eu: true, inland: false,
    lat: 43.5081, lng: 16.4402,
    pop: 178000, hospital: "KBC Split (University Hospital)", hospitalDist: 0, hospitalNote: "Major regional hospital with all specialties",
    priceMin: 3500, priceMax: 5200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€440k" },
    pros: "2nd largest city, full urban amenities, Diocletian's Palace, major airport/ferry hub, university hospital, lively year-round",
    cons: "Prices rising fast (+14% YoY), crowded summers, traffic congestion, fewer quiet neighborhoods",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "30–31°C", winterLow: "4°C", snow: "Rare, light", rainyDays: 110, sunHours: 2630 }
  },
  {
    name: "Zadar", country: "Croatia", eu: true, inland: false,
    lat: 44.1194, lng: 15.2314,
    pop: 75000, hospital: "Zadar General Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital with ER and specialists",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€300k" },
    pros: "Best value on Croatian coast for EU rights, beautiful old town, Ryanair hub, good hospital, less touristy",
    cons: "Smaller city with fewer amenities, bura wind fierce in winter, less English than southern coast",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "30–31°C", winterLow: "4°C", snow: "Rare, light", rainyDays: 115, sunHours: 2640 }
  },
  {
    name: "Šibenik", country: "Croatia", eu: true, inland: false,
    lat: 43.7350, lng: 15.8908,
    pop: 46300, hospital: "Šibenik General Hospital", hospitalDist: 0, hospitalNote: "KBC Split for complex cases (85 km)",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€300k" },
    pros: "Near Krka waterfalls, underrated old town, growing food scene, quieter than Split, good EU value",
    cons: "Smaller town, limited nightlife, no major airport (Split 1hr), bura wind",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "30–31°C", winterLow: "5°C", snow: "Rare, light", rainyDays: 105, sunHours: 2680 }
  },
  {
    name: "Rovinj", country: "Croatia", eu: true, inland: false,
    lat: 45.0812, lng: 13.6387,
    pop: 14300, hospital: "Pula General Hospital", hospitalDist: 35, hospitalNote: "KBC Rijeka for specialists (100 km)",
    priceMin: 3000, priceMax: 4000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€280k–€350k" },
    pros: "Venetian charm, Italian influence, close to Italy/Slovenia/Austria, excellent food and wine, mild tourism",
    cons: "Hospital 35 km away (Pula), cooler summers, can feel quiet off-season, higher than inland Istria",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "28–29°C", winterLow: "2°C", snow: "Extremely rare", rainyDays: 100, sunHours: 2420 }
  },
  {
    name: "Opatija", country: "Croatia", eu: true, inland: false,
    lat: 45.3364, lng: 14.3053,
    pop: 11700, hospital: "KBC Rijeka", hospitalDist: 15, hospitalNote: "Major university hospital with all specialties",
    priceMin: 4800, priceMax: 5800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€410k–€490k" },
    pros: "Habsburg riviera elegance, near Rijeka (3rd city), close to Ljubljana/Trieste, year-round cultural life",
    cons: "Expensive, wettest/cloudiest on list (157 rainy days), cooler summers, steep terrain",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "27–28°C", winterLow: "3°C", snow: "Rare (~1 day/yr)", rainyDays: 157, sunHours: 2255 }
  },
  {
    name: "Hvar", country: "Croatia", eu: true, inland: false,
    lat: 43.1729, lng: 16.4412,
    pop: 4200, hospital: "Hvar Health Center (basic)", hospitalDist: 0, hospitalNote: "KBC Split for anything serious (ferry 1.5 hrs)",
    priceMin: 3500, priceMax: 6000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€350k–€500k" },
    pros: "Sunniest Adriatic spot (2,715 hrs), fewest rainy days (96), lavender fields, upscale island vibe",
    cons: "Island = ferry dependent, very limited winter services, expensive, healthcare = ferry to Split for emergencies",
    visa: "EU member. Automatic right to reside. EU healthcare (limited on-island facilities).",
    climate: { summerHigh: "30–31°C", winterLow: "7°C", snow: "Extremely rare", rainyDays: 96, sunHours: 2715 }
  },
  {
    name: "Zagreb", country: "Croatia", eu: true, inland: true,
    lat: 45.8150, lng: 15.9819,
    pop: 807000, hospital: "KBC Zagreb / Rebro", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Best healthcare in Croatia.",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€300k" },
    pros: "Capital city, best healthcare in Croatia, full cultural life, international airport, universities, central European feel",
    cons: "Not on coast (sea is 2 hrs away), cold continental winters, earthquake damage still being repaired, grey winters",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "-2°C", snow: "Yes, ~30 days/yr", rainyDays: 130, sunHours: 1900 }
  },
  {
    name: "Varaždin", country: "Croatia", eu: true, inland: true,
    lat: 46.3057, lng: 16.3366,
    pop: 47000, hospital: "Varaždin General Hospital", hospitalDist: 0, hospitalNote: "Zagreb KBC for complex cases (80 km)",
    priceMin: 1200, priceMax: 1800,
    housing: { type: "3-bed house", size: "110 m²", cost: "€100k–€160k" },
    pros: "Cheapest EU option with a hospital, baroque old town, safe and clean, near Austrian/Hungarian border, excellent value",
    cons: "Cold winters with snow, no coast (3+ hrs to sea), very small town, limited English, quiet cultural scene",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "-3°C", snow: "Yes, ~35 days/yr", rainyDays: 120, sunHours: 1850 }
  },
  {
    name: "Pula", country: "Croatia", eu: true, inland: false,
    lat: 44.8666, lng: 13.8496,
    pop: 57000, hospital: "Pula General Hospital", hospitalDist: 0, hospitalNote: "KBC Rijeka for complex cases (100 km)",
    priceMin: 2200, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€185k–€270k" },
    pros: "Roman amphitheater (Arena), Istria's largest city with full amenities, airport, Italian/Slovenian border access, excellent food and wine",
    cons: "Industrial port past still visible, naval history = some run-down zones, cooler summers than Dalmatia, tourism can overwhelm old town",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "2°C", snow: "Extremely rare", rainyDays: 95, sunHours: 2400 }
  },
  {
    name: "Rijeka", country: "Croatia", eu: true, inland: false,
    lat: 45.3271, lng: 14.4422,
    pop: 128000, hospital: "KBC Rijeka (University Hospital)", hospitalDist: 0, hospitalNote: "Major university hospital. Best healthcare in western Croatia.",
    priceMin: 1800, priceMax: 2600,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€155k–€220k" },
    pros: "3rd largest city, excellent university hospital, European Capital of Culture 2020, affordable, close to islands/Opatija/Slovenia/Italy",
    cons: "Industrial port city — less charming than coastal towns, steep terrain, bura wind, some grey neighborhoods",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "2°C", snow: "Rare (~3 days/yr)", rainyDays: 140, sunHours: 2100 }
  },
  {
    name: "Makarska", country: "Croatia", eu: true, inland: false,
    lat: 43.2965, lng: 17.0190,
    pop: 14000, hospital: "Makarska Health Center", hospitalDist: 0, hospitalNote: "KBC Split (65 km) for serious care. Basic ER only locally.",
    priceMin: 2800, priceMax: 3800,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€225k–€300k" },
    pros: "Stunning Biokovo mountain backdrop, beautiful riviera beaches, palm-lined promenade, between Split & Dubrovnik, lively summer",
    cons: "Small town, very quiet off-season, no hospital (Split 65 km), heavily seasonal tourism, parking difficult in summer",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "5°C", snow: "Very rare on coast", rainyDays: 100, sunHours: 2700 }
  },
  {
    name: "Trogir", country: "Croatia", eu: true, inland: false,
    lat: 43.5167, lng: 16.2500,
    pop: 13000, hospital: "Split KBC", hospitalDist: 27, hospitalNote: "KBC Split (27 km). Local health center for basic care.",
    priceMin: 2500, priceMax: 3600,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€200k–€290k" },
    pros: "UNESCO old town on an island, near Split airport (5 km), Venetian architecture, quieter alternative to Split, access to Čiovo island beaches",
    cons: "Tiny town, hospital in Split (27 km), overtouristed in summer, limited services off-season, parking very difficult",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "30–31°C", winterLow: "4°C", snow: "Rare, light", rainyDays: 108, sunHours: 2650 }
  },
  {
    name: "Poreč", country: "Croatia", eu: true, inland: false,
    lat: 45.2269, lng: 13.5943,
    pop: 17000, hospital: "Pula General Hospital", hospitalDist: 55, hospitalNote: "Pula hospital (55 km). Local health center for basic care. Rovinj medical center (30 km).",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€300k" },
    pros: "UNESCO Euphrasian Basilica, Istrian coast charm, well-developed tourism infrastructure, family-friendly, excellent Istrian food and wine",
    cons: "Hospital 55 km away (Pula), very seasonal — quiet winters, touristy in summer, limited year-round amenities",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "2°C", snow: "Extremely rare", rainyDays: 90, sunHours: 2420 }
  },
  {
    name: "Osijek", country: "Croatia", eu: true, inland: true,
    lat: 45.5550, lng: 18.6955,
    pop: 108000, hospital: "KBC Osijek (University Hospital)", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Best healthcare in eastern Croatia.",
    priceMin: 800, priceMax: 1400,
    housing: { type: "3-bed house", size: "110 m²", cost: "€70k–€120k" },
    pros: "Cheapest EU city on the map, full university hospital, elegant Austro-Hungarian Tvrđa fortress, Drava river, peaceful, excellent value",
    cons: "Very far from coast (4+ hrs), hot summers/cold winters, depopulation trend, limited international connections, flat Pannonian plain",
    visa: "EU member. Automatic right to reside. Full EU healthcare.",
    climate: { summerHigh: "29–32°C", winterLow: "-3°C", snow: "Yes, ~25 days/yr", rainyDays: 110, sunHours: 2000 }
  },

  // ===================== SLOVENIA =====================
  {
    name: "Koper", country: "Slovenia", eu: true, inland: false,
    lat: 45.5469, lng: 13.7290,
    pop: 53000, hospital: "Izola General Hospital", hospitalDist: 8, hospitalNote: "UKC Ljubljana for specialists (110 km)",
    priceMin: 3000, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€240k–€280k" },
    pros: "Excellent healthcare system, 20 min to Trieste (Italy), 1 hr to Ljubljana, practical town, very safe",
    cons: "Tiny coastline (46 km total), cooler/cloudier than Dalmatia, coldest winters on coast list (1°C low)",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "29–30°C", winterLow: "1°C", snow: "Infrequent (a few cm possible)", rainyDays: 119, sunHours: 2350 }
  },
  {
    name: "Piran", country: "Slovenia", eu: true, inland: false,
    lat: 45.5283, lng: 13.5683,
    pop: 3800, hospital: "Izola General Hospital", hospitalDist: 12, hospitalNote: "UKC Ljubljana for specialists (120 km)",
    priceMin: 4000, priceMax: 5500,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€320k–€440k" },
    pros: "Venetian gem, walkable, very safe, cosmopolitan, excellent healthcare nearby, salt pans nature reserve",
    cons: "Tiny town — very limited housing supply, premium pricing, parking nightmare, quiet in winter",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "28–29°C", winterLow: "2°C", snow: "Infrequent", rainyDays: 109, sunHours: 2350 }
  },
  {
    name: "Ljubljana", country: "Slovenia", eu: true, inland: true,
    lat: 46.0569, lng: 14.5058,
    pop: 295000, hospital: "UKC Ljubljana", hospitalDist: 0, hospitalNote: "Top-rated university hospital. Best healthcare in the region.",
    priceMin: 3500, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€280k–€400k" },
    pros: "Best healthcare in SE Europe, charming capital, very safe, 1 hr to coast/Italy/Austria, green and walkable, excellent public transport",
    cons: "Not on coast (Adriatic 1 hr away), cold winters with snow, housing supply tight, higher cost of living than neighbors",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "-3°C", snow: "Yes, ~30 days/yr", rainyDays: 130, sunHours: 1970 }
  },
  {
    name: "Maribor", country: "Slovenia", eu: true, inland: true,
    lat: 46.5547, lng: 15.6459,
    pop: 95000, hospital: "UKC Maribor", hospitalDist: 0, hospitalNote: "University hospital with all specialties",
    priceMin: 2000, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€170k–€240k" },
    pros: "Affordable with excellent healthcare, wine country (Štajerska), near Austrian border, university town, underrated",
    cons: "No coast (2+ hrs), cold winters, smaller city, less international than Ljubljana",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "-4°C", snow: "Yes, ~35 days/yr", rainyDays: 120, sunHours: 1900 }
  },
  {
    name: "Izola", country: "Slovenia", eu: true, inland: false,
    lat: 45.5363, lng: 13.6611,
    pop: 16500, hospital: "Izola General Hospital", hospitalDist: 0, hospitalNote: "UKC Ljubljana for specialists (110 km)",
    priceMin: 3000, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€240k–€320k" },
    pros: "Quieter and cheaper than Piran, has the actual hospital for the coast, Venetian old town, fishing harbor charm, good restaurants",
    cons: "Very small town, limited nightlife, cooler/cloudier than Dalmatia, tight housing supply, short coastline",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "28–29°C", winterLow: "1°C", snow: "Infrequent", rainyDays: 115, sunHours: 2350 }
  },
  {
    name: "Nova Gorica", country: "Slovenia", eu: true, inland: true,
    lat: 45.9558, lng: 13.6483,
    pop: 32000, hospital: "Šempeter General Hospital", hospitalDist: 5, hospitalNote: "UKC Ljubljana (110 km). Italian hospitals in Gorizia also accessible.",
    priceMin: 1800, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€155k–€210k" },
    pros: "Unique twin city with Italian Gorizia (EU border-free), European Capital of Culture 2025, affordable, wine region (Goriška Brda), Italian restaurants across the street",
    cons: "Not on coast (35 km), smaller town, casino tourism feel, bora wind, less charming center (built post-WWII)",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "-1°C", snow: "Light, ~10 days/yr", rainyDays: 110, sunHours: 2150 }
  },
  {
    name: "Celje", country: "Slovenia", eu: true, inland: true,
    lat: 46.2360, lng: 15.2677,
    pop: 50000, hospital: "Celje General Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. UKC Ljubljana (75 km) for complex cases.",
    priceMin: 1500, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€185k" },
    pros: "3rd largest Slovenian city, affordable, medieval castle, good hospital, Slovenian healthcare system, between Ljubljana and Maribor on highway",
    cons: "No coast (1.5 hrs), cold winters, industrial past still visible, smaller cultural scene, not very international",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "27–29°C", winterLow: "-4°C", snow: "Yes, ~30 days/yr", rainyDays: 120, sunHours: 1900 }
  },
  {
    name: "Bled", country: "Slovenia", eu: true, inland: true,
    lat: 46.3683, lng: 14.1146,
    pop: 8000, hospital: "Jesenice General Hospital", hospitalDist: 10, hospitalNote: "UKC Ljubljana (55 km). Jesenice hospital has good ER.",
    priceMin: 3500, priceMax: 5000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€300k–€450k" },
    pros: "Iconic lake setting, Julian Alps, excellent air quality, 45 min to Ljubljana, 1.5 hrs to coast/Italy/Austria, year-round tourism",
    cons: "Tiny and very touristy, expensive for Slovenia, cold alpine winters, limited housing supply, hospital 10 km away",
    visa: "EU member. Register at local admin unit. Excellent public services. Full EU healthcare.",
    climate: { summerHigh: "24–26°C", winterLow: "-5°C", snow: "Yes, ~50 days/yr", rainyDays: 130, sunHours: 1800 }
  },

  // ===================== GREECE =====================
  {
    name: "Kalamata", country: "Greece", eu: true, inland: false,
    lat: 37.0422, lng: 22.1131,
    pop: 70000, hospital: "Kalamata General Hospital", hospitalDist: 0, hospitalNote: "Athens hospitals for complex cases (250 km / 2.5 hrs)",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed house", size: "100 m²", cost: "€150k–€250k" },
    pros: "Affordable EU, warm sunny climate (2,800 hrs), famous olives/food, international airport, beach + mountains",
    cons: "Greek language barrier, heavy bureaucracy, healthcare variable, far from central Europe, hot summers (33°C)",
    visa: "EU member. Register at local police. EU healthcare via EHIC + local registration.",
    climate: { summerHigh: "31–33°C", winterLow: "6°C", snow: "Virtually none", rainyDays: 87, sunHours: 2800 }
  },
  {
    name: "Chania", country: "Greece", eu: true, inland: false,
    lat: 35.5138, lng: 24.0180,
    pop: 55000, hospital: "Chania General Hospital", hospitalDist: 0, hospitalNote: "Heraklion University Hospital for specialists (140 km)",
    priceMin: 2000, priceMax: 3500,
    housing: { type: "3-bed house", size: "100 m²", cost: "€200k–€350k" },
    pros: "Mildest winters on list (8°C low), stunning Venetian harbor, excellent food, growing expat community, Crete has its own identity",
    cons: "Island = flights or long ferry, limited specialists, bureaucracy, far from mainland Europe",
    visa: "EU member. Register at local police. EU healthcare via EHIC + local registration.",
    climate: { summerHigh: "30–31°C", winterLow: "8°C", snow: "Very rare on coast", rainyDays: 98, sunHours: 2800 }
  },
  {
    name: "Corfu", country: "Greece", eu: true, inland: false,
    lat: 39.6243, lng: 19.9217,
    pop: 40000, hospital: "Corfu General Hospital", hospitalDist: 0, hospitalNote: "Athens/Thessaloniki for complex cases",
    priceMin: 2000, priceMax: 3000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€200k–€300k" },
    pros: "Most sunshine on list (2,865 hrs), lush green, Venetian/British architecture, good airport, large expat community",
    cons: "Wettest Greek island (115 rainy days), island logistics, limited specialists, quieter off-season",
    visa: "EU member. Register at local police. EU healthcare via EHIC + local registration.",
    climate: { summerHigh: "31–33°C", winterLow: "5°C", snow: "Very rare", rainyDays: 115, sunHours: 2865 }
  },
  {
    name: "Thessaloniki", country: "Greece", eu: true, inland: false,
    lat: 40.6401, lng: 22.9444,
    pop: 325000, hospital: "AHEPA University Hospital", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Best healthcare in northern Greece.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Major city with full amenities, university hospitals, vibrant food/culture scene, affordable, good airport, waterfront promenade",
    cons: "Hot summers + cold winters, traffic, more polluted than islands, Greek bureaucracy, less \"holiday\" feel",
    visa: "EU member. Register at local police. EU healthcare via EHIC + local registration.",
    climate: { summerHigh: "32–34°C", winterLow: "1°C", snow: "Light, ~5 days/yr", rainyDays: 90, sunHours: 2300 }
  },
  {
    name: "Nafplio", country: "Greece", eu: true, inland: false,
    lat: 37.5673, lng: 22.8016,
    pop: 15000, hospital: "Nafplio General Hospital", hospitalDist: 0, hospitalNote: "Argos Hospital (12 km). Athens for specialists (140 km)",
    priceMin: 2000, priceMax: 3000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€200k–€300k" },
    pros: "Charming first capital of modern Greece, Venetian/Ottoman architecture, near Athens (1.5 hrs), very romantic town, bay setting",
    cons: "Small town, limited hospital, Greek bureaucracy, hot summers, quiet off-season",
    visa: "EU member. Register at local police. EU healthcare via EHIC + local registration.",
    climate: { summerHigh: "31–33°C", winterLow: "5°C", snow: "Virtually none", rainyDays: 80, sunHours: 2700 }
  },

  // ===================== ITALY — NORTH =====================
  {
    name: "Trieste", country: "Italy", eu: true, inland: false,
    lat: 45.6495, lng: 13.7768,
    pop: 204000, hospital: "Cattinara University Hospital", hospitalDist: 0, hospitalNote: "Major university hospital with all specialties. Excellent Friuli VG healthcare system.",
    priceMin: 1800, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€270k" },
    pros: "Habsburg elegance, border city (Slovenia 5 min), excellent healthcare, literary cafe culture, underrated and affordable, Miramare Castle, great coffee tradition",
    cons: "Bora wind (very strong NE gusts), aging population, can feel isolated from rest of Italy, grey winters, limited direct flights",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–30°C", winterLow: "2°C", snow: "Rare on coast (~3 days/yr)", rainyDays: 100, sunHours: 2200 }
  },
  {
    name: "Udine", country: "Italy", eu: true, inland: true,
    lat: 46.0711, lng: 13.2346,
    pop: 99000, hospital: "Udine University Hospital (Santa Maria della Misericordia)", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Excellent Friuli VG system.",
    priceMin: 1200, priceMax: 2000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€180k" },
    pros: "Very affordable, excellent university hospital, Friulian charm, near Venice/Austria/Slovenia, Tiepolo frescoes, peaceful, excellent wine (Collio region)",
    cons: "Inland (no coast, Venice 120 km), cold winters, smaller city, less international, earthquakes in history (1976)",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–30°C", winterLow: "-1°C", snow: "Light, ~10 days/yr", rainyDays: 100, sunHours: 2100 }
  },
  {
    name: "Verona", country: "Italy", eu: true, inland: true,
    lat: 45.4384, lng: 10.9916,
    pop: 258000, hospital: "Azienda Ospedaliera Universitaria Integrata Verona", hospitalDist: 0, hospitalNote: "Major university hospital. Excellent Veneto healthcare system.",
    priceMin: 2200, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€200k–€315k" },
    pros: "Roman Arena, Shakespeare's Juliet, excellent healthcare, major rail hub (Milan–Venice line), Lake Garda 30 min, elegant and walkable, Valpolicella wines",
    cons: "Tourist crowds at Arena/Juliet's house, hot summers (Po Valley heat), some smog, not on coast (Garda 30 min), traffic",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-1°C", snow: "Light, ~8 days/yr", rainyDays: 85, sunHours: 2100 }
  },
  {
    name: "Padova", country: "Italy", eu: true, inland: true,
    lat: 45.4064, lng: 11.8768,
    pop: 210000, hospital: "Azienda Ospedaliera di Padova", hospitalDist: 0, hospitalNote: "Top-ranked Italian university hospital. Among the best in Europe for research.",
    priceMin: 2000, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€180k–€270k" },
    pros: "World-class university hospital, Scrovegni Chapel (Giotto), oldest botanical garden in world, 30 min to Venice by train, vibrant university city, affordable",
    cons: "Po Valley humidity and fog, hot summers, not on coast (Venice 37 km), tourist overflow from Venice, traffic congestion",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "-1°C", snow: "Light, ~5 days/yr", rainyDays: 85, sunHours: 2100 }
  },
  {
    name: "Genova", country: "Italy", eu: true, inland: false,
    lat: 44.4056, lng: 8.9463,
    pop: 566000, hospital: "San Martino Polyclinic Hospital", hospitalDist: 0, hospitalNote: "Largest hospital in Italy by surface area. Major university hospital with all specialties.",
    priceMin: 1800, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€270k" },
    pros: "Major city surprisingly affordable, Europe's largest aquarium, massive old town (largest medieval in Europe), excellent healthcare, Ligurian coast access, major airport",
    cons: "Steep terrain (hard for elderly mobility), industrial port areas, complex driving/parking, some neglected neighborhoods, grey in winter",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–30°C", winterLow: "4°C", snow: "Very rare on coast", rainyDays: 95, sunHours: 2200 }
  },
  {
    name: "La Spezia", country: "Italy", eu: true, inland: false,
    lat: 44.1024, lng: 9.8241,
    pop: 94000, hospital: "Sant'Andrea Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Pisa university hospital (80 km) for complex cases.",
    priceMin: 2000, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€180k–€290k" },
    pros: "Gateway to Cinque Terre, real working Italian city (not touristy itself), naval history, good ferry connections, Portovenere nearby, Ligurian food",
    cons: "Naval/industrial base nearby, less charming center, Cinque Terre overtourism overflows, limited direct flights, steep surrounding terrain",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–30°C", winterLow: "4°C", snow: "Very rare", rainyDays: 90, sunHours: 2300 }
  },
  {
    name: "Trento", country: "Italy", eu: true, inland: true,
    lat: 46.0748, lng: 11.1217,
    pop: 118000, hospital: "Santa Chiara Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Trentino has Italy's best-funded regional healthcare.",
    priceMin: 2800, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€240k–€340k" },
    pros: "Highest quality of life in Italy (consistently #1 in rankings), Trentino's autonomous healthcare (best in Italy), Alpine setting, MUSE science museum, safe and clean, bilingual German influence",
    cons: "Expensive for a small city, cold alpine winters, no coast (Lake Garda 35 min), limited international flights (Verona 1 hr)",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–30°C", winterLow: "-3°C", snow: "Yes, ~25 days/yr", rainyDays: 90, sunHours: 2000 }
  },
  {
    name: "Bologna", country: "Italy", eu: true, inland: true,
    lat: 44.4949, lng: 11.3426,
    pop: 390000, hospital: "Policlinico Sant'Orsola-Malpighi", hospitalDist: 0, hospitalNote: "Major university hospital, one of Italy's best. Multiple hospitals in city.",
    priceMin: 3000, priceMax: 4500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€255k–€380k" },
    pros: "Italy's food capital (ragù, tortellini, mortadella), excellent university hospital, central location (fast trains to everywhere), vibrant cultural life, porticoes (UNESCO)",
    cons: "Hot humid summers (Po Valley), not on coast, increasingly expensive (students + expats), traffic, foggy winters",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–33°C", winterLow: "-1°C", snow: "Light, ~8 days/yr", rainyDays: 80, sunHours: 2100 }
  },
  {
    name: "Turin", country: "Italy", eu: true, inland: true,
    lat: 45.0703, lng: 7.6869,
    pop: 870000, hospital: "Città della Salute e della Scienza di Torino (Molinette)", hospitalDist: 0, hospitalNote: "Major university hospital complex. One of Italy's largest. All specialties.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Remarkably affordable for a major city, elegant baroque architecture, world-class Egyptian museum, excellent food (chocolate, Piedmontese cuisine), Alps views, good public transport",
    cons: "Hot humid summers, cold foggy winters, post-industrial areas, less international than Milan, can feel grey in winter",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "-2°C", snow: "Light, ~15 days/yr", rainyDays: 85, sunHours: 1900 }
  },
  {
    name: "Milan", country: "Italy", eu: true, inland: true,
    lat: 45.4642, lng: 9.1900,
    pop: 1400000, hospital: "Ospedale Maggiore Policlinico / San Raffaele / Humanitas", hospitalDist: 0, hospitalNote: "Multiple world-class hospitals. Best healthcare in Italy. Major medical tourism destination.",
    priceMin: 4000, priceMax: 6500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€340k–€550k" },
    pros: "Fashion/design capital, best healthcare in Italy, excellent international connections (2 airports), vibrant cultural scene, top restaurants, major business hub",
    cons: "Very expensive, hot humid summers, cold foggy winters, traffic/pollution, fast-paced, not scenic by Italian standards",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-1°C", snow: "Light, ~10 days/yr", rainyDays: 85, sunHours: 1900 }
  },
  {
    name: "Bergamo", country: "Italy", eu: true, inland: true,
    lat: 45.6983, lng: 9.6773,
    pop: 122000, hospital: "Papa Giovanni XXIII Hospital", hospitalDist: 0, hospitalNote: "Major hospital. One of Italy's top emergency/trauma centers.",
    priceMin: 2000, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€180k–€270k" },
    pros: "Stunning hilltop old city (Città Alta), budget airline hub (Ryanair), near Lake Iseo, good food, safe, cheaper than Milan but well-connected",
    cons: "Small city, cold foggy winters in lower town, limited nightlife, hot summers, upper city crowded with day-trippers",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "-2°C", snow: "Light, ~12 days/yr", rainyDays: 90, sunHours: 1850 }
  },
  {
    name: "Brescia", country: "Italy", eu: true, inland: true,
    lat: 45.5416, lng: 10.2118,
    pop: 200000, hospital: "Spedali Civili di Brescia", hospitalDist: 0, hospitalNote: "Major hospital with all specialties. University hospital.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Gateway to Lake Garda (30 min), Roman/medieval heritage, affordable, good food, less touristy, decent-sized city with all services",
    cons: "Industrial outskirts, cold foggy winters, hot summers, less charming center than some neighbors, traffic",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-2°C", snow: "Light, ~12 days/yr", rainyDays: 85, sunHours: 1900 }
  },
  {
    name: "Vicenza", country: "Italy", eu: true, inland: true,
    lat: 45.5455, lng: 11.5354,
    pop: 112000, hospital: "San Bortolo Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Padova/Verona university hospitals within 60 km.",
    priceMin: 1800, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€225k" },
    pros: "Palladio's city (UNESCO), affordable, safe, excellent Veneto cuisine, strategic location between Verona/Venice/Padova, gold/jewelry industry",
    cons: "Small, cold foggy winters, hot summers, limited nightlife, can feel provincial, no major airport",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-1°C", snow: "Light, ~10 days/yr", rainyDays: 85, sunHours: 1950 }
  },
  {
    name: "Treviso", country: "Italy", eu: true, inland: true,
    lat: 45.6669, lng: 12.2430,
    pop: 85000, hospital: "Ca' Foncello Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Venice/Padova hospitals accessible for specialists.",
    priceMin: 2000, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€180k–€270k" },
    pros: "Charming walled city, canals, prosecco country, own budget airport (Ryanair), near Venice without Venice prices, excellent food (tiramisù origin)",
    cons: "Small, foggy winters, hot summers, limited nightlife, overshadowed by Venice, mosquitoes in summer",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "-1°C", snow: "Light, ~8 days/yr", rainyDays: 85, sunHours: 1900 }
  },
  {
    name: "Parma", country: "Italy", eu: true, inland: true,
    lat: 44.8015, lng: 11.3271,
    pop: 200000, hospital: "Ospedale Maggiore di Parma (University Hospital)", hospitalDist: 0, hospitalNote: "University hospital with all specialties.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "World food capital (Parmigiano, prosciutto di Parma), elegant city, Verdi country, good university hospital, great quality of life, affordable",
    cons: "Hot humid summers, cold foggy winters, no coast, limited international connections, can feel quiet",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–33°C", winterLow: "-2°C", snow: "Light, ~10 days/yr", rainyDays: 80, sunHours: 1950 }
  },
  {
    name: "Modena", country: "Italy", eu: true, inland: true,
    lat: 44.6471, lng: 10.9252,
    pop: 185000, hospital: "Policlinico di Modena (University Hospital)", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Bologna hospitals also close (40 km).",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Balsamic vinegar capital, Ferrari/Maserati hometown, excellent food, UNESCO cathedral, good university hospital, near Bologna",
    cons: "Hot humid summers, cold foggy winters, no coast, industrial outskirts, limited nightlife, overshadowed by Bologna",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–33°C", winterLow: "-2°C", snow: "Light, ~10 days/yr", rainyDays: 80, sunHours: 2000 }
  },
  {
    name: "Ferrara", country: "Italy", eu: true, inland: true,
    lat: 44.8381, lng: 11.6198,
    pop: 133000, hospital: "Arcispedale Sant'Anna (University Hospital)", hospitalDist: 0, hospitalNote: "University hospital. Bologna hospitals 50 km for complex cases.",
    priceMin: 1200, priceMax: 2000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€180k" },
    pros: "UNESCO Renaissance gem, most bike-friendly city in Italy, very affordable, peaceful, beautiful Este castle, near Po Delta nature",
    cons: "Hot humid summers, cold foggy winters, mosquitoes, flat landscape, limited nightlife, somewhat isolated feel",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–33°C", winterLow: "-1°C", snow: "Light, ~8 days/yr", rainyDays: 75, sunHours: 2050 }
  },
  {
    name: "Ravenna", country: "Italy", eu: true, inland: true,
    lat: 44.4184, lng: 12.2035,
    pop: 160000, hospital: "Santa Maria delle Croci Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Bologna hospitals (80 km) for complex cases.",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€225k" },
    pros: "Stunning Byzantine mosaics (8 UNESCO sites!), affordable, beach nearby (8 km), pine forest, Dante's tomb, peaceful, cycling-friendly",
    cons: "Hot humid summers, can feel sleepy, limited nightlife, mosquitoes, no major airport, industrial port area",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "0°C", snow: "Light, ~5 days/yr", rainyDays: 75, sunHours: 2100 }
  },
  {
    name: "Lucca", country: "Italy", eu: true, inland: true,
    lat: 43.8376, lng: 10.4951,
    pop: 90000, hospital: "San Luca Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Pisa university hospital (25 km) for complex cases.",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€215k–€300k" },
    pros: "Perfectly preserved Renaissance walls (walkable/bikeable), charming Tuscan town without tourist crush of Florence, excellent food, Puccini's birthplace, safe",
    cons: "Small city, limited nightlife, no direct trains to Rome, tourist season crowds, hot summers, fewer international services",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "31–33°C", winterLow: "2°C", snow: "Very rare", rainyDays: 90, sunHours: 2200 }
  },
  {
    name: "Florence", country: "Italy", eu: true, inland: true,
    lat: 43.7696, lng: 11.2558,
    pop: 380000, hospital: "Careggi University Hospital", hospitalDist: 0, hospitalNote: "Major university hospital, one of Italy's best. Multiple hospitals in city.",
    priceMin: 4000, priceMax: 6000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€340k–€510k" },
    pros: "Art capital of the world (Uffizi, Duomo, Ponte Vecchio), world-class food/wine, excellent university hospital, stunning Tuscan hills setting, vibrant expat community",
    cons: "Expensive and overtouristed, hot summers, no beach, traffic-restricted center (ZTL), crowded, landlords favor short-term rentals",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "32–34°C", winterLow: "2°C", snow: "Very rare", rainyDays: 90, sunHours: 2200 }
  },
  {
    name: "Como", country: "Italy", eu: true, inland: true,
    lat: 45.8081, lng: 9.0852,
    pop: 85000, hospital: "Sant'Anna Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Milan hospitals accessible (50 km).",
    priceMin: 3000, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€255k–€425k" },
    pros: "Stunning Lake Como setting, elegant lakeside promenades, near Milan and Switzerland, mild microclimate, silk tradition, beautiful villas",
    cons: "Expensive (celebrity/tourist premium), narrow steep streets, parking nightmare, crowded in summer, cool/grey winters, small city",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–30°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 95, sunHours: 1800 }
  },
  {
    name: "Mantova", country: "Italy", eu: true, inland: true,
    lat: 45.1564, lng: 10.7914,
    pop: 49000, hospital: "Carlo Poma Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Verona/Brescia hospitals accessible (40–60 km).",
    priceMin: 1500, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€200k" },
    pros: "UNESCO Renaissance jewel, Gonzaga palaces, surrounded by lakes, very affordable, excellent Mantuan cuisine (tortelli di zucca), safe, cycling-friendly",
    cons: "Small and quiet, hot humid summers, cold foggy winters, mosquitoes from lakes, limited nightlife, isolated feel",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–33°C", winterLow: "-2°C", snow: "Light, ~10 days/yr", rainyDays: 80, sunHours: 1950 }
  },
  {
    name: "Bolzano", country: "Italy", eu: true, inland: true,
    lat: 46.4983, lng: 11.3548,
    pop: 108000, hospital: "Bolzano Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital. Italy's best-funded healthcare (autonomous South Tyrol). Innsbruck (Austria) also reachable (115 km).",
    priceMin: 3500, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€425k" },
    pros: "Dolomites at doorstep, bilingual (Italian/German), Italy's highest quality of life, cleanest air, excellent schools/healthcare, Alpine hiking/skiing, Christmas markets",
    cons: "Expensive, cold winters with snow, German-speaking majority (Italian speakers minority), remote from rest of Italy, small city, limited direct flights",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "28–31°C", winterLow: "-5°C", snow: "Yes, ~30 days/yr", rainyDays: 85, sunHours: 2000 }
  },
  {
    name: "Venice", country: "Italy", eu: true, inland: false,
    lat: 45.4408, lng: 12.3155,
    pop: 261000, hospital: "Ospedale dell'Angelo", hospitalDist: 0, hospitalNote: "Major hospital in Mestre. Also SS. Giovanni e Paolo in historic center. Full specialist services.",
    priceMin: 3000, priceMax: 6000,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€240k–€480k" },
    pros: "One of the world's most beautiful cities, car-free historic center, rich culture/art/architecture, excellent food, island hopping (Murano, Burano, Lido)",
    cons: "Flooding (acqua alta), very expensive, mass tourism, boat-based logistics, damp climate, depopulating historic center",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "27–30°C", winterLow: "0°C", snow: "Rare, ~2 days/yr", rainyDays: 80, sunHours: 2100 }
  },
  {
    name: "Monza", country: "Italy", eu: true, inland: true,
    lat: 45.5845, lng: 9.2744,
    pop: 124000, hospital: "Ospedale San Gerardo", hospitalDist: 0, hospitalNote: "Major teaching hospital (Univ. Milano-Bicocca). Full specialist services, trauma center.",
    priceMin: 2500, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€340k" },
    pros: "Royal villa and park, famous F1 circuit, close to Milan (15 km), excellent trains, quieter than Milan, historic center",
    cons: "In Milan's shadow, traffic congestion, not as affordable as further south, limited nightlife vs Milan",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "-2°C", snow: "Light, ~8 days/yr", rainyDays: 80, sunHours: 1900 }
  },
  {
    name: "Novara", country: "Italy", eu: true, inland: true,
    lat: 45.4469, lng: 8.6200,
    pop: 104000, hospital: "Ospedale Maggiore della Carità", hospitalDist: 0, hospitalNote: "Major hospital with full services. Piedmont's healthcare consistently ranked among Italy's best.",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€225k" },
    pros: "Very affordable for northern Italy, good rail (Milan 50 min, Turin 90 min), Piedmont food culture, rice paddy landscape",
    cons: "Fog-prone Po Valley, humid summers, limited tourism appeal, provincial feel, cold winters",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "-3°C", snow: "Moderate, ~10 days/yr", rainyDays: 80, sunHours: 1850 }
  },
  {
    name: "Piacenza", country: "Italy", eu: true, inland: true,
    lat: 45.0526, lng: 9.6930,
    pop: 104000, hospital: "Ospedale Guglielmo da Saliceto", hospitalDist: 0, hospitalNote: "Full-service hospital. Emilia-Romagna's healthcare system ranked among Italy's best.",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€225k" },
    pros: "Very affordable, excellent Emilia-Romagna food (salumi, cheeses), strategic position (Milan 70 km), historic old town",
    cons: "Fog in winter, humid summers, less touristic (quiet), limited international connectivity, Po Valley flatness",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-2°C", snow: "Light, ~8 days/yr", rainyDays: 80, sunHours: 1900 }
  },
  {
    name: "Reggio Emilia", country: "Italy", eu: true, inland: true,
    lat: 44.6989, lng: 10.6310,
    pop: 172000, hospital: "Arcispedale Santa Maria Nuova", hospitalDist: 0, hospitalNote: "Major hospital with all specialties. Part of Emilia-Romagna's top-rated regional health system.",
    priceMin: 1800, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€270k" },
    pros: "Birthplace of Italian flag, excellent food (Parmigiano, balsamic), family-friendly, good schools, affordable, high-speed rail station",
    cons: "Fog and humidity in Po Valley, limited tourism appeal, hot summers, less international feel",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-2°C", snow: "Light, ~8 days/yr", rainyDays: 80, sunHours: 1900 }
  },
  {
    name: "Rimini", country: "Italy", eu: true, inland: false,
    lat: 44.0594, lng: 12.5681,
    pop: 150000, hospital: "Ospedale Infermi di Rimini", hospitalDist: 0, hospitalNote: "Full-service hospital with emergency and specialist care.",
    priceMin: 2000, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€170k–€300k" },
    pros: "15 km sandy beaches, vibrant summer nightlife, Fellini's birthplace, good rail connections, San Marino day trip, own airport",
    cons: "Very seasonal (dead in winter), beach-tourism vibe, crowded in summer, limited off-season culture",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "0°C", snow: "Light, ~4 days/yr", rainyDays: 75, sunHours: 2100 }
  },
  {
    name: "Forlì", country: "Italy", eu: true, inland: true,
    lat: 44.2228, lng: 12.0408,
    pop: 118000, hospital: "Ospedale Morgagni-Pierantoni", hospitalDist: 0, hospitalNote: "Full-service hospital. Part of Emilia-Romagna's excellent regional healthcare system.",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€225k" },
    pros: "Very affordable, authentic Italian small city, excellent Romagna food, near Adriatic coast (25 km), near Apennines",
    cons: "Provincial feel, limited international community, hot humid summers, foggy winters, few direct flights",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "-1°C", snow: "Light, ~5 days/yr", rainyDays: 75, sunHours: 2000 }
  },
  {
    name: "Prato", country: "Italy", eu: true, inland: true,
    lat: 43.8777, lng: 11.1020,
    pop: 195000, hospital: "Ospedale Santo Stefano", hospitalDist: 0, hospitalNote: "Full-service hospital. Also close to Florence's major hospitals (20 km).",
    priceMin: 2000, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€170k–€300k" },
    pros: "Much cheaper than Florence (20 km), good transport links, textile tradition, diverse community, Tuscan food",
    cons: "Industrial outskirts not scenic, lives in Florence's shadow, less tourist appeal, some rougher neighborhoods",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "31–33°C", winterLow: "1°C", snow: "Rare, ~2 days/yr", rainyDays: 85, sunHours: 2100 }
  },
  {
    name: "Livorno", country: "Italy", eu: true, inland: false,
    lat: 43.5485, lng: 10.3106,
    pop: 157000, hospital: "Ospedale di Livorno", hospitalDist: 0, hospitalNote: "Full-service hospital. Pisa's university hospital also accessible (20 km).",
    priceMin: 1800, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€150k–€255k" },
    pros: "Tuscany's main port, seafood capital, authentic working-class character, seaside promenade, ferries to Elba/Sardinia/Corsica",
    cons: "Not classically pretty like other Tuscan cities, industrial port, less touristic, WWII bombing destroyed much of historic center",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "4°C", snow: "Very rare", rainyDays: 80, sunHours: 2350 }
  },
  {
    name: "Arezzo", country: "Italy", eu: true, inland: true,
    lat: 43.4633, lng: 11.8798,
    pop: 100000, hospital: "Ospedale San Donato", hospitalDist: 0, hospitalNote: "Full-service hospital with specialist departments.",
    priceMin: 1500, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€250k" },
    pros: "Beautiful Tuscan hill town, antique market tradition, 'Life is Beautiful' filming location, affordable for Tuscany, near Florence/Siena/Perugia",
    cons: "Hilly terrain, inland (no coast), provincial feel, limited nightlife, hot summers",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "31–33°C", winterLow: "0°C", snow: "Light, ~3 days/yr", rainyDays: 80, sunHours: 2150 }
  },
  {
    name: "Perugia", country: "Italy", eu: true, inland: true,
    lat: 43.1107, lng: 12.3908,
    pop: 166000, hospital: "Ospedale Santa Maria della Misericordia", hospitalDist: 0, hospitalNote: "Major teaching hospital (Univ. of Perugia). Full specialist services.",
    priceMin: 1500, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€250k" },
    pros: "University city with young vibe, hilltop old town, chocolate capital (Perugina), central location, Jazz Umbria, affordable",
    cons: "Hilly terrain requires car, no coast, provincial outside university, earthquake zone, limited flights",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "0°C", snow: "Light, ~4 days/yr", rainyDays: 85, sunHours: 2100 }
  },
  {
    name: "Ancona", country: "Italy", eu: true, inland: false,
    lat: 43.6158, lng: 13.5189,
    pop: 101000, hospital: "Ospedali Riuniti di Ancona", hospitalDist: 0, hospitalNote: "Major regional hospital and teaching facility. Full specialist services.",
    priceMin: 1500, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€250k" },
    pros: "Adriatic port city, ferries to Croatia/Greece, overlooking sea on Monte Conero, affordable coastal city, university town",
    cons: "Industrial port area, limited tourism infrastructure, windy, less known internationally, some rough areas",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "29–31°C", winterLow: "2°C", snow: "Rare, ~2 days/yr", rainyDays: 80, sunHours: 2200 }
  },

  // ===================== ITALY — SOUTH =====================
  {
    name: "Lecce", country: "Italy", eu: true, inland: false,
    lat: 40.3516, lng: 18.1750,
    pop: 95000, hospital: "Vito Fazzi Hospital", hospitalDist: 0, hospitalNote: "Full-service hospital with ER and specialists",
    priceMin: 1500, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€135k–€270k" },
    pros: "\"Florence of the South\" — baroque beauty, affordable EU, excellent food, near both coasts, Ryanair airport",
    cons: "Italian bureaucracy legendary, car essential, limited English, hot summers with sirocco wind",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale for everything.",
    climate: { summerHigh: "31–32°C", winterLow: "5°C", snow: "Rare", rainyDays: 85, sunHours: 2500 }
  },
  {
    name: "Syracuse", country: "Italy", eu: true, inland: false,
    lat: 37.0755, lng: 15.2866,
    pop: 120000, hospital: "Umberto I Hospital", hospitalDist: 0, hospitalNote: "Catania University Hospital for complex cases (60 km)",
    priceMin: 1200, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€225k" },
    pros: "Fewest rainy days on list (66!), ancient Greek ruins, Ortigia island stunning, very affordable EU, mild winters (8°C)",
    cons: "Remote Sicily, car essential, Sicilian bureaucracy, limited direct flights, infrastructure gaps",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "31–32°C", winterLow: "8°C", snow: "Extremely rare", rainyDays: 66, sunHours: 2500 }
  },
  {
    name: "Ostuni", country: "Italy", eu: true, inland: true,
    lat: 40.7296, lng: 17.5773,
    pop: 32000, hospital: "Brindisi Hospital (Perrino)", hospitalDist: 30, hospitalNote: "Lecce Vito Fazzi Hospital also reachable (40 km)",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed house (trullo/masseria)", size: "100 m²", cost: "€150k–€250k" },
    pros: "\"White City\" — photogenic hilltop town, between two coasts, trulli houses, growing expat scene, excellent food",
    cons: "Hospital 30 km away, car essential, quiet off-season, Italian bureaucracy, can be hot and dry in summer",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "30–32°C", winterLow: "5°C", snow: "Rare", rainyDays: 80, sunHours: 2500 }
  },
  {
    name: "Matera", country: "Italy", eu: true, inland: true,
    lat: 40.6664, lng: 16.6044,
    pop: 60000, hospital: "Madonna delle Grazie Hospital", hospitalDist: 0, hospitalNote: "Bari Policlinico for complex cases (65 km)",
    priceMin: 1200, priceMax: 2000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€100k–€180k" },
    pros: "UNESCO Sassi cave dwellings, European Capital of Culture 2019, affordable, unique and beautiful, improving infrastructure",
    cons: "Inland and remote (coast 45 min away), car essential, limited direct flights, hot dry summers, bureaucracy",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "31–33°C", winterLow: "2°C", snow: "Occasional light", rainyDays: 85, sunHours: 2400 }
  },
  {
    name: "Ragusa", country: "Italy", eu: true, inland: true,
    lat: 36.9269, lng: 14.7255,
    pop: 73000, hospital: "Ragusa Hospital (Giovanni Paolo II)", hospitalDist: 0, hospitalNote: "Catania for complex cases (100 km)",
    priceMin: 1000, priceMax: 1800,
    housing: { type: "3-bed house", size: "110 m²", cost: "€90k–€160k" },
    pros: "Baroque UNESCO town, cheapest in EU Italy, Montalbano TV fame, coast 20 min, fewest rainy days in region",
    cons: "Remote southeastern Sicily, car essential, limited flights (Catania/Comiso), very hot summers",
    visa: "EU member. Register at local comune. Full EU healthcare. Need codice fiscale.",
    climate: { summerHigh: "31–33°C", winterLow: "5°C", snow: "Very rare", rainyDays: 60, sunHours: 2500 }
  },

  // ===================== ALBANIA =====================
  {
    name: "Saranda", country: "Albania", eu: false, inland: false,
    lat: 39.8661, lng: 20.0050,
    pop: 20000, hospital: "Saranda Hospital (basic)", hospitalDist: 0, hospitalNote: "Tirana Mother Teresa Hospital for specialists (280 km). Corfu (Greece) by ferry in emergency.",
    priceMin: 1000, priceMax: 2000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€90k–€180k" },
    pros: "Ultra-affordable, across from Corfu (30 min ferry), Albanian Riviera beaches, warm sunny climate",
    cons: "Not EU, weak healthcare, variable construction quality, limited English, power/water outages possible",
    visa: "Not EU (candidate). EU citizens: 1 year without visa. Property purchase gives residency. Less regulated than MNE.",
    climate: { summerHigh: "31–32°C", winterLow: "5°C", snow: "Very rare", rainyDays: 92, sunHours: 2670 }
  },
  {
    name: "Vlorë", country: "Albania", eu: false, inland: false,
    lat: 40.4660, lng: 19.4910,
    pop: 80000, hospital: "Vlorë Regional Hospital", hospitalDist: 0, hospitalNote: "Tirana Mother Teresa Hospital for specialists (150 km)",
    priceMin: 800, priceMax: 1500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€72k–€135k" },
    pros: "Cheapest coastal Europe, new airport (2024), gateway to Albanian Riviera, Italian coast visible on clear days",
    cons: "Not EU, weakest infrastructure on list, healthcare very limited, rapid unregulated development",
    visa: "Not EU (candidate). EU citizens: 1 year without visa. Property purchase gives residency.",
    climate: { summerHigh: "31–32°C", winterLow: "5°C", snow: "Very rare", rainyDays: 120, sunHours: 2670 }
  },
  {
    name: "Tirana", country: "Albania", eu: false, inland: true,
    lat: 41.3275, lng: 19.8187,
    pop: 500000, hospital: "Mother Teresa University Hospital", hospitalDist: 0, hospitalNote: "Best hospital in Albania. Some private hospitals with international standards.",
    priceMin: 1200, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€200k" },
    pros: "Capital with best Albanian healthcare, rapidly modernizing, affordable, vibrant cafe culture, international airport",
    cons: "Not EU, traffic chaos, air quality issues, infrastructure still developing, healthcare below EU standards",
    visa: "Not EU (candidate). EU citizens: 1 year without visa. Property purchase gives residency.",
    climate: { summerHigh: "31–33°C", winterLow: "1°C", snow: "Rare, light", rainyDays: 110, sunHours: 2500 }
  },

  // ===================== PORTUGAL =====================
  {
    name: "Cascais", country: "Portugal", eu: true, inland: false,
    lat: 38.6979, lng: -9.4215,
    pop: 210000, hospital: "Hospital de Cascais", hospitalDist: 0, hospitalNote: "Lisbon hospitals 25 km (Santa Maria, São José). World-class healthcare.",
    priceMin: 4000, priceMax: 6000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€340k–€510k" },
    pros: "Near Lisbon with world-class amenities, excellent healthcare, large English-speaking expat community, mild year-round climate, NHR tax regime",
    cons: "Expensive (Lisbon prices), increasingly crowded with expats, parking difficult, gentrification pushing locals out",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF (tax number) needed.",
    climate: { summerHigh: "27–28°C", winterLow: "8°C", snow: "Virtually never", rainyDays: 85, sunHours: 2800 }
  },
  {
    name: "Lagos", country: "Portugal", eu: true, inland: false,
    lat: 37.1028, lng: -8.6730,
    pop: 31000, hospital: "Lagos Hospital", hospitalDist: 0, hospitalNote: "Faro Hospital for complex cases (85 km). Lisbon 3 hrs.",
    priceMin: 3000, priceMax: 4500,
    housing: { type: "3-bed house", size: "100 m²", cost: "€300k–€450k" },
    pros: "Algarve sunshine (3,000 hrs!), stunning cliffs/beaches, established expat community, golf, mild winters, good airport (Faro)",
    cons: "Increasingly expensive, touristy, can feel isolated from \"real\" Portugal, limited hospital, dry landscape",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "8°C", snow: "Virtually never", rainyDays: 60, sunHours: 3000 }
  },

  // Portugal — North
  {
    name: "Porto", country: "Portugal", eu: true, inland: false,
    lat: 41.1485, lng: -8.6110,
    pop: 250000, hospital: "Centro Hospitalar Universitário de São João", hospitalDist: 0, hospitalNote: "Largest hospital in Northern Portugal (1,100 beds). World-class referral center. Also Hospital de Santo António.",
    priceMin: 1200, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€365k–€440k" },
    pros: "UNESCO Ribeira district, world-class food/wine (port wine), excellent metro (6 lines), walkable center, very safe, large expat community, mild climate, international airport, rich architecture and azulejos",
    cons: "Rising prices and gentrification, steep hills in some areas, rainy winters (~147 rain days), summer tourism crowds, parking difficult in center",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "25–28°C", winterLow: "5°C", snow: "Virtually never", rainyDays: 147, sunHours: 2500 }
  },
  {
    name: "Vila Nova de Gaia", country: "Portugal", eu: true, inland: false,
    lat: 41.1336, lng: -8.6174,
    pop: 313000, hospital: "Centro Hospitalar Vila Nova de Gaia/Espinho", hospitalDist: 0, hospitalNote: "Major public hospital. São João in Porto 8 km for complex referrals.",
    priceMin: 1000, priceMax: 1800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€280k–€360k" },
    pros: "Port wine lodges (60+ cellars), cheaper than Porto, Atlantic beaches, metro access to Porto, Douro riverfront views, diverse neighborhoods from fishing villages to beach areas",
    cons: "Less distinct identity than Porto (perceived as suburb), steep terrain near river, less walkable outside waterfront, industrial areas in parts",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "25–28°C", winterLow: "5°C", snow: "Virtually never", rainyDays: 147, sunHours: 2500 }
  },
  {
    name: "Braga", country: "Portugal", eu: true, inland: true,
    lat: 41.5454, lng: -8.4265,
    pop: 204000, hospital: "Hospital de Braga", hospitalDist: 0, hospitalNote: "Modern public hospital. São João Porto for complex cases (55 km).",
    priceMin: 800, priceMax: 1500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€128k–€213k" },
    pros: "\"Rome of Portugal\" — baroque churches, excellent quality of life (EU top 10), walkable flat historic center, university city energy, 25% cheaper than Porto, Bom Jesus sanctuary (UNESCO), excellent Minho cuisine",
    cons: "Rainy winters (heavy rainfall), limited English outside center, no metro system, rising rental costs, hot inland summers, less international than Porto",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "27–30°C", winterLow: "4°C", snow: "Rare, light", rainyDays: 145, sunHours: 2540 }
  },
  {
    name: "Matosinhos", country: "Portugal", eu: true, inland: false,
    lat: 41.1819, lng: -8.6838,
    pop: 181000, hospital: "Hospital Pedro Hispano", hospitalDist: 0, hospitalNote: "Public hospital. São João Porto 8 km for referrals.",
    priceMin: 1000, priceMax: 1700,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€290k–€370k" },
    pros: "Portugal's best seafood (fresh daily from fishing fleet), wide sandy beach, metro to Porto (20 min), Leça da Palmeira (Álvaro Siza architecture), very livable",
    cons: "Industrial port areas detract, less charming than Porto center, cloudy days, commuting rush hours, higher prices than inland",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "24–27°C", winterLow: "6°C", snow: "Virtually never", rainyDays: 147, sunHours: 2500 }
  },
  {
    name: "Gondomar", country: "Portugal", eu: true, inland: true,
    lat: 41.1445, lng: -8.5322,
    pop: 169000, hospital: "Hospital de São João (Porto)", hospitalDist: 10, hospitalNote: "São João in Porto is the direct referral hospital for Gondomar (10 km).",
    priceMin: 700, priceMax: 1200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€200k–€280k" },
    pros: "Affordable alternative to Porto, metro access (Line F), Douro river parks, known for gold jewelry craftsmanship, green spaces, family-friendly",
    cons: "Primarily residential/suburban, limited cultural life, dependent on Porto for most services, less walkable urban fabric, car recommended",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "26–29°C", winterLow: "5°C", snow: "Virtually never", rainyDays: 145, sunHours: 2500 }
  },
  {
    name: "Guimarães", country: "Portugal", eu: true, inland: true,
    lat: 41.4444, lng: -8.2962,
    pop: 157000, hospital: "Hospital da Senhora da Oliveira", hospitalDist: 0, hospitalNote: "General hospital. São João Porto for complex cases (55 km).",
    priceMin: 700, priceMax: 1200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€115k–€180k" },
    pros: "\"Birthplace of Portugal\" — UNESCO historic center, European Capital of Culture 2012, medieval castle + Palace of Dukes of Braganza, charming pedestrianized streets, affordable, Penha cable car",
    cons: "Inland (no beach, 55 km to coast), limited English spoken, smaller cultural scene outside heritage sites, cold/wet winters, quiet at night",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "27–30°C", winterLow: "4°C", snow: "Rare, light", rainyDays: 145, sunHours: 2500 }
  },
  {
    name: "Maia", country: "Portugal", eu: true, inland: true,
    lat: 41.2357, lng: -8.6199,
    pop: 145000, hospital: "Hospital de São João (Porto)", hospitalDist: 8, hospitalNote: "São João Porto is the direct referral hospital (8 km). Local health centers available.",
    priceMin: 800, priceMax: 1300,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€220k–€300k" },
    pros: "Very close to Porto airport (5 km), metro access (Line C), good schools, modern infrastructure, lower rents than Porto, good road connections",
    cons: "Suburban character, lacks historic charm, identity tied to Porto, limited cultural attractions, commercial/industrial zones, less walkable",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "25–28°C", winterLow: "5°C", snow: "Virtually never", rainyDays: 147, sunHours: 2500 }
  },
  {
    name: "Santa Maria da Feira", country: "Portugal", eu: true, inland: true,
    lat: 40.9252, lng: -8.5426,
    pop: 141000, hospital: "Hospital de São Sebastião", hospitalDist: 0, hospitalNote: "Centro Hospitalar Entre Douro e Vouga. São João Porto for complex cases (30 km).",
    priceMin: 600, priceMax: 1000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€95k–€150k" },
    pros: "Very affordable, medieval castle (Feira Castle), Viagem Medieval festival (largest medieval fair in Iberia), near Espinho beaches (20 km), good motorway connections",
    cons: "Small town center, limited public transport (bus only), car strongly recommended, few cultural amenities, little English spoken",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "25–27°C", winterLow: "5°C", snow: "Virtually never", rainyDays: 140, sunHours: 2500 }
  },
  {
    name: "Vila Nova de Famalicão", country: "Portugal", eu: true, inland: true,
    lat: 41.4080, lng: -8.5198,
    pop: 137000, hospital: "Hospital de Famalicão", hospitalDist: 0, hospitalNote: "Public hospital. Braga or São João Porto (45 km) for complex cases.",
    priceMin: 600, priceMax: 1000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€100k–€155k" },
    pros: "Very affordable, gateway to Minho region, walkable town center, train connections to Porto and Braga, 30 min from Porto airport, authentic Portuguese life",
    cons: "Small town feel (city proper ~9,000), limited English, industrial economy (textiles), less cultural richness, car recommended for surrounding area",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "27–30°C", winterLow: "4°C", snow: "Rare, light", rainyDays: 145, sunHours: 2500 }
  },
  {
    name: "Barcelos", country: "Portugal", eu: true, inland: true,
    lat: 41.5325, lng: -8.6183,
    pop: 117000, hospital: "Hospital de Barcelos", hospitalDist: 0, hospitalNote: "Local hospital with limited capacity. Hospital de Braga (20 km) for complex cases.",
    priceMin: 500, priceMax: 900,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€85k–€140k" },
    pros: "Symbol of Portugal (Galo de Barcelos rooster), famous weekly market (oldest in Portugal), very affordable, traditional pottery/crafts, Caminho de Santiago, Minho gastronomy",
    cons: "Small town, limited healthcare, limited English, car essential, few cultural events beyond traditional festivals, very rainy, limited public transport",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "25–28°C", winterLow: "5°C", snow: "Very rare", rainyDays: 155, sunHours: 2400 }
  },
  {
    name: "Viseu", country: "Portugal", eu: true, inland: true,
    lat: 40.6610, lng: -7.9097,
    pop: 104000, hospital: "Hospital de São Teotónio", hospitalDist: 0, hospitalNote: "Main hospital for Viseu district. Coimbra university hospitals (90 km) for complex cases.",
    priceMin: 500, priceMax: 850,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€145k" },
    pros: "Consistently rated best quality of life in Portugal, very affordable (~35% cheaper than Lisbon), Dão wine region, clean and safe, historic center, excellent fresh produce at markets",
    cons: "No direct rail connection (nearest station 25 km), car essential, cool winters (inland), limited international community, few English speakers, far from coast and airport",
    visa: "EU member. Automatic right to reside. Register at local câmara. Full EU healthcare. NIF required.",
    climate: { summerHigh: "28–31°C", winterLow: "2°C", snow: "Rare, light", rainyDays: 130, sunHours: 2730 }
  },

  // ===================== SPAIN =====================
  {
    name: "Valencia", country: "Spain", eu: true, inland: false,
    lat: 39.4699, lng: -0.3763,
    pop: 800000, hospital: "Hospital La Fe", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Excellent healthcare system.",
    priceMin: 2200, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€200k–€315k" },
    pros: "Major city with full amenities, excellent healthcare, beach + city life, affordable for its size, wonderful food, great weather (2,700 sun hrs)",
    cons: "Spanish bureaucracy (NIE process), hot humid summers, flooding risk (2024 disaster), language barrier if no Spanish",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "5°C", snow: "Virtually never", rainyDays: 50, sunHours: 2700 }
  },
  {
    name: "Málaga", country: "Spain", eu: true, inland: false,
    lat: 36.7213, lng: -4.4214,
    pop: 580000, hospital: "Hospital Regional de Málaga", hospitalDist: 0, hospitalNote: "Multiple hospitals. Major medical hub for Costa del Sol.",
    priceMin: 2800, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€250k–€360k" },
    pros: "Major city + beach, excellent healthcare, huge expat community, great airport (cheap flights everywhere), Picasso museum, vibrant culture",
    cons: "Prices rising fast (expat demand), hot summers, overtourism in center, Spanish bureaucracy, gentrification concerns",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "7°C", snow: "Virtually never", rainyDays: 55, sunHours: 2900 }
  },

  // Northern Spain
  {
    name: "San Sebastián", country: "Spain", eu: true, inland: false,
    lat: 43.3183, lng: -1.9812,
    pop: 187000, hospital: "Hospital Universitario Donostia", hospitalDist: 0, hospitalNote: "Major university hospital with all specialties. Excellent Basque public healthcare.",
    priceMin: 5000, priceMax: 7500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€425k–€640k" },
    pros: "Regularly rated best food city in Europe, stunning beaches (La Concha), Basque culture, very safe, walkable, world-class dining scene",
    cons: "Very expensive (priciest in Spain outside Madrid/Barcelona), lots of rain (170 days), cool summers, Basque language adds complexity",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "24–26°C", winterLow: "3°C", snow: "Rare on coast", rainyDays: 170, sunHours: 1650 }
  },
  {
    name: "Bilbao", country: "Spain", eu: true, inland: false,
    lat: 43.2630, lng: -2.9350,
    pop: 345000, hospital: "Hospital de Basurto / Hospital de Cruces", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Basque healthcare system is Spain's best-funded.",
    priceMin: 3000, priceMax: 4500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€255k–€380k" },
    pros: "Guggenheim museum, transformed industrial city, excellent Basque healthcare (Spain's best), great food, good airport, vibrant culture",
    cons: "Rainy (160 days), cool summers (25–27°C), not on beach (coast 20 min), Basque language, grey winters",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "25–27°C", winterLow: "4°C", snow: "Very rare in city", rainyDays: 160, sunHours: 1600 }
  },
  {
    name: "Santander", country: "Spain", eu: true, inland: false,
    lat: 43.4623, lng: -3.8100,
    pop: 172000, hospital: "Hospital U. Marqués de Valdecilla", hospitalDist: 0, hospitalNote: "Top-ranked Spanish hospital. Major referral center for northern Spain.",
    priceMin: 2500, priceMax: 3800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€320k" },
    pros: "Elegant bay-side city, one of Spain's best hospitals (Valdecilla), beautiful beaches, ferry to UK (Plymouth), more affordable than Basque Country",
    cons: "Rainy (165 days), cool summers, smaller cultural scene than Bilbao, can feel quiet off-season",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "23–25°C", winterLow: "5°C", snow: "Very rare on coast", rainyDays: 165, sunHours: 1650 }
  },
  {
    name: "Gijón", country: "Spain", eu: true, inland: false,
    lat: 43.5453, lng: -5.6615,
    pop: 270000, hospital: "Hospital U. de Cabueñes", hospitalDist: 0, hospitalNote: "Hospital U. Central de Asturias in Oviedo (30 km) for complex cases.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Very affordable for a city this size, excellent beach (San Lorenzo), cider culture, friendly locals, green coast (Costa Verde), authentic Spain",
    cons: "Rainy and cloudy (155 days rain), coolest summers on list (22–24°C), limited international flights, less English spoken",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "22–24°C", winterLow: "5°C", snow: "Very rare on coast", rainyDays: 155, sunHours: 1700 }
  },
  {
    name: "A Coruña", country: "Spain", eu: true, inland: false,
    lat: 43.3623, lng: -8.4115,
    pop: 245000, hospital: "CHUAC (Complejo Hospitalario)", hospitalDist: 0, hospitalNote: "Major university hospital complex. Regional referral center for Galicia.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Affordable city with major hospital, Celtic/Galician culture, excellent seafood, Tower of Hercules (UNESCO), mild winters for northern Spain",
    cons: "Rainy (150 days), limited sunshine, far from rest of Europe, Galician language, fewer international connections",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "22–24°C", winterLow: "6°C", snow: "Extremely rare", rainyDays: 150, sunHours: 1900 }
  },
  {
    name: "Vigo", country: "Spain", eu: true, inland: false,
    lat: 42.2406, lng: -8.7207,
    pop: 293000, hospital: "Hospital Álvaro Cunqueiro", hospitalDist: 0, hospitalNote: "New modern hospital (opened 2015). Full specialties. Near Portuguese border.",
    priceMin: 1600, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€145k–€225k" },
    pros: "Cheapest major city in northern Spain, brand-new hospital, Cíes Islands (\"Galician Caribbean\"), excellent seafood, near Portugal",
    cons: "Rainy (140 days), not as charming as smaller Galician towns, hilly terrain, Galician language, fewer flights",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "24–26°C", winterLow: "5°C", snow: "Extremely rare", rainyDays: 140, sunHours: 2000 }
  },
  {
    name: "Pontevedra", country: "Spain", eu: true, inland: false,
    lat: 42.4310, lng: -8.6440,
    pop: 83000, hospital: "Hospital Montecelo", hospitalDist: 0, hospitalNote: "Hospital Álvaro Cunqueiro in Vigo for complex cases (30 km).",
    priceMin: 1400, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€125k–€200k" },
    pros: "Famously pedestrian-friendly (cars banned from center), one of Spain's most liveable small cities, very affordable, excellent quality of life",
    cons: "Rainy (145 days), small town — limited nightlife/culture, major hospital 30 km (Vigo), Galician language, quiet",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "25–27°C", winterLow: "4°C", snow: "Extremely rare", rainyDays: 145, sunHours: 2000 }
  },
  {
    name: "Logroño", country: "Spain", eu: true, inland: true,
    lat: 42.4627, lng: -2.4445,
    pop: 150000, hospital: "Hospital San Pedro", hospitalDist: 0, hospitalNote: "Full-service hospital. Pamplona and Bilbao hospitals also within 1.5 hrs.",
    priceMin: 1400, priceMax: 2000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€125k–€180k" },
    pros: "Capital of La Rioja wine region, famous tapas street (Calle Laurel), very affordable, safe and clean, Camino de Santiago passes through",
    cons: "Inland (no coast), cold winters with some snow, small city, limited international connections, hot dry summers",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 80, sunHours: 2200 }
  },
  {
    name: "Oviedo", country: "Spain", eu: true, inland: true,
    lat: 43.3614, lng: -5.8494,
    pop: 217000, hospital: "Hospital Universitario Central de Asturias (HUCA)", hospitalDist: 0, hospitalNote: "Modern university hospital (new complex 2014). Major referral center for all Asturias.",
    priceMin: 1600, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€145k–€225k" },
    pros: "Capital of Asturias, brand-new university hospital (HUCA), pre-Romanesque churches (UNESCO), excellent cider culture, safe and clean, affordable",
    cons: "Rainy (150 days), not on coast (Gijón beaches 30 km), cool summers, limited international flights, less English spoken",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "23–25°C", winterLow: "3°C", snow: "Rare in city", rainyDays: 150, sunHours: 1700 }
  },
  {
    name: "Vitoria-Gasteiz", country: "Spain", eu: true, inland: true,
    lat: 42.8467, lng: -2.6726,
    pop: 253000, hospital: "Hospital Universitario de Álava (Santiago / Txagorritxu)", hospitalDist: 0, hospitalNote: "University hospital. Basque healthcare system is Spain's best-funded.",
    priceMin: 2000, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€175k–€280k" },
    pros: "European Green Capital (2012), excellent urban planning and green belt, very safe, top Basque healthcare, most affordable Basque city, beautiful medieval quarter",
    cons: "Cold winters (frost common), inland plateau, less exciting than Bilbao/San Sebastián, Basque language, limited international connections",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "26–28°C", winterLow: "-1°C", snow: "Regular, ~20 days/yr", rainyDays: 120, sunHours: 1750 }
  },
  {
    name: "Barakaldo", country: "Spain", eu: true, inland: false,
    lat: 43.2957, lng: -2.9919,
    pop: 102000, hospital: "Hospital Universitario de Cruces", hospitalDist: 0, hospitalNote: "Hospital de Cruces is one of Spain's largest and best hospitals. Part of Basque healthcare network.",
    priceMin: 2200, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€190k–€300k" },
    pros: "Hospital de Cruces (one of Spain's top hospitals) on-site, cheaper than Bilbao center, Bilbao metro (15 min to center), Basque healthcare system",
    cons: "Industrial heritage area, less charming than Bilbao center, essentially a Bilbao suburb, rainy (160 days), limited own cultural identity",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "25–27°C", winterLow: "4°C", snow: "Very rare", rainyDays: 160, sunHours: 1600 }
  },
  {
    name: "Pamplona", country: "Spain", eu: true, inland: true,
    lat: 42.8125, lng: -1.6458,
    pop: 205000, hospital: "Complejo Hospitalario de Navarra / Clínica Universidad de Navarra", hospitalDist: 0, hospitalNote: "Public hospital complex plus prestigious CUN private hospital (ranked #1 in Spain). Excellent healthcare.",
    priceMin: 2200, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€195k–€310k" },
    pros: "Excellent healthcare (CUN ranked Spain's #1 hospital), very safe, compact walkable city, Camino de Santiago, strong economy, beautiful old quarter",
    cons: "Cold winters with some snow, San Fermín (Bull Run) disrupts July, inland (no coast, Basque coast 1 hr), quiet outside festivals",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "27–29°C", winterLow: "-1°C", snow: "Moderate, ~15 days/yr", rainyDays: 100, sunHours: 1800 }
  },
  {
    name: "Burgos", country: "Spain", eu: true, inland: true,
    lat: 42.3439, lng: -3.6969,
    pop: 176000, hospital: "Hospital Universitario de Burgos (HUBU)", hospitalDist: 0, hospitalNote: "Modern university hospital (opened 2012). Referral center for northern Castilla y León.",
    priceMin: 1200, priceMax: 1800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€105k–€160k" },
    pros: "One of Spain's cheapest cities, stunning Gothic cathedral (UNESCO), Camino de Santiago, modern hospital (2012), excellent grilled meats and morcilla",
    cons: "Cold winters (one of Spain's coldest, -5°C common), hot dry summers, inland, limited international connections, can feel quiet",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "-3°C", snow: "Regular, ~25 days/yr", rainyDays: 80, sunHours: 2300 }
  },
  {
    name: "Santiago de Compostela", country: "Spain", eu: true, inland: true,
    lat: 42.8782, lng: -8.5448,
    pop: 100000, hospital: "Hospital Clínico Universitario de Santiago (CHUS)", hospitalDist: 0, hospitalNote: "Major university hospital. Regional referral center for Galicia.",
    priceMin: 1600, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€145k–€225k" },
    pros: "Capital of Galicia, Camino de Santiago endpoint (UNESCO), stunning cathedral and old town, university city, excellent hospital, international airport",
    cons: "Very rainy (185 days, Spain's rainiest city), cool summers, stone architecture can feel grey, tourist crowds around cathedral, Galician language",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "23–25°C", winterLow: "3°C", snow: "Very rare", rainyDays: 185, sunHours: 1800 }
  },
  {
    name: "Ourense", country: "Spain", eu: true, inland: true,
    lat: 42.3364, lng: -7.8639,
    pop: 105000, hospital: "Complexo Hospitalario Universitario de Ourense (CHUO)", hospitalDist: 0, hospitalNote: "University hospital complex. Santiago de Compostela hospital 100 km for complex cases.",
    priceMin: 1000, priceMax: 1500,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€85k–€130k" },
    pros: "Among cheapest cities in Spain, famous thermal springs (As Burgas), AVE high-speed rail to Madrid, wine country (Ribeiro, Ribeira Sacra), Galician cuisine",
    cons: "Inland Galicia (no coast, 100 km), very hot summers for Galicia (35°C+), declining population, limited international connections, Galician language",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "31–34°C", winterLow: "1°C", snow: "Rare", rainyDays: 100, sunHours: 2100 }
  },
  // Spain — Castilla y León & Aragón
  {
    name: "Valladolid", country: "Spain", eu: true, inland: true,
    lat: 41.6523, lng: -4.7245,
    pop: 298000, hospital: "Hospital Clínico Universitario de Valladolid / Hospital Universitario Río Hortega", hospitalDist: 0, hospitalNote: "Two university hospitals. Regional referral center for Castilla y León.",
    priceMin: 1400, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€125k–€200k" },
    pros: "Very affordable, former Spanish capital, excellent Castilian Spanish (ideal for learning), strong university city, wine region (Ribera del Duero), AVE to Madrid (1 hr)",
    cons: "Extreme climate (hot summers, cold winters), inland plateau (no coast), limited international flights, can feel provincial",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "31–33°C", winterLow: "-2°C", snow: "Light, ~15 days/yr", rainyDays: 70, sunHours: 2600 }
  },
  {
    name: "Salamanca", country: "Spain", eu: true, inland: true,
    lat: 40.9688, lng: -5.6631,
    pop: 144000, hospital: "Hospital Universitario de Salamanca", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Regional referral center.",
    priceMin: 1200, priceMax: 1800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€105k–€160k" },
    pros: "UNESCO World Heritage old town, Spain's oldest university (1218), stunning Plaza Mayor, very affordable, excellent Castilian Spanish, lively student atmosphere",
    cons: "Hot summers (35°C+), cold winters, inland plateau (no coast), limited international connections, student population leaves in summer",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–33°C", winterLow: "-2°C", snow: "Light, ~10 days/yr", rainyDays: 65, sunHours: 2600 }
  },
  {
    name: "Zamora", country: "Spain", eu: true, inland: true,
    lat: 41.5033, lng: -5.7446,
    pop: 59000, hospital: "Complejo Asistencial de Zamora", hospitalDist: 0, hospitalNote: "Full-service hospital. Salamanca (92 km) and Valladolid (100 km) for complex specialties.",
    priceMin: 500, priceMax: 800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€85k–€130k" },
    pros: "One of Spain's cheapest cities, walkable center with 24 Romanesque churches (most per capita in Spain), AVE to Madrid (1 hr), excellent local cuisine, Duero river promenade, Semana Santa (International Tourist Interest)",
    cons: "Very hot dry summers (35°C+), cold winters, declining/aging population, limited public transit, no international flights, minimal expat community, very little English spoken",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "31–35°C", winterLow: "-2°C", snow: "Rare", rainyDays: 80, sunHours: 2540 }
  },
  {
    name: "León", country: "Spain", eu: true, inland: true,
    lat: 42.5987, lng: -5.5671,
    pop: 123000, hospital: "Complejo Asistencial Universitario de León (CAULE)", hospitalDist: 0, hospitalNote: "Major university hospital complex with 795 beds. Regional referral center for León province.",
    priceMin: 600, priceMax: 900,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€175k" },
    pros: "Stunning Gothic cathedral (one of Spain's finest), Camino de Santiago heritage city, very affordable, excellent Castilian Spanish, AVE to Madrid (2 hrs), bike paths along rivers, university city atmosphere",
    cons: "Cold winters (can reach -10°C, regular snow ~13 days/yr), hot dry summers, inland plateau (no coast), limited international flights, thin expat community",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "27–30°C", winterLow: "-5°C", snow: "Regular, ~13 days/yr", rainyDays: 95, sunHours: 2670 }
  },
  {
    name: "Zaragoza", country: "Spain", eu: true, inland: true,
    lat: 41.6488, lng: -0.8891,
    pop: 681000, hospital: "Hospital Universitario Miguel Servet / Hospital Clínico Universitario Lozano Blesa", hospitalDist: 0, hospitalNote: "Two major university hospitals. Regional referral center for Aragón.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "5th largest city in Spain yet very affordable, Basilica del Pilar, AVE halfway between Madrid & Barcelona (1.5 hrs each), excellent tapas scene (El Tubo), Expo 2008 riverside",
    cons: "Very hot dry summers (40°C), strong cierzo wind, can feel provincial despite size, fewer international flights, inland (no coast)",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "33–36°C", winterLow: "-1°C", snow: "Rare, light", rainyDays: 55, sunHours: 2650 }
  },

  // Catalonia & NE Spain
  {
    name: "Barcelona", country: "Spain", eu: true, inland: false,
    lat: 41.3874, lng: 2.1686,
    pop: 1620000, hospital: "Hospital Clínic / Hospital de la Santa Creu i Sant Pau", hospitalDist: 0, hospitalNote: "Multiple world-class hospitals. Arguably best healthcare in Spain. Major medical tourism destination.",
    priceMin: 4000, priceMax: 6000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€340k–€510k" },
    pros: "World-class city — culture, food, architecture (Gaudí), beach, major airport, best healthcare in Spain, huge international community, excellent public transport",
    cons: "Expensive and rising fast, overtourism, petty crime (pickpockets), Catalan independence tension, noisy, hard to find parking",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "5°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2524 }
  },
  {
    name: "Girona", country: "Spain", eu: true, inland: true,
    lat: 41.9794, lng: 2.8214,
    pop: 103000, hospital: "Hospital Universitari de Girona Dr. Josep Trueta", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Barcelona hospitals 100 km.",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€300k" },
    pros: "Medieval old town (Game of Thrones filming), excellent food scene, Ryanair hub airport, 35 min to Barcelona by AVE train, 30 min to Costa Brava beaches",
    cons: "Small city (can feel quiet), Catalan identity strong (less Spanish spoken), inland (coast 30 min), colder winters than coast",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "1°C", snow: "Rare, light", rainyDays: 70, sunHours: 2400 }
  },
  {
    name: "Tarragona", country: "Spain", eu: true, inland: false,
    lat: 41.1189, lng: 1.2445,
    pop: 132000, hospital: "Hospital Universitari Joan XXIII", hospitalDist: 0, hospitalNote: "University hospital. Barcelona hospitals 100 km for complex cases.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€160k–€250k" },
    pros: "Roman ruins (UNESCO amphitheatre), much cheaper than Barcelona, beach + history, 1 hr to Barcelona by train, golden coast beaches",
    cons: "Industrial port area detracts, smaller cultural scene, Catalan language, petrochemical industry nearby, less cosmopolitan",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "4°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2550 }
  },
  {
    name: "Sitges", country: "Spain", eu: true, inland: false,
    lat: 41.2371, lng: 1.8122,
    pop: 30000, hospital: "Hospital Sant Camil (Sant Pere de Ribes)", hospitalDist: 3, hospitalNote: "Barcelona hospitals 35 km for complex/specialist care.",
    priceMin: 3500, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€425k" },
    pros: "Charming beach town 35 min from Barcelona, LGBTQ+-friendly, vibrant cultural scene (film festival), excellent restaurants, beautiful old town",
    cons: "Expensive (Barcelona spillover), crowded in summer, limited hospital (Barcelona for serious care), parking nightmare, party tourism",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "5°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2500 }
  },
  {
    name: "Lloret de Mar", country: "Spain", eu: true, inland: false,
    lat: 41.7000, lng: 2.8453,
    pop: 40000, hospital: "Hospital de Blanes", hospitalDist: 6, hospitalNote: "Girona hospital (35 km) and Barcelona hospitals (75 km) for specialists.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€155k–€240k" },
    pros: "Affordable Costa Brava, good beaches, 30 min to Girona airport, growing year-round community, good value for the region",
    cons: "Party tourism reputation (improving), hospital 6 km, very touristy in summer, quieter off-season, less charming than other Costa Brava towns",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "3°C", snow: "Very rare", rainyDays: 65, sunHours: 2450 }
  },
  {
    name: "Figueres", country: "Spain", eu: true, inland: true,
    lat: 42.2666, lng: 2.9617,
    pop: 47000, hospital: "Hospital de Figueres", hospitalDist: 0, hospitalNote: "Girona university hospital (40 km). French hospitals (Perpignan, 55 km) also accessible.",
    priceMin: 1400, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€125k–€200k" },
    pros: "Dalí Theatre-Museum, very affordable, 20 min to Costa Brava beaches, near French border (Perpignan 55 km), AVE train station",
    cons: "Small inland town, quiet off-season, Catalan language, tramuntana wind (strong northerly), limited cultural life beyond Dalí",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "1°C", snow: "Rare", rainyDays: 65, sunHours: 2400 }
  },
  {
    name: "Roses", country: "Spain", eu: true, inland: false,
    lat: 42.2596, lng: 3.1768,
    pop: 20000, hospital: "Hospital de Figueres", hospitalDist: 18, hospitalNote: "Girona university hospital (55 km). French Perpignan (70 km).",
    priceMin: 2200, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€185k–€270k" },
    pros: "Beautiful Costa Brava bay, near Cap de Creus natural park, historically home to elBulli restaurant, established French/Northern European retiree community",
    cons: "Hospital 18 km away, quiet in winter, tramuntana wind, Catalan language, limited public transport",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "3°C", snow: "Very rare", rainyDays: 60, sunHours: 2450 }
  },
  {
    name: "Vic", country: "Spain", eu: true, inland: true,
    lat: 41.8863, lng: 2.2549,
    pop: 46000, hospital: "Hospital Universitari de Vic", hospitalDist: 0, hospitalNote: "Barcelona hospitals (70 km) for complex cases.",
    priceMin: 1400, priceMax: 2000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€125k–€180k" },
    pros: "Charming medieval town, famous plaça Major, excellent local food/markets (embotits), very affordable, 1 hr to Barcelona, 1 hr to Pyrenees",
    cons: "Inland (no coast), cold foggy winters (famous for boira fog), small town, Catalan-dominant, limited international feel",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "-1°C", snow: "Occasional light", rainyDays: 75, sunHours: 2300 }
  },
  {
    name: "L'Hospitalet de Llobregat", country: "Spain", eu: true, inland: false,
    lat: 41.3596, lng: 2.0997,
    pop: 274000, hospital: "Hospital Universitari de Bellvitge", hospitalDist: 0, hospitalNote: "Major university hospital. Barcelona Hospital Clínic 10 km.",
    priceMin: 2800, priceMax: 4200,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€240k–€360k" },
    pros: "20–30% cheaper than Barcelona, excellent metro connections (L1, L9), Bellvitge university hospital on-site, adjacent to BCN airport, cosmopolitan",
    cons: "Dense urban area, less charming than Barcelona center, some neighborhoods need improvement, essentially a Barcelona suburb, limited green space",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "5°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2524 }
  },
  {
    name: "Badalona", country: "Spain", eu: true, inland: false,
    lat: 41.4502, lng: 2.2474,
    pop: 224000, hospital: "Hospital Germans Trias i Pujol (Can Ruti)", hospitalDist: 0, hospitalNote: "Major university hospital. Barcelona hospitals also 10 km.",
    priceMin: 2500, priceMax: 3800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€215k–€325k" },
    pros: "Beach city adjacent to Barcelona, 20–30% cheaper than BCN center, metro L2 direct to Barcelona, major university hospital (Can Ruti), 5 km of beaches",
    cons: "Some areas feel run-down, less charming than Barcelona center, industrial port area, petty crime in some neighborhoods, feels like a BCN suburb",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "5°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2524 }
  },
  {
    name: "Terrassa", country: "Spain", eu: true, inland: true,
    lat: 41.5630, lng: 2.0089,
    pop: 225000, hospital: "Hospital Universitari MútuaTerrassa / Hospital de Terrassa", hospitalDist: 0, hospitalNote: "Two hospitals in city. Barcelona hospitals 30 km.",
    priceMin: 2200, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€190k–€300k" },
    pros: "30–40% cheaper than Barcelona, own hospitals, FGC train to Barcelona (40 min), Romanesque churches (UNESCO), more spacious living than BCN",
    cons: "Not on coast (30 km to beach), industrial character, hot summers, less vibrant than Barcelona, suburban feel",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "2°C", snow: "Very rare", rainyDays: 60, sunHours: 2450 }
  },
  {
    name: "Sabadell", country: "Spain", eu: true, inland: true,
    lat: 41.5433, lng: 2.1094,
    pop: 220000, hospital: "Hospital de Sabadell (Parc Taulí)", hospitalDist: 0, hospitalNote: "Parc Taulí is a well-regarded university hospital. Barcelona hospitals 25 km.",
    priceMin: 2000, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€175k–€280k" },
    pros: "35% cheaper than Barcelona, well-regarded hospital (Parc Taulí), Rodalies train to Barcelona (35 min), own cultural life, more relaxed pace",
    cons: "Inland (no beach), industrial character, less cosmopolitan than BCN, suburban feel, hot summers",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "2°C", snow: "Very rare", rainyDays: 60, sunHours: 2450 }
  },
  {
    name: "Santa Coloma de Gramenet", country: "Spain", eu: true, inland: false,
    lat: 41.4516, lng: 2.2085,
    pop: 120000, hospital: "Hospital de l'Esperit Sant", hospitalDist: 0, hospitalNote: "General hospital. Barcelona hospitals 5 km. Hospital Germans Trias (Badalona) 5 km.",
    priceMin: 2200, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "75 m²", cost: "€180k–€260k" },
    pros: "Most affordable municipality adjacent to Barcelona, metro L1 to Barcelona center (15 min), urban renewal improving neighborhoods, multicultural",
    cons: "Dense and crowded, historically working-class reputation, limited green space, some neighborhoods need improvement, essentially a BCN suburb",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "29–31°C", winterLow: "5°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2524 }
  },
  {
    name: "Mataró", country: "Spain", eu: true, inland: false,
    lat: 41.5404, lng: 2.4445,
    pop: 130000, hospital: "Hospital de Mataró", hospitalDist: 0, hospitalNote: "General hospital. Barcelona hospitals 30 km for complex cases.",
    priceMin: 2200, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€190k–€275k" },
    pros: "Coastal city NE of Barcelona, 35 min by Rodalies train to BCN, Maresme coast beaches, 25–30% cheaper than Barcelona, own hospital, pleasant seafront",
    cons: "Feels like a Barcelona commuter town, limited cultural scene, beach quality mixed, less cosmopolitan, highway noise in some areas",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "28–30°C", winterLow: "4°C", snow: "Extremely rare", rainyDays: 60, sunHours: 2500 }
  },
  {
    name: "Lleida", country: "Spain", eu: true, inland: true,
    lat: 41.6176, lng: 0.6200,
    pop: 140000, hospital: "Hospital Universitari Arnau de Vilanova", hospitalDist: 0, hospitalNote: "University hospital. Barcelona hospitals 150 km for complex cases.",
    priceMin: 1200, priceMax: 1800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€100k–€160k" },
    pros: "Very affordable, AVE high-speed rail to Barcelona (1 hr) and Madrid (2.5 hrs), Seu Vella cathedral, quiet Catalan city, gateway to Pyrenees ski resorts",
    cons: "Extreme inland climate (very hot summers up to 40°C, foggy cold winters), less touristic, limited nightlife, flat agricultural surroundings, Catalan language",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "33–35°C", winterLow: "-2°C", snow: "Rare, light", rainyDays: 50, sunHours: 2650 }
  },
  {
    name: "Reus", country: "Spain", eu: true, inland: true,
    lat: 41.1548, lng: 1.1087,
    pop: 107000, hospital: "Hospital Universitari Sant Joan de Reus", hospitalDist: 0, hospitalNote: "University hospital. Tarragona Hospital Joan XXIII 15 km.",
    priceMin: 1600, priceMax: 2400,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€140k–€210k" },
    pros: "Cheaper than nearby Tarragona, Reus Airport (Ryanair hub), birthplace of Gaudí, Modernista architecture, wine country (Priorat nearby), 10 km to beaches",
    cons: "Overshadowed by Tarragona, inland (coast 10 km), petrochemical industry nearby, less charming, hot summers",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–32°C", winterLow: "3°C", snow: "Extremely rare", rainyDays: 55, sunHours: 2550 }
  },
  {
    name: "Manresa", country: "Spain", eu: true, inland: true,
    lat: 41.7251, lng: 1.8267,
    pop: 80000, hospital: "Hospital Sant Joan de Déu (Fundació Althaia)", hospitalDist: 0, hospitalNote: "Reference hospital for Central Catalonia with 402 beds and full specialties. Barcelona hospitals 65 km.",
    priceMin: 800, priceMax: 1100,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€195k" },
    pros: "Affordable alternative to Barcelona, FGC/Rodalies trains to Barcelona (75–90 min), near Montserrat monastery, reference hospital for Central Catalonia, medieval history, Passeig de Pere III promenade",
    cons: "Catalan language dominant, inland with no coast (65 km to Barcelona beaches), limited nightlife, can feel provincial, hot summers, hilly terrain in parts",
    visa: "EU member. Automatic right to reside. Register at ayuntamiento. NIE required. Full EU healthcare.",
    climate: { summerHigh: "30–33°C", winterLow: "1°C", snow: "Very rare", rainyDays: 72, sunHours: 2500 }
  },

  // ===================== CZECHIA =====================
  {
    name: "Prague", country: "Czechia", eu: true, inland: true,
    lat: 50.0755, lng: 14.4378,
    pop: 1310000, hospital: "Motol University Hospital / VFN", hospitalDist: 0, hospitalNote: "Multiple world-class hospitals. Best healthcare in Central Europe.",
    priceMin: 3500, priceMax: 5500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€470k" },
    pros: "One of Europe's most beautiful cities, excellent healthcare system, rich cultural life (opera, galleries), central location, very safe, beer culture, good public transport",
    cons: "Overtourism in center, prices rising fast (approaching Western EU), cold winters, Czech bureaucracy, language barrier (Czech hard to learn)",
    visa: "EU member. Register at Foreign Police. Full EU healthcare. Need residence certificate for stays over 3 months.",
    climate: { summerHigh: "24–26°C", winterLow: "-4°C", snow: "Yes, ~40 days/yr", rainyDays: 100, sunHours: 1700 }
  },
  {
    name: "Brno", country: "Czechia", eu: true, inland: true,
    lat: 49.1951, lng: 16.6068,
    pop: 380000, hospital: "St. Anne's University Hospital / FN Brno", hospitalDist: 0, hospitalNote: "Two major university hospitals. Excellent specialties.",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€300k" },
    pros: "2nd city, tech hub (\"Czech Silicon Valley\"), excellent healthcare, much cheaper than Prague, vibrant café culture, Moravian wines, young energy",
    cons: "Cold winters, less tourist infrastructure than Prague, language barrier, less international, industrial outskirts",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "26–28°C", winterLow: "-4°C", snow: "Yes, ~30 days/yr", rainyDays: 100, sunHours: 1800 }
  },
  {
    name: "Olomouc", country: "Czechia", eu: true, inland: true,
    lat: 49.5938, lng: 17.2509,
    pop: 100000, hospital: "Olomouc University Hospital (FNOL)", hospitalDist: 0, hospitalNote: "Major university hospital with all specialties.",
    priceMin: 1800, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€155k–€210k" },
    pros: "\"Miniature Prague\" without the tourists, UNESCO Holy Trinity Column, university hospital, very affordable, charming squares, Moravian cheese (tvarůžky)",
    cons: "Cold winters, smaller city, limited international connections, language barrier, far from Western Europe",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "25–27°C", winterLow: "-5°C", snow: "Yes, ~35 days/yr", rainyDays: 95, sunHours: 1700 }
  },
  {
    name: "Karlovy Vary", country: "Czechia", eu: true, inland: true,
    lat: 50.2327, lng: 12.8714,
    pop: 48000, hospital: "Karlovy Vary Hospital", hospitalDist: 0, hospitalNote: "Prague Motol for complex cases (130 km).",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€210k" },
    pros: "Famous spa town, historic Russian-speaking community (relevant for your mother), beautiful colonnades, therapeutic thermal waters, affordable, film festival",
    cons: "Declining population, cold winters, limited amenities beyond spa tourism, smaller hospital, remote feeling",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "23–25°C", winterLow: "-5°C", snow: "Yes, ~45 days/yr", rainyDays: 105, sunHours: 1550 }
  },
  {
    name: "České Budějovice", country: "Czechia", eu: true, inland: true,
    lat: 48.9745, lng: 14.4742,
    pop: 94000, hospital: "České Budějovice Hospital", hospitalDist: 0, hospitalNote: "Full-service regional hospital. Prague 150 km for specialists.",
    priceMin: 2000, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€170k–€240k" },
    pros: "Original Budweiser beer city, charming main square (largest in Czechia), gateway to Šumava & Český Krumlov, affordable, good hospital",
    cons: "Cold winters, limited international connections, smaller city, language barrier, feels provincial",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "25–27°C", winterLow: "-5°C", snow: "Yes, ~35 days/yr", rainyDays: 105, sunHours: 1700 }
  },

  // ===================== POLAND =====================
  {
    name: "Warsaw", country: "Poland", eu: true, inland: true,
    lat: 52.2297, lng: 21.0122,
    pop: 1790000, hospital: "Multiple hospitals (CSK MSWiA, WIM, Banacha)", hospitalDist: 0, hospitalNote: "Multiple world-class hospitals. Best healthcare in Poland.",
    priceMin: 3000, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€255k–€425k" },
    pros: "Dynamic capital, excellent healthcare, rapidly improving, good international connections, growing tech/startup scene, vibrant cultural life, excellent public transport",
    cons: "Cold harsh winters, WWII destruction means less historic charm, traffic, bureaucracy, language barrier, can feel grey in winter",
    visa: "EU member. Register at local voivodeship office. PESEL number needed. Full EU healthcare (NFZ system).",
    climate: { summerHigh: "24–26°C", winterLow: "-5°C", snow: "Yes, ~50 days/yr", rainyDays: 100, sunHours: 1600 }
  },
  {
    name: "Kraków", country: "Poland", eu: true, inland: true,
    lat: 50.0647, lng: 19.9450,
    pop: 800000, hospital: "University Hospital / Żeromski Hospital", hospitalDist: 0, hospitalNote: "Multiple university hospitals. Excellent specialists.",
    priceMin: 2500, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€340k" },
    pros: "Beautiful medieval old town (UNESCO), rich Jewish heritage, excellent food scene, major international airport, growing expat community, vibrant culture",
    cons: "Air pollution/smog (notorious in winter), cold winters, tourist crowds in center, rising prices",
    visa: "EU member. Register at local voivodeship office. PESEL needed. Full EU healthcare (NFZ).",
    climate: { summerHigh: "25–27°C", winterLow: "-5°C", snow: "Yes, ~50 days/yr", rainyDays: 100, sunHours: 1600 }
  },
  {
    name: "Gdańsk", country: "Poland", eu: true, inland: false,
    lat: 54.3520, lng: 18.6466,
    pop: 470000, hospital: "Medical University of Gdańsk Hospital", hospitalDist: 0, hospitalNote: "Major university hospital. Part of Tri-City metro (Gdańsk/Sopot/Gdynia, 750k combined).",
    priceMin: 2200, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€185k–€300k" },
    pros: "Beautiful Hanseatic port city, Baltic beaches, Tri-City metro offers full amenities, growing tech hub, amber coast, good airport, ferry to Scandinavia",
    cons: "Cold Baltic winters, cool summers (21–23°C), grey and dark in winter, tourism in old town, wind from sea",
    visa: "EU member. Register at local voivodeship office. PESEL needed. Full EU healthcare (NFZ).",
    climate: { summerHigh: "21–23°C", winterLow: "-3°C", snow: "Yes, ~40 days/yr", rainyDays: 100, sunHours: 1600 }
  },
  {
    name: "Wrocław", country: "Poland", eu: true, inland: true,
    lat: 51.1079, lng: 17.0385,
    pop: 640000, hospital: "Wrocław University Hospital", hospitalDist: 0, hospitalNote: "University hospital with all specialties.",
    priceMin: 2000, priceMax: 3200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€170k–€270k" },
    pros: "\"Venice of Poland\" (12 islands, 100+ bridges), vibrant university city, affordable, growing tech scene, charming dwarfs statues, excellent food",
    cons: "Cold winters, flooding risk (Oder river), not on coast, limited direct international flights, language barrier",
    visa: "EU member. Register at local voivodeship office. PESEL needed. Full EU healthcare (NFZ).",
    climate: { summerHigh: "25–27°C", winterLow: "-4°C", snow: "Yes, ~35 days/yr", rainyDays: 100, sunHours: 1600 }
  },
  {
    name: "Poznań", country: "Poland", eu: true, inland: true,
    lat: 52.4064, lng: 16.9252,
    pop: 535000, hospital: "Heliodor Święcicki University Hospital", hospitalDist: 0, hospitalNote: "University hospital. Full specialties.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€155k–€240k" },
    pros: "Excellent value, colorful old town square, university city, good rail connections (Berlin 2.5 hrs), business hub, St. Martin's croissants",
    cons: "Cold winters, less touristic (can be pro), language barrier, not on coast, smaller international community than Warsaw/Kraków",
    visa: "EU member. Register at local voivodeship office. PESEL needed. Full EU healthcare (NFZ).",
    climate: { summerHigh: "24–26°C", winterLow: "-4°C", snow: "Yes, ~35 days/yr", rainyDays: 90, sunHours: 1600 }
  },
  {
    name: "Sopot", country: "Poland", eu: true, inland: false,
    lat: 54.4418, lng: 18.5601,
    pop: 37000, hospital: "Medical University of Gdańsk Hospital", hospitalDist: 15, hospitalNote: "Gdańsk university hospital (15 km). Part of Tri-City transit.",
    priceMin: 3000, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€240k–€400k" },
    pros: "Poland's most elegant beach resort, longest wooden pier in Europe (515 m), Tri-City transit (urban amenities), charming villas, spa culture",
    cons: "Expensive for Poland, very seasonal, cool summers, hospital 15 km (Gdańsk), quiet in winter, parking nightmare in summer",
    visa: "EU member. Register at local voivodeship office. PESEL needed. Full EU healthcare (NFZ).",
    climate: { summerHigh: "21–23°C", winterLow: "-2°C", snow: "Yes, ~35 days/yr", rainyDays: 95, sunHours: 1600 }
  },

  // ===================== SLOVAKIA =====================
  {
    name: "Bratislava", country: "Slovakia", eu: true, inland: true,
    lat: 48.1486, lng: 17.1077,
    pop: 475000, hospital: "University Hospital Bratislava", hospitalDist: 0, hospitalNote: "Multiple hospitals. Also Vienna hospitals accessible (60 km).",
    priceMin: 3000, priceMax: 4500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€255k–€380k" },
    pros: "1 hour from Vienna by train, Danube setting, growing rapidly, good healthcare, cheapest capital near Vienna, castle views, EU/Schengen",
    cons: "Small capital feel, less charming than Prague or Budapest, cold winters, limited cultural scene compared to larger capitals",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "27–30°C", winterLow: "-3°C", snow: "Yes, ~30 days/yr", rainyDays: 95, sunHours: 2000 }
  },
  {
    name: "Košice", country: "Slovakia", eu: true, inland: true,
    lat: 48.7164, lng: 21.2611,
    pop: 240000, hospital: "L. Pasteur University Hospital", hospitalDist: 0, hospitalNote: "University hospital with all specialties. 2nd best in Slovakia.",
    priceMin: 1800, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€155k–€210k" },
    pros: "2nd city, European Capital of Culture 2013, excellent value, charming main street (Hlavná), good university hospital, near High Tatras",
    cons: "Remote eastern Slovakia, limited international connections (small airport), cold winters, language barrier, some depopulation",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "26–28°C", winterLow: "-5°C", snow: "Yes, ~40 days/yr", rainyDays: 100, sunHours: 1900 }
  },
  {
    name: "Banská Bystrica", country: "Slovakia", eu: true, inland: true,
    lat: 48.7395, lng: 19.1532,
    pop: 78000, hospital: "F.D. Roosevelt University Hospital", hospitalDist: 0, hospitalNote: "University hospital. Good regional coverage.",
    priceMin: 1500, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€185k" },
    pros: "Heart of Slovakia, surrounded by Low Tatras mountains, affordable, good hospital, SNP history, clean air, excellent hiking",
    cons: "Remote mountain location, cold winters (-7°C possible), small city, very limited English, no coast, limited flights",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "25–27°C", winterLow: "-7°C", snow: "Yes, ~50 days/yr", rainyDays: 100, sunHours: 1800 }
  },
  {
    name: "Nitra", country: "Slovakia", eu: true, inland: true,
    lat: 48.3069, lng: 18.0864,
    pop: 77000, hospital: "Nitra Teaching Hospital", hospitalDist: 0, hospitalNote: "Teaching hospital. Bratislava hospitals 90 km.",
    priceMin: 1600, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€135k–€185k" },
    pros: "Oldest city in Slovakia (828 AD), wine region (Tokaj nearby), affordable, warmest in Slovakia, near Bratislava (90 km), university town",
    cons: "Small city, limited international connections, language barrier, less touristic infrastructure, not much English spoken",
    visa: "EU member. Register at Foreign Police. Full EU healthcare.",
    climate: { summerHigh: "27–29°C", winterLow: "-4°C", snow: "Yes, ~25 days/yr", rainyDays: 85, sunHours: 2000 }
  },

  // ===================== HUNGARY =====================
  {
    name: "Budapest", country: "Hungary", eu: true, inland: true,
    lat: 47.4979, lng: 19.0402,
    pop: 1750000, hospital: "Semmelweis University Hospitals", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Medical tourism destination. Dental tourism capital of Europe.",
    priceMin: 2500, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€210k–€340k" },
    pros: "Stunning city (Danube, Parliament, thermal baths), excellent medical/dental tourism, affordable, rich cultural life, great food, ruin bars, good international connections",
    cons: "Rising authoritarianism concerns, hot summers, cold winters, traffic and pollution, Hungarian language extremely hard, Forint currency (not Euro)",
    visa: "EU member. Register at immigration office. Full EU healthcare. Note: Hungary uses Forint, not Euro.",
    climate: { summerHigh: "28–31°C", winterLow: "-3°C", snow: "Yes, ~20 days/yr", rainyDays: 80, sunHours: 2050 }
  },
  {
    name: "Pécs", country: "Hungary", eu: true, inland: true,
    lat: 46.0727, lng: 18.2323,
    pop: 145000, hospital: "Pécs University Hospital", hospitalDist: 0, hospitalNote: "Major university hospital. Medical school teaches in English.",
    priceMin: 1200, priceMax: 1800,
    housing: { type: "3-bed house", size: "100 m²", cost: "€100k–€155k" },
    pros: "Mediterranean feel (warmest Hungarian city), European Capital of Culture 2010, university hospital (English-speaking medical school!), Turkish heritage, very affordable",
    cons: "Remote southern Hungary, limited international flights, language barrier, Forint currency, smaller city",
    visa: "EU member. Register at immigration office. Full EU healthcare. Forint, not Euro.",
    climate: { summerHigh: "28–30°C", winterLow: "-2°C", snow: "Light, ~15 days/yr", rainyDays: 75, sunHours: 2100 }
  },
  {
    name: "Debrecen", country: "Hungary", eu: true, inland: true,
    lat: 47.5316, lng: 21.6273,
    pop: 203000, hospital: "Debrecen University Hospital", hospitalDist: 0, hospitalNote: "Major university hospital. International medical school (English programs).",
    priceMin: 1400, priceMax: 2200,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€120k–€185k" },
    pros: "2nd city, excellent university hospital (international), thermal baths, Hortobágy National Park (UNESCO), airport, affordable",
    cons: "Flat Great Plain landscape, cold winters, far from Vienna/Western Europe, language barrier, Forint currency, limited cultural variety",
    visa: "EU member. Register at immigration office. Full EU healthcare. Forint, not Euro.",
    climate: { summerHigh: "28–30°C", winterLow: "-5°C", snow: "Yes, ~25 days/yr", rainyDays: 80, sunHours: 2000 }
  },
  {
    name: "Szeged", country: "Hungary", eu: true, inland: true,
    lat: 46.2530, lng: 20.1414,
    pop: 160000, hospital: "Szeged University Hospital", hospitalDist: 0, hospitalNote: "University hospital. English-speaking medical faculty.",
    priceMin: 1200, priceMax: 1800,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€100k–€155k" },
    pros: "\"City of Sunshine\" (sunniest in Hungary, 2,100 hrs), excellent university hospital, art nouveau architecture, near Serbian border, thermal baths, very affordable",
    cons: "Remote, flat, language barrier, near Serbian border (not always seen as plus), Forint currency, limited international flights",
    visa: "EU member. Register at immigration office. Full EU healthcare. Forint, not Euro.",
    climate: { summerHigh: "28–31°C", winterLow: "-3°C", snow: "Light, ~15 days/yr", rainyDays: 70, sunHours: 2100 }
  },
  {
    name: "Eger", country: "Hungary", eu: true, inland: true,
    lat: 47.9025, lng: 20.3772,
    pop: 55000, hospital: "Markhot Ferenc Hospital", hospitalDist: 0, hospitalNote: "Regional hospital. Budapest for specialists (130 km).",
    priceMin: 1000, priceMax: 1500,
    housing: { type: "3-bed house", size: "100 m²", cost: "€85k–€130k" },
    pros: "Famous wine region (Egri Bikavér/Bull's Blood), stunning baroque old town, thermal baths, castle, ultra-affordable, very charming",
    cons: "Small town, hospital smaller (Budapest 130 km for specialists), cold winters, limited English, far from airports, Forint currency",
    visa: "EU member. Register at immigration office. Full EU healthcare. Forint, not Euro.",
    climate: { summerHigh: "28–30°C", winterLow: "-4°C", snow: "Yes, ~25 days/yr", rainyDays: 75, sunHours: 1950 }
  },

  // ===================== SERBIA =====================
  {
    name: "Belgrade", country: "Serbia", eu: false, inland: true,
    lat: 44.7866, lng: 20.4489,
    pop: 1400000, hospital: "Military Medical Academy / Clinical Center Serbia", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Best healthcare in Serbia. Growing medical tourism.",
    priceMin: 2000, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€170k–€300k" },
    pros: "Vibrant nightlife capital of Europe, confluence of Danube/Sava, affordable, emerging tech scene, excellent food, warm people, Novi Beograd modern district",
    cons: "Not EU (candidate), air pollution, post-conflict reputation fading but lingers, chaotic traffic, political instability risk, Serbian Dinar currency",
    visa: "Not EU (candidate). EU citizens: 90 days visa-free. Property purchase straightforward. No minimum investment for EU citizens.",
    climate: { summerHigh: "28–31°C", winterLow: "-2°C", snow: "Yes, ~25 days/yr", rainyDays: 95, sunHours: 2100 }
  },
  {
    name: "Novi Sad", country: "Serbia", eu: false, inland: true,
    lat: 45.2671, lng: 19.8335,
    pop: 290000, hospital: "Clinical Center Vojvodina", hospitalDist: 0, hospitalNote: "Major regional hospital. Belgrade hospitals accessible (80 km).",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€210k" },
    pros: "European Capital of Culture 2022, EXIT Festival, Danube setting, Petrovaradin Fortress, growing cultural scene, quieter than Belgrade, affordable",
    cons: "Not EU, cold winters, limited international flights, language barrier, smaller city, Serbian Dinar",
    visa: "Not EU (candidate). EU citizens: 90 days visa-free. Property purchase straightforward.",
    climate: { summerHigh: "27–30°C", winterLow: "-3°C", snow: "Yes, ~25 days/yr", rainyDays: 85, sunHours: 2100 }
  },
  {
    name: "Niš", country: "Serbia", eu: false, inland: true,
    lat: 43.3209, lng: 21.8954,
    pop: 185000, hospital: "Clinical Center Niš", hospitalDist: 0, hospitalNote: "Major regional hospital with most specialties.",
    priceMin: 800, priceMax: 1400,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€70k–€120k" },
    pros: "Ultra-affordable, warm southern Serbia, Constantine the Great birthplace, Niška Banja thermal spa, university hospital, Ryanair/Wizz Air hub",
    cons: "Not EU, limited infrastructure, language barrier, less developed, limited international community, Serbian Dinar",
    visa: "Not EU (candidate). EU citizens: 90 days visa-free. Property purchase straightforward.",
    climate: { summerHigh: "29–31°C", winterLow: "-2°C", snow: "Yes, ~20 days/yr", rainyDays: 80, sunHours: 2150 }
  },
  {
    name: "Subotica", country: "Serbia", eu: false, inland: true,
    lat: 46.1003, lng: 19.6659,
    pop: 100000, hospital: "Subotica General Hospital", hospitalDist: 0, hospitalNote: "Regional hospital. Belgrade/Novi Sad for complex cases. Hungarian Szeged (30 km) also accessible.",
    priceMin: 800, priceMax: 1300,
    housing: { type: "3-bed house", size: "110 m²", cost: "€70k–€110k" },
    pros: "Art nouveau gem, multicultural (Serbian/Hungarian/Croatian), near Hungarian EU border (Szeged 30 km), Palić Lake resort, very affordable",
    cons: "Not EU (but near border), remote, limited healthcare for serious cases, depopulation trend, language complexity, Serbian Dinar",
    visa: "Not EU (candidate). EU citizens: 90 days visa-free. Property purchase straightforward.",
    climate: { summerHigh: "27–29°C", winterLow: "-3°C", snow: "Yes, ~25 days/yr", rainyDays: 80, sunHours: 2050 }
  },

  // ===================== BULGARIA =====================
  {
    name: "Sofia", country: "Bulgaria", eu: true, inland: true,
    lat: 42.6977, lng: 23.3219,
    pop: 1300000, hospital: "Pirogov Emergency Hospital / Alexandrovska University Hospital", hospitalDist: 0, hospitalNote: "Multiple hospitals. Best healthcare in Bulgaria. Growing private hospital sector.",
    priceMin: 1500, priceMax: 2500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€130k–€210k" },
    pros: "EU member, very affordable, surrounded by Vitosha mountain, improving infrastructure, growing expat community, thermal springs, ski resort 70 km, good public transport",
    cons: "Air pollution, bureaucracy, healthcare variable quality, Cyrillic alphabet barrier, lower infrastructure quality than Western EU, not on coast",
    visa: "EU member. Register at migration office. Full EU healthcare. Note: Bulgaria uses Lev, not Euro (Euro adoption planned ~2026).",
    climate: { summerHigh: "27–30°C", winterLow: "-4°C", snow: "Yes, ~30 days/yr", rainyDays: 95, sunHours: 2100 }
  },
  {
    name: "Plovdiv", country: "Bulgaria", eu: true, inland: true,
    lat: 42.1354, lng: 24.7453,
    pop: 340000, hospital: "St. George University Hospital", hospitalDist: 0, hospitalNote: "University hospital. Sofia for complex cases (140 km).",
    priceMin: 800, priceMax: 1400,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€70k–€125k" },
    pros: "European Capital of Culture 2019, Roman amphitheater, colorful old town, very affordable EU, warmer than Sofia, oldest continuously inhabited European city claim, growing arts scene",
    cons: "Hot summers (33°C), healthcare variable, limited English, Cyrillic barrier, air quality issues, lower infrastructure quality",
    visa: "EU member. Register at migration office. Full EU healthcare. Lev currency (Euro planned ~2026).",
    climate: { summerHigh: "30–33°C", winterLow: "-2°C", snow: "Light, ~15 days/yr", rainyDays: 75, sunHours: 2200 }
  },
  {
    name: "Varna", country: "Bulgaria", eu: true, inland: false,
    lat: 43.2141, lng: 27.9147,
    pop: 335000, hospital: "St. Marina University Hospital", hospitalDist: 0, hospitalNote: "Major university hospital. Best healthcare on Bulgarian coast.",
    priceMin: 1000, priceMax: 1800,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€90k–€160k" },
    pros: "\"Sea capital\" of Bulgaria, Black Sea beaches, EU, good university hospital, Sea Garden park, international airport, Russian-speaking community",
    cons: "Cold Black Sea winters, lower infrastructure than Western EU, limited English, Bulgarian bureaucracy, Cyrillic, less Mediterranean feel",
    visa: "EU member. Register at migration office. Full EU healthcare. Lev currency (Euro planned ~2026).",
    climate: { summerHigh: "27–30°C", winterLow: "-1°C", snow: "Light, ~10 days/yr", rainyDays: 75, sunHours: 2300 }
  },
  {
    name: "Burgas", country: "Bulgaria", eu: true, inland: false,
    lat: 42.5048, lng: 27.4626,
    pop: 210000, hospital: "Burgas University Hospital", hospitalDist: 0, hospitalNote: "Regional hospital. Varna university hospital (130 km) for complex cases.",
    priceMin: 700, priceMax: 1200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€60k–€110k" },
    pros: "Cheapest EU coastal city on the map, Black Sea beach, airport, Sea Garden, real working city (not just tourism), sunny (2,400 hrs)",
    cons: "Lower infrastructure quality, limited English, healthcare below Western EU standards, Cyrillic, less attractive center, Lev currency",
    visa: "EU member. Register at migration office. Full EU healthcare. Lev currency (Euro planned ~2026).",
    climate: { summerHigh: "27–30°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 70, sunHours: 2400 }
  },
  {
    name: "Veliko Tarnovo", country: "Bulgaria", eu: true, inland: true,
    lat: 43.0757, lng: 25.6172,
    pop: 70000, hospital: "Veliko Tarnovo Hospital", hospitalDist: 0, hospitalNote: "Regional hospital. Sofia/Plovdiv for complex cases.",
    priceMin: 500, priceMax: 900,
    housing: { type: "3-bed house", size: "110 m²", cost: "€45k–€80k" },
    pros: "Former medieval capital, Tsarevets Fortress stunning, cheapest EU option on the entire map, university town, dramatic hilltop setting, growing expat scene",
    cons: "Small town, limited healthcare for specialists, cold winters, poor infrastructure, Cyrillic barrier, remote, Lev currency",
    visa: "EU member. Register at migration office. Full EU healthcare. Lev currency (Euro planned ~2026).",
    climate: { summerHigh: "28–30°C", winterLow: "-3°C", snow: "Yes, ~25 days/yr", rainyDays: 90, sunHours: 2100 }
  },

  // ===================== ESTONIA =====================
  {
    name: "Tallinn", country: "Estonia", eu: true, inland: false,
    lat: 59.4370, lng: 24.7536,
    pop: 450000, hospital: "North Estonia Medical Centre (PERH) / East Tallinn Central Hospital", hospitalDist: 0, hospitalNote: "Multiple major hospitals. Best healthcare in the Baltics. Digital health records system.",
    priceMin: 3000, priceMax: 4500,
    housing: { type: "3-bed apartment", size: "75 m²", cost: "€225k–€340k" },
    pros: "World's most digital society (e-governance, e-residency), UNESCO medieval old town, safe, EU/Eurozone, excellent digital infrastructure, ferry to Helsinki (2 hrs), large Russian-speaking community",
    cons: "Very cold dark winters (-7°C, only 6 hrs daylight Dec), cool short summers, high prices for Baltics, small market, limited sunshine, Russia proximity concern",
    visa: "EU member. Register at Police & Border Guard Board. Full EU healthcare. Digital ID system. Euro currency.",
    climate: { summerHigh: "20–22°C", winterLow: "-7°C", snow: "Yes, ~60 days/yr", rainyDays: 110, sunHours: 1800 }
  },
  {
    name: "Tartu", country: "Estonia", eu: true, inland: true,
    lat: 58.3780, lng: 26.7290,
    pop: 97000, hospital: "Tartu University Hospital", hospitalDist: 0, hospitalNote: "University hospital. Best for research/specialists in Estonia.",
    priceMin: 2000, priceMax: 3000,
    housing: { type: "3-bed apartment", size: "75 m²", cost: "€150k–€225k" },
    pros: "European Capital of Culture 2024, university town (Estonia's oldest), excellent hospital, intellectual atmosphere, green and walkable, affordable, Estonian-speaking heartland",
    cons: "Very cold winters (-8°C), small city, remote, limited international flights (small airport), very dark winters, Russia border 50 km",
    visa: "EU member. Register at Police & Border Guard Board. Full EU healthcare. Digital ID. Euro.",
    climate: { summerHigh: "21–23°C", winterLow: "-8°C", snow: "Yes, ~70 days/yr", rainyDays: 100, sunHours: 1700 }
  },
  {
    name: "Pärnu", country: "Estonia", eu: true, inland: false,
    lat: 58.3859, lng: 24.4971,
    pop: 51000, hospital: "Pärnu Hospital", hospitalDist: 0, hospitalNote: "Regional hospital. Tallinn (130 km) or Tartu (180 km) for complex cases.",
    priceMin: 1800, priceMax: 2800,
    housing: { type: "3-bed apartment", size: "75 m²", cost: "€135k–€210k" },
    pros: "\"Summer capital\" of Estonia, beach resort, spa tradition, quiet and charming, good quality of life, Russian and Estonian communities, affordable",
    cons: "Very cold winters, seasonal (quiet in winter), small town, limited specialist healthcare, dark winters, remote",
    visa: "EU member. Register at Police & Border Guard Board. Full EU healthcare. Digital ID. Euro.",
    climate: { summerHigh: "21–23°C", winterLow: "-7°C", snow: "Yes, ~60 days/yr", rainyDays: 100, sunHours: 1800 }
  },
  {
    name: "Haapsalu", country: "Estonia", eu: true, inland: false,
    lat: 58.9431, lng: 23.5411,
    pop: 10000, hospital: "Pärnu Hospital", hospitalDist: 50, hospitalNote: "Tallinn (100 km) for most care. Local health center only.",
    priceMin: 1200, priceMax: 2000,
    housing: { type: "3-bed house", size: "100 m²", cost: "€100k–€170k" },
    pros: "Charming seaside spa town, Tchaikovsky bench, castle ruins, affordable, peaceful, Swedish-influenced history, mud spa tradition",
    cons: "Very small and remote, no local hospital (Tallinn/Pärnu), extremely cold winters, dead quiet off-season, limited amenities",
    visa: "EU member. Register at Police & Border Guard Board. Full EU healthcare. Digital ID. Euro.",
    climate: { summerHigh: "20–22°C", winterLow: "-7°C", snow: "Yes, ~55 days/yr", rainyDays: 100, sunHours: 1750 }
  },
  // ===================== BELGIUM =====================
  {
    name: "Brussels", country: "Belgium", eu: true, inland: true,
    lat: 50.8503, lng: 4.3517,
    pop: 1210000, hospital: "UZ Brussel / Cliniques Universitaires Saint-Luc", hospitalDist: 0, hospitalNote: "Multiple world-class hospitals. EU institutions ensure top-tier healthcare access.",
    priceMin: 3200, priceMax: 4800,
    housing: { type: "3-bed apartment", size: "100 m²", cost: "€320k–€480k" },
    pros: "EU capital, multilingual (French/Dutch/English), excellent public transport, world-class museums, diverse food scene, central European location",
    cons: "Higher crime in some areas, complex governance, grey/rainy weather, traffic congestion, bureaucratic",
    visa: "EU member. Register at commune within 3 months. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "0°C", snow: "Light, ~15 days/yr", rainyDays: 200, sunHours: 1550 }
  },
  {
    name: "Bruges", country: "Belgium", eu: true, inland: true,
    lat: 51.2093, lng: 3.2247,
    pop: 118000, hospital: "AZ Sint-Jan Brugge", hospitalDist: 0, hospitalNote: "Full-service hospital. UZ Gent for complex cases (50 km).",
    priceMin: 2800, priceMax: 4200,
    housing: { type: "3-bed house", size: "120 m²", cost: "€335k–€505k" },
    pros: "Fairy-tale medieval city, UNESCO heritage, peaceful, excellent beer/food culture, safe, compact walkable center",
    cons: "Very touristy (day-trippers), expensive for Belgium, limited nightlife, cold/rainy winters, small city feel",
    visa: "EU member. Register at commune within 3 months. Full EU healthcare. Euro.",
    climate: { summerHigh: "21–23°C", winterLow: "1°C", snow: "Light, ~12 days/yr", rainyDays: 195, sunHours: 1600 }
  },
  {
    name: "Ghent", country: "Belgium", eu: true, inland: true,
    lat: 51.0543, lng: 3.7174,
    pop: 265000, hospital: "UZ Gent (Ghent University Hospital)", hospitalDist: 0, hospitalNote: "Major university hospital with all specialties.",
    priceMin: 2800, priceMax: 4000,
    housing: { type: "3-bed apartment", size: "95 m²", cost: "€265k–€380k" },
    pros: "Vibrant university city, less touristy than Bruges, excellent food/beer scene, beautiful medieval architecture, good cycling infrastructure",
    cons: "Rainy climate, limited sunshine, parking difficulties, cold winters, some areas gentrifying fast",
    visa: "EU member. Register at commune within 3 months. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "0°C", snow: "Light, ~13 days/yr", rainyDays: 195, sunHours: 1570 }
  },
  {
    name: "Antwerp", country: "Belgium", eu: true, inland: true,
    lat: 51.2194, lng: 4.4025,
    pop: 530000, hospital: "UZA (Antwerp University Hospital)", hospitalDist: 0, hospitalNote: "Major university hospital. Multiple hospitals in city.",
    priceMin: 2500, priceMax: 3800,
    housing: { type: "3-bed apartment", size: "95 m²", cost: "€240k–€360k" },
    pros: "Fashion/diamond capital, vibrant cultural scene, excellent restaurants, beautiful architecture, good port city energy, major train hub",
    cons: "Port area pollution, some rough neighborhoods, parking/traffic issues, rainy climate, can feel industrial in parts",
    visa: "EU member. Register at commune within 3 months. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "0°C", snow: "Light, ~14 days/yr", rainyDays: 195, sunHours: 1580 }
  },
  {
    name: "Leuven", country: "Belgium", eu: true, inland: true,
    lat: 50.8798, lng: 4.7005,
    pop: 102000, hospital: "UZ Leuven", hospitalDist: 0, hospitalNote: "Top Belgian university hospital. Among the best in Europe.",
    priceMin: 3000, priceMax: 4200,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€270k–€380k" },
    pros: "Historic university town (oldest in Belgium), young atmosphere, excellent beer culture (AB InBev HQ), walkable, safe, top hospital",
    cons: "Small city, student-dominated atmosphere, housing pressure from university, rainy, limited nightlife variety",
    visa: "EU member. Register at commune within 3 months. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "0°C", snow: "Light, ~14 days/yr", rainyDays: 195, sunHours: 1560 }
  },
  {
    name: "Liège", country: "Belgium", eu: true, inland: true,
    lat: 50.6292, lng: 5.5797,
    pop: 197000, hospital: "CHU de Liège", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Good Walloon healthcare system.",
    priceMin: 1200, priceMax: 2000,
    housing: { type: "3-bed apartment", size: "90 m²", cost: "€110k–€180k" },
    pros: "Most affordable major Belgian city, French-speaking, good university hospital, cultural revival underway, excellent Sunday food market (La Batte)",
    cons: "Post-industrial feel, higher crime rate for Belgium, some neglected neighborhoods, fewer international connections, rainy",
    visa: "EU member. Register at commune within 3 months. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "-1°C", snow: "Light, ~18 days/yr", rainyDays: 200, sunHours: 1530 }
  },
  // ===================== NETHERLANDS =====================
  {
    name: "Amsterdam", country: "Netherlands", eu: true, inland: true,
    lat: 52.3676, lng: 4.9041,
    pop: 920000, hospital: "Amsterdam UMC (AMC/VUmc)", hospitalDist: 0, hospitalNote: "Multiple world-class hospitals. Best healthcare in the Netherlands.",
    priceMin: 6000, priceMax: 9000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€510k–€765k" },
    pros: "World-class museums, excellent cycling infrastructure, tolerant culture, beautiful canals, great international flight connections, English widely spoken",
    cons: "Extremely expensive housing, overtourism, rainy climate, limited sunshine, crowded, bicycle theft",
    visa: "EU member. Register at gemeente within 5 days. BSN number required. Full EU healthcare. Euro.",
    climate: { summerHigh: "21–23°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 185, sunHours: 1660 }
  },
  {
    name: "Rotterdam", country: "Netherlands", eu: true, inland: true,
    lat: 51.9244, lng: 4.4777,
    pop: 650000, hospital: "Erasmus MC", hospitalDist: 0, hospitalNote: "Top-ranked Dutch university hospital. Major research center.",
    priceMin: 3500, priceMax: 5000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€425k" },
    pros: "Modern architecture, diverse population, emerging food scene, Europe's largest port, more affordable than Amsterdam, innovative city",
    cons: "Less charming than other Dutch cities, rainy/windy, some rough areas, limited historic architecture, industrial feel",
    visa: "EU member. Register at gemeente within 5 days. BSN number required. Full EU healthcare. Euro.",
    climate: { summerHigh: "21–23°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 185, sunHours: 1650 }
  },
  {
    name: "The Hague", country: "Netherlands", eu: true, inland: false,
    lat: 52.0705, lng: 4.3007,
    pop: 550000, hospital: "HMC (Haaglanden Medical Center)", hospitalDist: 0, hospitalNote: "Full-service hospital. Leiden UMC (15 km) for complex cases.",
    priceMin: 3500, priceMax: 5500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€300k–€470k" },
    pros: "Government seat, international community (ICC, tribunals), beach access (Scheveningen), elegant architecture, less touristy than Amsterdam",
    cons: "Expensive, some segregated neighborhoods, rainy/windy, limited nightlife compared to Amsterdam, government-city feel",
    visa: "EU member. Register at gemeente within 5 days. BSN number required. Full EU healthcare. Euro.",
    climate: { summerHigh: "20–22°C", winterLow: "1°C", snow: "Light, ~10 days/yr", rainyDays: 190, sunHours: 1700 }
  },
  {
    name: "Utrecht", country: "Netherlands", eu: true, inland: true,
    lat: 52.0907, lng: 5.1214,
    pop: 360000, hospital: "UMC Utrecht", hospitalDist: 0, hospitalNote: "Major university hospital. Among the best in the Netherlands.",
    priceMin: 4000, priceMax: 6000,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€340k–€510k" },
    pros: "Beautiful canal city, university town, central location, less touristy, excellent cycling, vibrant food/bar scene",
    cons: "Expensive housing market, crowded center, rainy, ongoing construction, smaller than Amsterdam",
    visa: "EU member. Register at gemeente within 5 days. BSN number required. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 185, sunHours: 1630 }
  },
  {
    name: "Maastricht", country: "Netherlands", eu: true, inland: true,
    lat: 50.8514, lng: 5.6910,
    pop: 120000, hospital: "Maastricht UMC+ (MUMC+)", hospitalDist: 0, hospitalNote: "University hospital with all specialties. Near Belgian/German hospitals too.",
    priceMin: 2500, priceMax: 3500,
    housing: { type: "3-bed apartment", size: "85 m²", cost: "€215k–€300k" },
    pros: "Most affordable Dutch city listed, charming medieval center, Burgundian lifestyle, good university, near Belgian/German borders, André Rieu's hometown",
    cons: "Far from Randstad, limited direct flights, compact, fewer job opportunities, can feel provincial",
    visa: "EU member. Register at gemeente within 5 days. BSN number required. Full EU healthcare. Euro.",
    climate: { summerHigh: "22–24°C", winterLow: "-1°C", snow: "Light, ~15 days/yr", rainyDays: 185, sunHours: 1570 }
  },
  {
    name: "Leiden", country: "Netherlands", eu: true, inland: true,
    lat: 52.1601, lng: 4.4970,
    pop: 125000, hospital: "LUMC (Leiden University Medical Center)", hospitalDist: 0, hospitalNote: "Major university hospital. Among the best in the Netherlands.",
    priceMin: 4000, priceMax: 5500,
    housing: { type: "3-bed apartment", size: "80 m²", cost: "€320k–€440k" },
    pros: "Historic university city (oldest in NL), Rembrandt's birthplace, museums, compact/walkable, near beach, close to Amsterdam/Schiphol",
    cons: "Expensive housing, student-dominated, limited parking, rainy, smaller city",
    visa: "EU member. Register at gemeente within 5 days. BSN number required. Full EU healthcare. Euro.",
    climate: { summerHigh: "21–23°C", winterLow: "0°C", snow: "Light, ~10 days/yr", rainyDays: 190, sunHours: 1680 }
  }
];

// safety: Numbeo-style 0-100 (higher=safer), healthcare: 0-100, groceries: €/mo 1 person, meal2: meal for 2 mid-range €
const extraData = {
  // Montenegro
  "Budva":         { safety: 65, hc: 45, groceries: 220, meal2: 30, transitCity: 10, transitRail: 5, cycling: 10, carReq: true },
  "Kotor":         { safety: 70, hc: 48, groceries: 230, meal2: 35, transitCity: 12, transitRail: 5, cycling: 8, carReq: true },
  "Tivat":         { safety: 70, hc: 42, groceries: 240, meal2: 38, transitCity: 10, transitRail: 5, cycling: 15, carReq: true },
  "Herceg Novi":   { safety: 68, hc: 45, groceries: 210, meal2: 28, transitCity: 12, transitRail: 5, cycling: 8, carReq: true },
  "Bar":           { safety: 64, hc: 45, groceries: 200, meal2: 25, transitCity: 10, transitRail: 25, cycling: 15, carReq: true },
  "Ulcinj":        { safety: 62, hc: 38, groceries: 190, meal2: 22, transitCity: 8, transitRail: 5, cycling: 12, carReq: true },
  "Podgorica":     { safety: 57, hc: 55, groceries: 210, meal2: 25, transitCity: 25, transitRail: 30, cycling: 20, carReq: true },
  // Croatia
  "Dubrovnik":     { safety: 76, hc: 62, groceries: 320, meal2: 60, transitCity: 35, transitRail: 5, cycling: 10, carReq: false },
  "Split":         { safety: 72, hc: 78, groceries: 300, meal2: 50, transitCity: 45, transitRail: 40, cycling: 25, carReq: false },
  "Zadar":         { safety: 78, hc: 70, groceries: 280, meal2: 42, transitCity: 30, transitRail: 25, cycling: 35, carReq: false },
  "Šibenik":       { safety: 78, hc: 65, groceries: 270, meal2: 40, transitCity: 20, transitRail: 20, cycling: 15, carReq: true },
  "Rovinj":        { safety: 80, hc: 60, groceries: 290, meal2: 50, transitCity: 18, transitRail: 10, cycling: 25, carReq: true },
  "Opatija":       { safety: 82, hc: 75, groceries: 310, meal2: 55, transitCity: 25, transitRail: 25, cycling: 12, carReq: false },
  "Hvar":          { safety: 85, hc: 40, groceries: 330, meal2: 60, transitCity: 15, transitRail: 5, cycling: 15, carReq: true },
  "Zagreb":        { safety: 68, hc: 82, groceries: 280, meal2: 40, transitCity: 70, transitRail: 60, cycling: 45, carReq: false },
  "Varaždin":      { safety: 82, hc: 68, groceries: 240, meal2: 30, transitCity: 25, transitRail: 30, cycling: 40, carReq: true },
  "Pula":          { safety: 78, hc: 65, groceries: 275, meal2: 42, transitCity: 25, transitRail: 20, cycling: 30, carReq: false },
  "Rijeka":        { safety: 72, hc: 78, groceries: 270, meal2: 38, transitCity: 40, transitRail: 40, cycling: 15, carReq: false },
  "Makarska":      { safety: 80, hc: 50, groceries: 290, meal2: 45, transitCity: 18, transitRail: 5, cycling: 12, carReq: true },
  "Trogir":        { safety: 80, hc: 55, groceries: 285, meal2: 45, transitCity: 28, transitRail: 15, cycling: 30, carReq: false },
  "Poreč":         { safety: 82, hc: 52, groceries: 280, meal2: 45, transitCity: 18, transitRail: 10, cycling: 35, carReq: true },
  "Osijek":        { safety: 75, hc: 72, groceries: 220, meal2: 25, transitCity: 35, transitRail: 30, cycling: 50, carReq: false },
  // Slovenia
  "Koper":         { safety: 80, hc: 78, groceries: 280, meal2: 40, transitCity: 30, transitRail: 30, cycling: 30, carReq: false },
  "Piran":         { safety: 82, hc: 76, groceries: 290, meal2: 45, transitCity: 22, transitRail: 10, cycling: 15, carReq: false },
  "Ljubljana":     { safety: 78, hc: 90, groceries: 300, meal2: 45, transitCity: 65, transitRail: 60, cycling: 55, carReq: false },
  "Maribor":       { safety: 76, hc: 85, groceries: 260, meal2: 35, transitCity: 45, transitRail: 50, cycling: 40, carReq: false },
  "Izola":         { safety: 82, hc: 78, groceries: 280, meal2: 42, transitCity: 25, transitRail: 15, cycling: 25, carReq: false },
  "Nova Gorica":   { safety: 80, hc: 75, groceries: 265, meal2: 38, transitCity: 25, transitRail: 30, cycling: 35, carReq: true },
  "Celje":         { safety: 78, hc: 80, groceries: 250, meal2: 32, transitCity: 30, transitRail: 40, cycling: 35, carReq: false },
  "Bled":          { safety: 85, hc: 72, groceries: 290, meal2: 45, transitCity: 18, transitRail: 25, cycling: 30, carReq: true },
  // Greece
  "Kalamata":      { safety: 68, hc: 55, groceries: 250, meal2: 30, transitCity: 22, transitRail: 15, cycling: 20, carReq: true },
  "Chania":        { safety: 70, hc: 55, groceries: 260, meal2: 32, transitCity: 28, transitRail: 5, cycling: 20, carReq: true },
  "Corfu":         { safety: 66, hc: 52, groceries: 270, meal2: 35, transitCity: 22, transitRail: 5, cycling: 15, carReq: true },
  "Thessaloniki":  { safety: 55, hc: 68, groceries: 250, meal2: 30, transitCity: 55, transitRail: 45, cycling: 30, carReq: false },
  "Nafplio":       { safety: 72, hc: 48, groceries: 260, meal2: 32, transitCity: 18, transitRail: 10, cycling: 15, carReq: true },
  // Italy — North
  "Trieste":       { safety: 72, hc: 80, groceries: 270, meal2: 40, transitCity: 50, transitRail: 65, cycling: 20, carReq: false },
  "Udine":         { safety: 78, hc: 82, groceries: 250, meal2: 35, transitCity: 35, transitRail: 50, cycling: 45, carReq: false },
  "Verona":        { safety: 68, hc: 80, groceries: 280, meal2: 45, transitCity: 50, transitRail: 70, cycling: 45, carReq: false },
  "Padova":        { safety: 65, hc: 88, groceries: 270, meal2: 40, transitCity: 50, transitRail: 70, cycling: 55, carReq: false },
  "Genova":        { safety: 55, hc: 78, groceries: 280, meal2: 42, transitCity: 60, transitRail: 65, cycling: 10, carReq: false },
  "La Spezia":     { safety: 62, hc: 68, groceries: 270, meal2: 40, transitCity: 35, transitRail: 50, cycling: 20, carReq: false },
  "Trento":        { safety: 82, hc: 92, groceries: 300, meal2: 48, transitCity: 40, transitRail: 55, cycling: 40, carReq: false },
  "Bologna":       { safety: 58, hc: 85, groceries: 290, meal2: 48, transitCity: 55, transitRail: 80, cycling: 55, carReq: false },
  "Turin":         { safety: 60, hc: 78, groceries: 280, meal2: 42, transitCity: 65, transitRail: 75, cycling: 45, carReq: false },
  "Milan":         { safety: 55, hc: 90, groceries: 350, meal2: 65, transitCity: 85, transitRail: 90, cycling: 50, carReq: false },
  "Bergamo":       { safety: 72, hc: 75, groceries: 270, meal2: 40, transitCity: 40, transitRail: 50, cycling: 25, carReq: false },
  "Brescia":       { safety: 65, hc: 75, groceries: 260, meal2: 38, transitCity: 40, transitRail: 55, cycling: 40, carReq: false },
  "Vicenza":       { safety: 75, hc: 72, groceries: 260, meal2: 38, transitCity: 35, transitRail: 55, cycling: 45, carReq: false },
  "Treviso":       { safety: 78, hc: 72, groceries: 260, meal2: 38, transitCity: 35, transitRail: 40, cycling: 50, carReq: false },
  "Parma":         { safety: 75, hc: 78, groceries: 270, meal2: 40, transitCity: 40, transitRail: 60, cycling: 55, carReq: false },
  "Modena":        { safety: 72, hc: 78, groceries: 260, meal2: 40, transitCity: 38, transitRail: 55, cycling: 50, carReq: false },
  "Ferrara":       { safety: 78, hc: 75, groceries: 250, meal2: 35, transitCity: 35, transitRail: 50, cycling: 70, carReq: false },
  "Ravenna":       { safety: 78, hc: 72, groceries: 250, meal2: 35, transitCity: 32, transitRail: 40, cycling: 55, carReq: false },
  "Lucca":         { safety: 80, hc: 72, groceries: 270, meal2: 42, transitCity: 30, transitRail: 35, cycling: 55, carReq: false },
  "Florence":      { safety: 62, hc: 82, groceries: 310, meal2: 55, transitCity: 55, transitRail: 80, cycling: 35, carReq: false },
  "Como":          { safety: 72, hc: 75, groceries: 290, meal2: 48, transitCity: 35, transitRail: 55, cycling: 15, carReq: false },
  "Mantova":       { safety: 80, hc: 70, groceries: 250, meal2: 35, transitCity: 28, transitRail: 35, cycling: 55, carReq: false },
  "Bolzano":       { safety: 82, hc: 82, groceries: 320, meal2: 55, transitCity: 45, transitRail: 55, cycling: 55, carReq: false },
  "Venice":        { safety: 55, hc: 78, groceries: 330, meal2: 60, transitCity: 65, transitRail: 75, cycling: 5, carReq: false },
  "Monza":         { safety: 60, hc: 80, groceries: 290, meal2: 45, transitCity: 50, transitRail: 50, cycling: 45, carReq: false },
  "Novara":        { safety: 65, hc: 72, groceries: 250, meal2: 35, transitCity: 30, transitRail: 50, cycling: 45, carReq: false },
  "Piacenza":      { safety: 65, hc: 72, groceries: 240, meal2: 35, transitCity: 30, transitRail: 50, cycling: 45, carReq: false },
  "Reggio Emilia": { safety: 60, hc: 75, groceries: 260, meal2: 38, transitCity: 35, transitRail: 55, cycling: 55, carReq: false },
  "Rimini":        { safety: 58, hc: 70, groceries: 260, meal2: 40, transitCity: 35, transitRail: 50, cycling: 45, carReq: false },
  "Forlì":         { safety: 65, hc: 72, groceries: 240, meal2: 32, transitCity: 28, transitRail: 40, cycling: 45, carReq: false },
  "Prato":         { safety: 55, hc: 75, groceries: 270, meal2: 40, transitCity: 42, transitRail: 50, cycling: 35, carReq: false },
  "Livorno":       { safety: 55, hc: 70, groceries: 260, meal2: 40, transitCity: 35, transitRail: 40, cycling: 35, carReq: false },
  "Arezzo":        { safety: 68, hc: 70, groceries: 250, meal2: 38, transitCity: 28, transitRail: 45, cycling: 20, carReq: false },
  "Perugia":       { safety: 62, hc: 75, groceries: 250, meal2: 35, transitCity: 35, transitRail: 30, cycling: 10, carReq: false },
  "Ancona":        { safety: 60, hc: 72, groceries: 250, meal2: 38, transitCity: 35, transitRail: 45, cycling: 15, carReq: false },
  // Italy — South
  "Lecce":         { safety: 68, hc: 65, groceries: 250, meal2: 40, transitCity: 28, transitRail: 25, cycling: 45, carReq: true },
  "Syracuse":      { safety: 58, hc: 60, groceries: 230, meal2: 35, transitCity: 22, transitRail: 20, cycling: 25, carReq: true },
  "Ostuni":        { safety: 72, hc: 55, groceries: 250, meal2: 40, transitCity: 10, transitRail: 20, cycling: 15, carReq: true },
  "Matera":        { safety: 70, hc: 60, groceries: 230, meal2: 35, transitCity: 18, transitRail: 10, cycling: 10, carReq: true },
  "Ragusa":        { safety: 72, hc: 62, groceries: 220, meal2: 30, transitCity: 12, transitRail: 10, cycling: 10, carReq: true },
  // Albania
  "Saranda":       { safety: 58, hc: 25, groceries: 160, meal2: 18, transitCity: 10, transitRail: 5, cycling: 10, carReq: true },
  "Vlorë":         { safety: 52, hc: 32, groceries: 150, meal2: 15, transitCity: 15, transitRail: 5, cycling: 12, carReq: true },
  "Tirana":        { safety: 48, hc: 42, groceries: 170, meal2: 18, transitCity: 35, transitRail: 10, cycling: 20, carReq: false },
  // Portugal
  "Cascais":       { safety: 75, hc: 80, groceries: 300, meal2: 45, transitCity: 55, transitRail: 65, cycling: 40, carReq: false },
  "Lagos":         { safety: 78, hc: 65, groceries: 280, meal2: 38, transitCity: 22, transitRail: 30, cycling: 25, carReq: true },
  // Portugal — North
  "Porto":         { safety: 72, hc: 85, groceries: 300, meal2: 50, transitCity: 75, transitRail: 70, cycling: 25, carReq: false },
  "Vila Nova de Gaia": { safety: 70, hc: 78, groceries: 290, meal2: 45, transitCity: 60, transitRail: 55, cycling: 20, carReq: false },
  "Braga":         { safety: 78, hc: 75, groceries: 270, meal2: 40, transitCity: 35, transitRail: 65, cycling: 35, carReq: false },
  "Matosinhos":    { safety: 72, hc: 76, groceries: 290, meal2: 45, transitCity: 60, transitRail: 50, cycling: 35, carReq: false },
  "Gondomar":      { safety: 73, hc: 62, groceries: 270, meal2: 38, transitCity: 40, transitRail: 30, cycling: 15, carReq: true },
  "Guimarães":     { safety: 78, hc: 65, groceries: 250, meal2: 35, transitCity: 30, transitRail: 55, cycling: 30, carReq: false },
  "Maia":          { safety: 72, hc: 72, groceries: 280, meal2: 40, transitCity: 50, transitRail: 35, cycling: 20, carReq: true },
  "Santa Maria da Feira": { safety: 76, hc: 60, groceries: 250, meal2: 30, transitCity: 20, transitRail: 25, cycling: 15, carReq: true },
  "Vila Nova de Famalicão": { safety: 76, hc: 62, groceries: 250, meal2: 30, transitCity: 22, transitRail: 50, cycling: 20, carReq: true },
  "Barcelos":      { safety: 80, hc: 55, groceries: 240, meal2: 28, transitCity: 15, transitRail: 40, cycling: 15, carReq: true },
  "Viseu":         { safety: 82, hc: 65, groceries: 240, meal2: 30, transitCity: 20, transitRail: 10, cycling: 20, carReq: true },
  // Spain — South/East
  "Valencia":      { safety: 62, hc: 82, groceries: 260, meal2: 38, transitCity: 75, transitRail: 70, cycling: 60, carReq: false },
  "Málaga":        { safety: 60, hc: 78, groceries: 270, meal2: 40, transitCity: 50, transitRail: 65, cycling: 30, carReq: false },
  // Spain — North
  "San Sebastián": { safety: 75, hc: 85, groceries: 320, meal2: 65, transitCity: 55, transitRail: 50, cycling: 45, carReq: false },
  "Bilbao":        { safety: 72, hc: 88, groceries: 300, meal2: 50, transitCity: 70, transitRail: 55, cycling: 30, carReq: false },
  "Santander":     { safety: 76, hc: 85, groceries: 270, meal2: 40, transitCity: 40, transitRail: 40, cycling: 25, carReq: false },
  "Gijón":         { safety: 74, hc: 75, groceries: 250, meal2: 35, transitCity: 42, transitRail: 35, cycling: 35, carReq: false },
  "A Coruña":      { safety: 75, hc: 80, groceries: 250, meal2: 35, transitCity: 40, transitRail: 40, cycling: 30, carReq: false },
  "Vigo":          { safety: 70, hc: 80, groceries: 240, meal2: 32, transitCity: 38, transitRail: 40, cycling: 15, carReq: false },
  "Pontevedra":    { safety: 78, hc: 68, groceries: 230, meal2: 30, transitCity: 25, transitRail: 30, cycling: 50, carReq: false },
  "Logroño":       { safety: 80, hc: 72, groceries: 230, meal2: 30, transitCity: 30, transitRail: 30, cycling: 40, carReq: false },
  "Oviedo":        { safety: 78, hc: 82, groceries: 245, meal2: 35, transitCity: 38, transitRail: 30, cycling: 20, carReq: false },
  "Vitoria-Gasteiz": { safety: 78, hc: 85, groceries: 280, meal2: 45, transitCity: 50, transitRail: 40, cycling: 70, carReq: false },
  "Barakaldo":     { safety: 68, hc: 88, groceries: 285, meal2: 48, transitCity: 72, transitRail: 55, cycling: 25, carReq: false },
  "Pamplona":      { safety: 80, hc: 88, groceries: 270, meal2: 42, transitCity: 45, transitRail: 35, cycling: 45, carReq: false },
  "Burgos":        { safety: 80, hc: 75, groceries: 220, meal2: 28, transitCity: 30, transitRail: 45, cycling: 30, carReq: false },
  "Santiago de Compostela": { safety: 80, hc: 82, groceries: 240, meal2: 35, transitCity: 35, transitRail: 35, cycling: 20, carReq: false },
  "Ourense":       { safety: 75, hc: 70, groceries: 210, meal2: 25, transitCity: 25, transitRail: 50, cycling: 15, carReq: false },
  // Spain — Castilla y León & Aragón
  "Valladolid":    { safety: 75, hc: 75, groceries: 220, meal2: 30, transitCity: 45, transitRail: 60, cycling: 40, carReq: false },
  "Salamanca":     { safety: 78, hc: 75, groceries: 220, meal2: 28, transitCity: 35, transitRail: 35, cycling: 35, carReq: false },
  "Zamora":        { safety: 78, hc: 68, groceries: 200, meal2: 28, transitCity: 15, transitRail: 55, cycling: 20, carReq: true },
  "León":          { safety: 73, hc: 78, groceries: 210, meal2: 35, transitCity: 30, transitRail: 55, cycling: 40, carReq: false },
  "Zaragoza":      { safety: 68, hc: 78, groceries: 240, meal2: 35, transitCity: 60, transitRail: 75, cycling: 45, carReq: false },
  // Spain — Catalonia
  "Barcelona":     { safety: 48, hc: 92, groceries: 310, meal2: 50, transitCity: 90, transitRail: 85, cycling: 55, carReq: false },
  "Girona":        { safety: 72, hc: 75, groceries: 270, meal2: 40, transitCity: 30, transitRail: 55, cycling: 45, carReq: false },
  "Tarragona":     { safety: 68, hc: 72, groceries: 250, meal2: 35, transitCity: 32, transitRail: 50, cycling: 25, carReq: false },
  "Sitges":        { safety: 70, hc: 65, groceries: 290, meal2: 48, transitCity: 35, transitRail: 55, cycling: 30, carReq: false },
  "Lloret de Mar": { safety: 55, hc: 58, groceries: 250, meal2: 30, transitCity: 22, transitRail: 10, cycling: 15, carReq: true },
  "Figueres":      { safety: 60, hc: 62, groceries: 240, meal2: 28, transitCity: 22, transitRail: 40, cycling: 30, carReq: true },
  "Roses":         { safety: 72, hc: 55, groceries: 260, meal2: 35, transitCity: 15, transitRail: 10, cycling: 25, carReq: true },
  "Vic":           { safety: 74, hc: 70, groceries: 240, meal2: 30, transitCity: 30, transitRail: 35, cycling: 40, carReq: false },
  "L'Hospitalet de Llobregat": { safety: 50, hc: 85, groceries: 290, meal2: 45, transitCity: 85, transitRail: 80, cycling: 50, carReq: false },
  "Badalona":      { safety: 55, hc: 82, groceries: 275, meal2: 42, transitCity: 80, transitRail: 65, cycling: 40, carReq: false },
  "Terrassa":      { safety: 68, hc: 78, groceries: 260, meal2: 38, transitCity: 55, transitRail: 50, cycling: 35, carReq: false },
  "Sabadell":      { safety: 68, hc: 78, groceries: 260, meal2: 38, transitCity: 55, transitRail: 50, cycling: 35, carReq: false },
  "Santa Coloma de Gramenet": { safety: 48, hc: 78, groceries: 270, meal2: 40, transitCity: 80, transitRail: 65, cycling: 30, carReq: false },
  "Mataró":        { safety: 62, hc: 70, groceries: 260, meal2: 38, transitCity: 35, transitRail: 50, cycling: 30, carReq: false },
  "Lleida":        { safety: 65, hc: 70, groceries: 220, meal2: 28, transitCity: 25, transitRail: 60, cycling: 35, carReq: false },
  "Reus":          { safety: 65, hc: 72, groceries: 245, meal2: 32, transitCity: 28, transitRail: 45, cycling: 30, carReq: false },
  "Manresa":       { safety: 55, hc: 75, groceries: 250, meal2: 30, transitCity: 40, transitRail: 50, cycling: 30, carReq: false },
  // Czechia
  "Prague":        { safety: 65, hc: 85, groceries: 250, meal2: 30, transitCity: 85, transitRail: 80, cycling: 40, carReq: false },
  "Brno":          { safety: 72, hc: 82, groceries: 230, meal2: 25, transitCity: 65, transitRail: 70, cycling: 40, carReq: false },
  "Olomouc":       { safety: 78, hc: 78, groceries: 210, meal2: 20, transitCity: 45, transitRail: 55, cycling: 50, carReq: false },
  "Karlovy Vary":  { safety: 72, hc: 60, groceries: 220, meal2: 22, transitCity: 30, transitRail: 25, cycling: 15, carReq: false },
  "České Budějovice": { safety: 78, hc: 72, groceries: 220, meal2: 22, transitCity: 40, transitRail: 40, cycling: 50, carReq: false },
  // Poland
  "Warsaw":        { safety: 70, hc: 78, groceries: 250, meal2: 30, transitCity: 80, transitRail: 75, cycling: 55, carReq: false },
  "Kraków":        { safety: 65, hc: 80, groceries: 230, meal2: 25, transitCity: 70, transitRail: 65, cycling: 50, carReq: false },
  "Gdańsk":        { safety: 72, hc: 78, groceries: 240, meal2: 28, transitCity: 60, transitRail: 60, cycling: 50, carReq: false },
  "Wrocław":       { safety: 72, hc: 78, groceries: 220, meal2: 22, transitCity: 60, transitRail: 60, cycling: 55, carReq: false },
  "Poznań":        { safety: 74, hc: 75, groceries: 220, meal2: 22, transitCity: 60, transitRail: 65, cycling: 50, carReq: false },
  "Sopot":         { safety: 78, hc: 72, groceries: 260, meal2: 35, transitCity: 45, transitRail: 55, cycling: 45, carReq: false },
  // Slovakia
  "Bratislava":    { safety: 70, hc: 72, groceries: 250, meal2: 28, transitCity: 60, transitRail: 65, cycling: 45, carReq: false },
  "Košice":        { safety: 68, hc: 68, groceries: 200, meal2: 18, transitCity: 50, transitRail: 45, cycling: 35, carReq: false },
  "Banská Bystrica": { safety: 75, hc: 65, groceries: 190, meal2: 15, transitCity: 30, transitRail: 25, cycling: 20, carReq: true },
  "Nitra":         { safety: 72, hc: 62, groceries: 190, meal2: 15, transitCity: 30, transitRail: 25, cycling: 30, carReq: true },
  // Hungary
  "Budapest":      { safety: 60, hc: 72, groceries: 230, meal2: 25, transitCity: 80, transitRail: 75, cycling: 50, carReq: false },
  "Pécs":          { safety: 68, hc: 70, groceries: 190, meal2: 18, transitCity: 38, transitRail: 40, cycling: 25, carReq: false },
  "Debrecen":      { safety: 70, hc: 75, groceries: 200, meal2: 18, transitCity: 45, transitRail: 40, cycling: 50, carReq: false },
  "Szeged":        { safety: 72, hc: 75, groceries: 190, meal2: 18, transitCity: 45, transitRail: 40, cycling: 55, carReq: false },
  "Eger":          { safety: 75, hc: 58, groceries: 180, meal2: 15, transitCity: 25, transitRail: 25, cycling: 20, carReq: true },
  // Serbia
  "Belgrade":      { safety: 52, hc: 55, groceries: 200, meal2: 20, transitCity: 60, transitRail: 50, cycling: 25, carReq: false },
  "Novi Sad":      { safety: 60, hc: 55, groceries: 190, meal2: 18, transitCity: 40, transitRail: 45, cycling: 40, carReq: false },
  "Niš":           { safety: 55, hc: 48, groceries: 170, meal2: 12, transitCity: 30, transitRail: 35, cycling: 25, carReq: false },
  "Subotica":      { safety: 58, hc: 42, groceries: 160, meal2: 12, transitCity: 20, transitRail: 25, cycling: 40, carReq: true },
  // Bulgaria
  "Sofia":         { safety: 55, hc: 52, groceries: 180, meal2: 18, transitCity: 65, transitRail: 50, cycling: 30, carReq: false },
  "Plovdiv":       { safety: 58, hc: 50, groceries: 170, meal2: 14, transitCity: 35, transitRail: 40, cycling: 25, carReq: false },
  "Varna":         { safety: 55, hc: 58, groceries: 180, meal2: 15, transitCity: 35, transitRail: 35, cycling: 30, carReq: false },
  "Burgas":        { safety: 52, hc: 52, groceries: 170, meal2: 12, transitCity: 30, transitRail: 30, cycling: 30, carReq: false },
  "Veliko Tarnovo": { safety: 65, hc: 42, groceries: 160, meal2: 10, transitCity: 15, transitRail: 20, cycling: 8, carReq: true },
  // Estonia
  "Tallinn":       { safety: 72, hc: 75, groceries: 280, meal2: 38, transitCity: 70, transitRail: 45, cycling: 50, carReq: false },
  "Tartu":         { safety: 78, hc: 80, groceries: 250, meal2: 30, transitCity: 45, transitRail: 35, cycling: 55, carReq: false },
  "Pärnu":         { safety: 80, hc: 65, groceries: 250, meal2: 28, transitCity: 25, transitRail: 15, cycling: 45, carReq: true },
  "Haapsalu":      { safety: 82, hc: 50, groceries: 240, meal2: 25, transitCity: 18, transitRail: 5, cycling: 35, carReq: true },
  // Belgium
  "Brussels":      { safety: 55, hc: 82, groceries: 380, meal2: 70, transitCity: 85, transitRail: 90, cycling: 45, carReq: false },
  "Bruges":        { safety: 72, hc: 75, groceries: 370, meal2: 75, transitCity: 40, transitRail: 60, cycling: 70, carReq: false },
  "Ghent":         { safety: 68, hc: 80, groceries: 360, meal2: 65, transitCity: 60, transitRail: 70, cycling: 75, carReq: false },
  "Antwerp":       { safety: 58, hc: 78, groceries: 370, meal2: 65, transitCity: 65, transitRail: 80, cycling: 65, carReq: false },
  "Leuven":        { safety: 70, hc: 85, groceries: 360, meal2: 60, transitCity: 45, transitRail: 60, cycling: 65, carReq: false },
  "Liège":         { safety: 48, hc: 75, groceries: 330, meal2: 55, transitCity: 42, transitRail: 60, cycling: 20, carReq: false },
  // Netherlands
  "Amsterdam":     { safety: 65, hc: 82, groceries: 400, meal2: 80, transitCity: 90, transitRail: 90, cycling: 95, carReq: false },
  "Rotterdam":     { safety: 60, hc: 80, groceries: 380, meal2: 70, transitCity: 80, transitRail: 85, cycling: 85, carReq: false },
  "The Hague":     { safety: 62, hc: 78, groceries: 390, meal2: 75, transitCity: 75, transitRail: 75, cycling: 85, carReq: false },
  "Utrecht":       { safety: 70, hc: 82, groceries: 380, meal2: 70, transitCity: 65, transitRail: 85, cycling: 90, carReq: false },
  "Maastricht":    { safety: 72, hc: 80, groceries: 360, meal2: 60, transitCity: 42, transitRail: 50, cycling: 55, carReq: false },
  "Leiden":        { safety: 73, hc: 85, groceries: 380, meal2: 70, transitCity: 50, transitRail: 65, cycling: 85, carReq: false },
};

// Airport data: nearest international airport (IATA code, name, distance in km)
const airportData = {
  // Montenegro
  "Budva":         "TIV – Tivat (20 km)",
  "Kotor":         "TIV – Tivat (8 km)",
  "Tivat":         "TIV – Tivat (3 km)",
  "Herceg Novi":   "TIV – Tivat (23 km)",
  "Bar":           "TGD – Podgorica (53 km)",
  "Ulcinj":        "TGD – Podgorica (78 km)",
  "Podgorica":     "TGD – Podgorica (10 km)",
  // Croatia
  "Dubrovnik":     "DBV – Dubrovnik (20 km)",
  "Split":         "SPU – Split (25 km)",
  "Zadar":         "ZAD – Zadar (10 km)",
  "Šibenik":       "SPU – Split (50 km)",
  "Rovinj":        "PUY – Pula (35 km)",
  "Opatija":       "RJK – Rijeka (35 km)",
  "Hvar":          "SPU – Split (ferry + 45 km)",
  "Zagreb":        "ZAG – Zagreb (15 km)",
  "Varaždin":      "ZAG – Zagreb (90 km)",
  "Pula":          "PUY – Pula (8 km)",
  "Rijeka":        "RJK – Rijeka (25 km)",
  "Makarska":      "SPU – Split (65 km)",
  "Trogir":        "SPU – Split (5 km)",
  "Poreč":         "PUY – Pula (55 km)",
  "Osijek":        "OSI – Osijek (20 km)",
  // Slovenia
  "Koper":         "TRS – Trieste (55 km)",
  "Piran":         "TRS – Trieste (65 km)",
  "Ljubljana":     "LJU – Ljubljana (25 km)",
  "Maribor":       "GRZ – Graz (60 km)",
  "Izola":         "TRS – Trieste (50 km)",
  "Nova Gorica":   "TRS – Trieste (45 km)",
  "Celje":         "LJU – Ljubljana (75 km)",
  "Bled":          "LJU – Ljubljana (35 km)",
  // Greece
  "Kalamata":      "KLX – Kalamata (10 km)",
  "Chania":        "CHQ – Chania (15 km)",
  "Corfu":         "CFU – Corfu (3 km)",
  "Thessaloniki":  "SKG – Thessaloniki (15 km)",
  "Nafplio":       "ATH – Athens (140 km)",
  // Italy — North
  "Trieste":       "TRS – Trieste (35 km)",
  "Udine":         "TRS – Trieste (60 km)",
  "Verona":        "VRN – Verona (12 km)",
  "Padova":        "VCE – Venice (45 km)",
  "Genova":        "GOA – Genova (8 km)",
  "La Spezia":     "PSA – Pisa (80 km)",
  "Trento":        "VRN – Verona (100 km)",
  "Bologna":       "BLQ – Bologna (8 km)",
  "Turin":         "TRN – Turin (16 km)",
  "Milan":         "LIN – Milan Linate (8 km)",
  "Bergamo":       "BGY – Bergamo Orio al Serio (5 km)",
  "Brescia":       "VRN – Verona (55 km)",
  "Vicenza":       "VRN – Verona (50 km)",
  "Treviso":       "TSF – Treviso (6 km)",
  "Parma":         "BLQ – Bologna (95 km)",
  "Modena":        "BLQ – Bologna (35 km)",
  "Ferrara":       "BLQ – Bologna (50 km)",
  "Ravenna":       "BLQ – Bologna (80 km)",
  "Lucca":         "PSA – Pisa (25 km)",
  "Florence":      "FLR – Florence (10 km)",
  "Como":          "MXP – Milan Malpensa (55 km)",
  "Mantova":       "VRN – Verona (40 km)",
  "Bolzano":       "BZO – Bolzano (6 km)",
  "Venice":        "VCE – Venice Marco Polo (13 km)",
  "Monza":         "MXP – Milan Malpensa (55 km)",
  "Novara":        "MXP – Milan Malpensa (35 km)",
  "Piacenza":      "PMF – Parma (60 km)",
  "Reggio Emilia": "BLQ – Bologna (70 km)",
  "Rimini":        "RMI – Rimini Federico Fellini (8 km)",
  "Forlì":         "FRL – Forlì (5 km)",
  "Prato":         "FLR – Florence (25 km)",
  "Livorno":       "PSA – Pisa (20 km)",
  "Arezzo":        "FLR – Florence (80 km)",
  "Perugia":       "PEG – Perugia San Francesco (12 km)",
  "Ancona":        "AOI – Ancona Falconara (15 km)",
  // Italy — South
  "Lecce":         "BDS – Brindisi (40 km)",
  "Syracuse":      "CTA – Catania (60 km)",
  "Ostuni":        "BDS – Brindisi (30 km)",
  "Matera":        "BRI – Bari (65 km)",
  "Ragusa":        "CTA – Catania (100 km)",
  // Albania
  "Saranda":       "TIA – Tirana (280 km)",
  "Vlorë":         "TIA – Tirana (150 km)",
  "Tirana":        "TIA – Tirana (17 km)",
  // Portugal
  "Cascais":       "LIS – Lisbon (30 km)",
  "Lagos":         "FAO – Faro (85 km)",
  // Portugal — North
  "Porto":         "OPO – Porto (11 km)",
  "Vila Nova de Gaia": "OPO – Porto (18 km)",
  "Braga":         "OPO – Porto (55 km)",
  "Matosinhos":    "OPO – Porto (5 km)",
  "Gondomar":      "OPO – Porto (20 km)",
  "Guimarães":     "OPO – Porto (60 km)",
  "Maia":          "OPO – Porto (5 km)",
  "Santa Maria da Feira": "OPO – Porto (40 km)",
  "Vila Nova de Famalicão": "OPO – Porto (40 km)",
  "Barcelos":      "OPO – Porto (55 km)",
  "Viseu":         "OPO – Porto (140 km)",
  // Spain — South/East
  "Valencia":      "VLC – Valencia (10 km)",
  "Málaga":        "AGP – Málaga (8 km)",
  // Spain — North
  "San Sebastián": "EAS – San Sebastián (22 km)",
  "Bilbao":        "BIO – Bilbao (12 km)",
  "Santander":     "SDR – Santander (5 km)",
  "Gijón":         "OVD – Asturias (40 km)",
  "A Coruña":      "LCG – A Coruña (10 km)",
  "Vigo":          "VGO – Vigo (12 km)",
  "Pontevedra":    "VGO – Vigo (30 km)",
  "Logroño":       "RJL – Logroño (15 km)",
  "Oviedo":        "OVD – Asturias (45 km)",
  "Vitoria-Gasteiz": "VIT – Vitoria (8 km)",
  "Barakaldo":     "BIO – Bilbao (15 km)",
  "Pamplona":      "PNA – Pamplona (6 km)",
  "Burgos":        "BUR – Burgos (5 km)",
  "Santiago de Compostela": "SCQ – Santiago (10 km)",
  "Ourense":       "VGO – Vigo (100 km)",
  // Spain — Castilla y León & Aragón
  "Valladolid":    "VLL – Valladolid (12 km)",
  "Salamanca":     "SLM – Salamanca (15 km)",
  "Zamora":        "VLL – Valladolid (111 km)",
  "León":          "LEN – León (6 km)",
  "Zaragoza":      "ZAZ – Zaragoza (12 km)",
  // Spain — Catalonia
  "Barcelona":     "BCN – Barcelona (15 km)",
  "Girona":        "GRO – Girona (12 km)",
  "Tarragona":     "REU – Reus (10 km)",
  "Sitges":        "BCN – Barcelona (35 km)",
  "Lloret de Mar": "GRO – Girona (30 km)",
  "Figueres":      "GRO – Girona (40 km)",
  "Roses":         "GRO – Girona (55 km)",
  "Vic":           "BCN – Barcelona (70 km)",
  "L'Hospitalet de Llobregat": "BCN – Barcelona (8 km)",
  "Badalona":      "BCN – Barcelona (18 km)",
  "Terrassa":      "BCN – Barcelona (35 km)",
  "Sabadell":      "BCN – Barcelona (30 km)",
  "Santa Coloma de Gramenet": "BCN – Barcelona (15 km)",
  "Mataró":        "BCN – Barcelona (35 km)",
  "Lleida":        "ILD – Lleida-Alguaire (15 km)",
  "Reus":          "REU – Reus (3 km)",
  "Manresa":       "BCN – Barcelona (65 km)",
  // Czechia
  "Prague":        "PRG – Prague (15 km)",
  "Brno":          "BRQ – Brno (8 km)",
  "Olomouc":       "BRQ – Brno (80 km)",
  "Karlovy Vary":  "KLV – Karlovy Vary (5 km)",
  "České Budějovice": "PRG – Prague (150 km)",
  // Poland
  "Warsaw":        "WAW – Warsaw (10 km)",
  "Kraków":        "KRK – Kraków (12 km)",
  "Gdańsk":        "GDN – Gdańsk (12 km)",
  "Wrocław":       "WRO – Wrocław (10 km)",
  "Poznań":        "POZ – Poznań (7 km)",
  "Sopot":         "GDN – Gdańsk (15 km)",
  // Slovakia
  "Bratislava":    "BTS – Bratislava (9 km)",
  "Košice":        "KSC – Košice (6 km)",
  "Banská Bystrica": "BTS – Bratislava (200 km)",
  "Nitra":         "BTS – Bratislava (90 km)",
  // Hungary
  "Budapest":      "BUD – Budapest (16 km)",
  "Pécs":          "BUD – Budapest (200 km)",
  "Debrecen":      "DEB – Debrecen (5 km)",
  "Szeged":        "BUD – Budapest (170 km)",
  "Eger":          "BUD – Budapest (130 km)",
  // Serbia
  "Belgrade":      "BEG – Belgrade (18 km)",
  "Novi Sad":      "BEG – Belgrade (80 km)",
  "Niš":           "INI – Niš (4 km)",
  "Subotica":      "BEG – Belgrade (180 km)",
  // Bulgaria
  "Sofia":         "SOF – Sofia (10 km)",
  "Plovdiv":       "PDV – Plovdiv (12 km)",
  "Varna":         "VAR – Varna (10 km)",
  "Burgas":        "BOJ – Burgas (12 km)",
  "Veliko Tarnovo": "SOF – Sofia (220 km)",
  // Estonia
  "Tallinn":       "TLL – Tallinn (5 km)",
  "Tartu":         "TAY – Tartu (10 km)",
  "Pärnu":         "TLL – Tallinn (130 km)",
  "Haapsalu":      "TLL – Tallinn (100 km)",
  // Belgium
  "Brussels":      "BRU – Brussels (12 km)",
  "Bruges":        "BRU – Brussels (100 km)",
  "Ghent":         "BRU – Brussels (55 km)",
  "Antwerp":       "BRU – Brussels (45 km)",
  "Leuven":        "BRU – Brussels (25 km)",
  "Liège":         "LGG – Liège (8 km)",
  // Netherlands
  "Amsterdam":     "AMS – Amsterdam Schiphol (15 km)",
  "Rotterdam":     "RTM – Rotterdam The Hague (8 km)",
  "The Hague":     "RTM – Rotterdam The Hague (20 km)",
  "Utrecht":       "AMS – Amsterdam Schiphol (45 km)",
  "Maastricht":    "MST – Maastricht Aachen (10 km)",
  "Leiden":        "AMS – Amsterdam Schiphol (20 km)",
};

// Merge extra data into locations
locations.forEach(loc => {
  const ed = extraData[loc.name];
  if (ed) { loc.safety = ed.safety; loc.hc = ed.hc; loc.groceries = ed.groceries; loc.meal2 = ed.meal2; loc.transitCity = ed.transitCity; loc.transitRail = ed.transitRail; loc.cycling = ed.cycling; loc.carReq = ed.carReq; }
  if (airportData[loc.name]) loc.apt = airportData[loc.name];
});

// Rating helpers
function getSafetyColor(s) {
  if (s >= 75) return '#27ae60';
  if (s >= 65) return '#f1c40f';
  if (s >= 55) return '#e67e22';
  return '#e74c3c';
}
function getSafetyLabel(s) {
  if (s >= 80) return 'Very Safe';
  if (s >= 70) return 'Safe';
  if (s >= 60) return 'Moderate';
  if (s >= 50) return 'Caution';
  return 'Higher Risk';
}
function getHcColor(s) {
  if (s >= 80) return '#27ae60';
  if (s >= 65) return '#2ecc71';
  if (s >= 50) return '#f1c40f';
  if (s >= 35) return '#e67e22';
  return '#e74c3c';
}
function getHcLabel(s) {
  if (s >= 85) return 'Excellent';
  if (s >= 70) return 'Good';
  if (s >= 55) return 'Adequate';
  if (s >= 40) return 'Limited';
  return 'Basic';
}
function getTransitColor(s) {
  if (s >= 70) return '#27ae60';
  if (s >= 50) return '#2ecc71';
  if (s >= 30) return '#f1c40f';
  if (s >= 15) return '#e67e22';
  return '#e74c3c';
}
function getTransitLabel(s) {
  if (s >= 70) return 'Excellent';
  if (s >= 50) return 'Good';
  if (s >= 30) return 'Moderate';
  if (s >= 15) return 'Limited';
  return 'Minimal';
}

// Source URL generators
const numbeoCountry = {
  Montenegro:'Montenegro', Croatia:'Croatia', Slovenia:'Slovenia',
  Greece:'Greece', Italy:'Italy', Albania:'Albania',
  Portugal:'Portugal', Spain:'Spain',
  Czechia:'Czech Republic', Poland:'Poland', Slovakia:'Slovakia',
  Hungary:'Hungary', Serbia:'Serbia', Bulgaria:'Bulgaria',
  Estonia:'Estonia',
  Belgium:'Belgium', Netherlands:'Netherlands'
};
// Cities large enough to have Numbeo pages
const numbeoCities = new Set([
  'Budva','Podgorica','Dubrovnik','Split','Zadar','Zagreb','Rijeka',
  'Pula','Osijek',
  'Koper','Ljubljana','Maribor',
  'Kalamata','Chania','Corfu','Thessaloniki',
  'Trieste','Udine','Verona','Padova','Genova','La Spezia','Trento','Bologna',
  'Turin','Milan','Bergamo','Brescia','Vicenza','Treviso','Parma','Modena',
  'Ferrara','Ravenna','Lucca','Florence','Como','Mantova','Bolzano',
  'Venice','Monza','Novara','Piacenza','Reggio Emilia','Rimini','Forlì',
  'Prato','Livorno','Arezzo','Perugia','Ancona',
  'Lecce','Syracuse','Tirana','Cascais','Lagos','Valencia','Barcelona',
  'Bilbao','Girona','Tarragona','Vigo','Gijón','A Coruña','Santander',
  'San Sebastián','Málaga','Logroño','Pontevedra','Matera',
  'Prague','Brno','Olomouc','Karlovy Vary','České Budějovice',
  'Warsaw','Kraków','Gdańsk','Wrocław','Poznań','Sopot',
  'Bratislava','Košice',
  'Budapest','Pécs','Debrecen','Szeged',
  'Belgrade','Novi Sad','Niš',
  'Sofia','Plovdiv','Varna','Burgas',
  'Tallinn','Tartu','Pärnu',
  'Brussels','Bruges','Ghent','Antwerp','Leuven','Liège',
  'Amsterdam','Rotterdam','The Hague','Utrecht','Maastricht','Leiden'
]);
function numbeoUrl(cat, city, country) {
  const c = city.replace(/\s/g, '-').replace(/š/gi,'s').replace(/ë/g,'e').replace(/ž/gi,'z').replace(/č/gi,'c').replace(/ř/gi,'r').replace(/ě/g,'e').replace(/á/g,'a').replace(/í/g,'i').replace(/ý/g,'y').replace(/ó/g,'o').replace(/ú/g,'u').replace(/ń/g,'n').replace(/ł/g,'l').replace(/ő/g,'o').replace(/ű/g,'u').replace(/ä/g,'a');
  const nc = numbeoCountry[country] || country;
  if (numbeoCities.has(city)) return `https://www.numbeo.com/${cat}/in/${encodeURIComponent(c)}`;
  return `https://www.numbeo.com/${cat}/country_result.jsp?country=${encodeURIComponent(nc)}`;
}
const propertyPortals = {
  Spain: 'https://www.idealista.com/en/',
  Portugal: 'https://www.idealista.pt/en/',
  Italy: 'https://www.immobiliare.it/en/',
  Croatia: 'https://www.njuskalo.hr/nekretnine',
  Slovenia: 'https://www.nepremicnine.net/',
  Greece: 'https://en.spitogatos.gr/',
  Montenegro: 'https://www.montenegro-estate.com/',
  Albania: 'https://www.merrjep.al/prona',
  Czechia: 'https://www.sreality.cz/en',
  Poland: 'https://www.otodom.pl/',
  Slovakia: 'https://www.nehnutelnosti.sk/',
  Hungary: 'https://ingatlan.com/',
  Serbia: 'https://www.nekretnine.rs/',
  Bulgaria: 'https://www.imot.bg/en/',
  Estonia: 'https://www.kv.ee/',
  Belgium: 'https://www.immoweb.be/en/',
  Netherlands: 'https://www.funda.nl/en/'
};

function transitCityUrl(lat, lng) {
  return `https://www.google.com/maps/@${lat},${lng},14z/data=!5m1!1e2`;
}
function transitRailUrl(city) {
  return `https://www.rome2rio.com/map/${encodeURIComponent(city)}`;
}
function cyclingUrl(lat, lng) {
  return `https://www.cyclosm.org/#map=14/${lat}/${lng}`;
}

function getPriceColor(avgPrice) {
  if (avgPrice <= 1500) return '#27ae60';
  if (avgPrice <= 2200) return '#6fba2c';
  if (avgPrice <= 3200) return '#f1c40f';
  if (avgPrice <= 4000) return '#e67e22';
  if (avgPrice <= 5000) return '#e74c3c';
  return '#8e44ad';
}

function formatPrice(n) { return '€' + n.toLocaleString(); }
function formatPop(n) {
  if (n >= 1000000) return (n/1000000).toFixed(1) + 'M';
  if (n >= 1000) return Math.round(n/1000) + 'k';
  return n.toString();
}

const map = L.map('map', { zoomControl: true }).setView([46.5, 16.0], 5);

L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | <a href="https://opentopomap.org">OpenTopoMap</a>',
  maxZoom: 17
}).addTo(map);

// Layer groups for filtering
const countryGroups = {};
const typeGroups = { Coastal: L.layerGroup().addTo(map), Inland: L.layerGroup().addTo(map) };
const countryColors = {
  Montenegro: '#e74c3c', Croatia: '#2980b9', Slovenia: '#16a085',
  Greece: '#2c3e50', Italy: '#8e44ad', Albania: '#d35400',
  Portugal: '#c0392b', Spain: '#e67e22',
  Czechia: '#5c6bc0', Poland: '#d81b60', Slovakia: '#7cb342',
  Hungary: '#43a047', Serbia: '#8d6e63', Bulgaria: '#546e7a',
  Estonia: '#00acc1',
  Belgium: '#ffb300', Netherlands: '#0288d1'
};
Object.keys(countryColors).forEach(c => { countryGroups[c] = L.layerGroup().addTo(map); });

locations.forEach(loc => {
  const avg = (loc.priceMin + loc.priceMax) / 2;
  const color = getPriceColor(avg);
  const cls = loc.country.toLowerCase();
  const dotClass = loc.inland ? 'dot inland' : 'dot';

  const icon = L.divIcon({
    className: '',
    html: `<div class="price-marker">
        <div class="${dotClass}" style="background:${color};"></div>
        <div class="label">${loc.name} ${formatPrice(loc.priceMin)}–${formatPrice(loc.priceMax)}</div>
      </div>`,
    iconSize: [0, 0], iconAnchor: [9, 9], popupAnchor: [0, -12]
  });

  const euTag = loc.eu ? '<span class="tag eu">EU</span>' : '<span class="tag non-eu">Non-EU</span>';
  const locTag = loc.inland ? '<span class="tag inland">Inland</span>' : '<span class="tag coastal">Coastal</span>';
  const hospStr = loc.hospitalDist === 0
    ? `${loc.hospital} (in town)`
    : `${loc.hospital} (${loc.hospitalDist} km)`;

  const popup = `<div class="popup-content">
      <h3>${loc.name}</h3>
      <div class="tags">
        <span class="tag country ${cls}">${loc.country}</span>${euTag}${locTag}
      </div>
      <div class="pop-hosp">
        <span>👥 Pop: ${formatPop(loc.pop)}</span>
        <span>🏥 ${hospStr}</span>
        ${loc.apt ? `<span>✈ ${loc.apt}</span>` : ''}
      </div>
      ${loc.hospitalNote ? `<div style="font-size:10px;color:#888;margin-bottom:4px;">ℹ️ ${loc.hospitalNote}</div>` : ''}
      <div class="price-range"><a class="drill-link" href="${propertyPortals[loc.country] || '#'}" target="_blank" title="Browse property listings for ${loc.country}">${formatPrice(loc.priceMin)} – ${formatPrice(loc.priceMax)} /m² ↗</a></div>

      <div class="section-label">Pros</div>
      <div class="detail pros">+ ${loc.pros}</div>
      <div class="section-label">Cons</div>
      <div class="detail cons">− ${loc.cons}</div>

      <div class="section-label">Climate</div>
      <div class="climate-grid">
        <span>☀ Summer: ${loc.climate.summerHigh}</span>
        <span>❄ Winter: ${loc.climate.winterLow}</span>
        <span>☂ Rain: ${loc.climate.rainyDays} days/yr</span>
        <span>☀ Sun: ${loc.climate.sunHours.toLocaleString()} hrs/yr</span>
        <span>☃ Snow: ${loc.climate.snow}</span>
      </div>

      <div class="section-label">Safety, Healthcare, Transit & Cost of Living</div>
      <a class="drill-link" href="${numbeoUrl('crime', loc.name, loc.country)}" target="_blank" title="View crime data on Numbeo">
      <div class="detail" style="margin-bottom:3px;">
        🛡 Safety:
        <span class="safety-bar-bg"><span class="safety-bar-fill" style="width:${loc.safety || 0}%;background:${getSafetyColor(loc.safety || 0)};"></span></span>
        <span class="safety-label" style="color:${getSafetyColor(loc.safety || 0)}">${loc.safety || '?'}/100 — ${getSafetyLabel(loc.safety || 0)}</span>
        <span class="drill-hint">↗ Numbeo</span>
      </div></a>
      <a class="drill-link" href="${numbeoUrl('health-care', loc.name, loc.country)}" target="_blank" title="View healthcare data on Numbeo">
      <div class="detail" style="margin-bottom:3px;">
        🏥 Healthcare:
        <span class="safety-bar-bg"><span class="safety-bar-fill" style="width:${loc.hc || 0}%;background:${getHcColor(loc.hc || 0)};"></span></span>
        <span class="safety-label" style="color:${getHcColor(loc.hc || 0)}">${loc.hc || '?'}/100 — ${getHcLabel(loc.hc || 0)}</span>
        <span class="drill-hint">↗ Numbeo</span>
      </div></a>
      <a class="drill-link" href="${transitCityUrl(loc.lat, loc.lng)}" target="_blank" title="View transit overlay on Google Maps">
      <div class="detail" style="margin-bottom:3px;">
        🚌 City Transit:
        <span class="safety-bar-bg"><span class="safety-bar-fill" style="width:${loc.transitCity || 0}%;background:${getTransitColor(loc.transitCity || 0)};"></span></span>
        <span class="safety-label" style="color:${getTransitColor(loc.transitCity || 0)}">${loc.transitCity || '?'}/100 — ${getTransitLabel(loc.transitCity || 0)}</span>
        <span class="drill-hint">↗ Google Maps</span>
      </div></a>
      <a class="drill-link" href="${transitRailUrl(loc.name)}" target="_blank" title="View rail connections on Rome2Rio">
      <div class="detail" style="margin-bottom:3px;">
        🚆 Rail Access:
        <span class="safety-bar-bg"><span class="safety-bar-fill" style="width:${loc.transitRail || 0}%;background:${getTransitColor(loc.transitRail || 0)};"></span></span>
        <span class="safety-label" style="color:${getTransitColor(loc.transitRail || 0)}">${loc.transitRail || '?'}/100 — ${getTransitLabel(loc.transitRail || 0)}</span>
        <span class="drill-hint">↗ Rome2Rio</span>
      </div></a>
      <a class="drill-link" href="${cyclingUrl(loc.lat, loc.lng)}" target="_blank" title="View cycling infrastructure on CyclOSM">
      <div class="detail" style="margin-bottom:3px;">
        🚲 Cycling:
        <span class="safety-bar-bg"><span class="safety-bar-fill" style="width:${loc.cycling || 0}%;background:${getTransitColor(loc.cycling || 0)};"></span></span>
        <span class="safety-label" style="color:${getTransitColor(loc.cycling || 0)}">${loc.cycling || '?'}/100 — ${getTransitLabel(loc.cycling || 0)}</span>
        <span class="drill-hint">↗ CyclOSM</span>
      </div></a>
      <div class="detail" style="margin-bottom:3px;">
        🚗 Car required: <span style="font-weight:600;color:${loc.carReq ? '#e74c3c' : '#27ae60'}">${loc.carReq ? 'Yes' : 'No'}</span>
      </div>
      <div class="cost-row">
        <span>🛒 Groceries: ~€${loc.groceries || '?'}/mo</span>
        <span>🍽 Meal for 2: ~€${loc.meal2 || '?'}</span>
      </div>

      <div class="section-label">${loc.housing.type} (${loc.housing.size})</div>
      <div class="housing-cost">${loc.housing.cost}</div>

      <div class="section-label">Visa / Residency (EU passport)</div>
      <div class="visa-info">${loc.visa}</div>
    </div>`;

  const marker = L.marker([loc.lat, loc.lng], { icon })
    .bindPopup(popup, { maxWidth: 370 });

  // Add to both country and type groups
  marker.addTo(countryGroups[loc.country]);
  // Store reference for type filtering
  marker._locData = loc;
});

// Legend
const legend = L.control({ position: 'bottomright' });
legend.onAdd = function() {
  const div = L.DomUtil.create('div', 'legend');
  div.innerHTML = `
    <h4>Price per m² (avg)</h4>
    <div class="legend-item"><div class="legend-circle" style="background:#27ae60"></div> ≤ €1,500</div>
    <div class="legend-item"><div class="legend-circle" style="background:#6fba2c"></div> €1,500 – €2,200</div>
    <div class="legend-item"><div class="legend-circle" style="background:#f1c40f"></div> €2,200 – €3,200</div>
    <div class="legend-item"><div class="legend-circle" style="background:#e67e22"></div> €3,200 – €4,000</div>
    <div class="legend-item"><div class="legend-circle" style="background:#e74c3c"></div> €4,000 – €5,000</div>
    <div class="legend-item"><div class="legend-circle" style="background:#8e44ad"></div> > €5,000</div>
    <hr style="margin:6px 0;border:none;border-top:1px solid #ddd;">
    <div class="legend-item"><div class="legend-circle" style="background:#999"></div> Coastal</div>
    <div class="legend-item"><div class="legend-square"></div> Inland</div>
    <hr style="margin:6px 0;border:none;border-top:1px solid #ddd;">
    <div style="font-size:10px;color:#888;">Click marker for full details.<br>${locations.length} locations · 2025–2026 data.</div>
  `;
  return div;
};
legend.addTo(map);

// Filter panel
const filter = L.control({ position: 'topright' });
filter.onAdd = function() {
  const div = L.DomUtil.create('div', 'filter-panel');
  let html = '<h4>Filters</h4>';

  // Country section (collapsed by default)
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="country"><strong style="font-size:11px;color:#888;">COUNTRY</strong><span class="arrow collapsed">▼</span></div>';
  html += '<div class="filter-section-body collapsed">';
  Object.keys(countryColors).forEach(c => {
    const count = locations.filter(l => l.country === c).length;
    html += `<label><input type="checkbox" checked data-type="country" data-val="${c}">
      <span style="color:${countryColors[c]};font-weight:600;">${c}</span>
      <span style="color:#aaa;font-size:11px;">(${count})</span></label>`;
  });
  html += '</div></div>';

  // Type section
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="type"><strong style="font-size:11px;color:#888;">TYPE</strong><span class="arrow">▼</span></div>';
  html += '<div class="filter-section-body">';
  html += `<label><input type="checkbox" checked data-type="loc" data-val="coastal">
    <span>Coastal</span></label>`;
  html += `<label><input type="checkbox" checked data-type="loc" data-val="inland">
    <span>Inland</span></label>`;
  html += '</div></div>';

  // EU Status section
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="eu"><strong style="font-size:11px;color:#888;">EU STATUS</strong><span class="arrow">▼</span></div>';
  html += '<div class="filter-section-body">';
  html += `<label><input type="checkbox" checked data-type="eu" data-val="true">
    <span style="color:#2471a3;">EU Members</span></label>`;
  html += `<label><input type="checkbox" checked data-type="eu" data-val="false">
    <span style="color:#b9770e;">Non-EU</span></label>`;
  html += '</div></div>';

  // Car Required section
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="car"><strong style="font-size:11px;color:#888;">CAR REQUIRED</strong><span class="arrow">▼</span></div>';
  html += '<div class="filter-section-body">';
  html += `<label><input type="checkbox" checked data-type="car" data-val="true">
    <span style="color:#e74c3c;">Yes</span></label>`;
  html += `<label><input type="checkbox" checked data-type="car" data-val="false">
    <span style="color:#27ae60;">No</span></label>`;
  html += '</div></div>';

  // Min City Transit section
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="transit-city"><strong style="font-size:11px;color:#888;">MIN CITY TRANSIT</strong><span class="arrow">▼</span></div>';
  html += '<div class="filter-section-body">';
  html += `<div style="display:flex;align-items:center;gap:8px;padding:2px 0;">
    <input type="range" id="transit-city-slider" min="0" max="100" value="0" step="5">
    <span class="slider-val" id="transit-city-val">0</span>
  </div>`;
  html += '</div></div>';

  // Min Rail Access section
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="transit-rail"><strong style="font-size:11px;color:#888;">MIN RAIL ACCESS</strong><span class="arrow">▼</span></div>';
  html += '<div class="filter-section-body">';
  html += `<div style="display:flex;align-items:center;gap:8px;padding:2px 0;">
    <input type="range" id="transit-rail-slider" min="0" max="100" value="0" step="5">
    <span class="slider-val" id="transit-rail-val">0</span>
  </div>`;
  html += '</div></div>';

  // Min Cycling section
  html += '<div class="filter-section">';
  html += '<div class="filter-section-header" data-section="cycling"><strong style="font-size:11px;color:#888;">MIN CYCLING</strong><span class="arrow">▼</span></div>';
  html += '<div class="filter-section-body">';
  html += `<div style="display:flex;align-items:center;gap:8px;padding:2px 0;">
    <input type="range" id="cycling-slider" min="0" max="100" value="0" step="5">
    <span class="slider-val" id="cycling-val">0</span>
  </div>`;
  html += '</div></div>';

  div.innerHTML = html;

  // Collapsible section handlers
  div.querySelectorAll('.filter-section-header').forEach(hdr => {
    hdr.addEventListener('click', function() {
      const body = this.nextElementSibling;
      const arrow = this.querySelector('.arrow');
      body.classList.toggle('collapsed');
      arrow.classList.toggle('collapsed');
    });
  });

  // Slider display update
  const sliderCity = div.querySelector('#transit-city-slider');
  const sliderCityVal = div.querySelector('#transit-city-val');
  sliderCity.addEventListener('input', function() {
    sliderCityVal.textContent = this.value;
    applyFilters();
  });
  const sliderRail = div.querySelector('#transit-rail-slider');
  const sliderRailVal = div.querySelector('#transit-rail-val');
  sliderRail.addEventListener('input', function() {
    sliderRailVal.textContent = this.value;
    applyFilters();
  });
  const sliderCycling = div.querySelector('#cycling-slider');
  const sliderCyclingVal = div.querySelector('#cycling-val');
  sliderCycling.addEventListener('input', function() {
    sliderCyclingVal.textContent = this.value;
    applyFilters();
  });

  function applyFilters() {
    const checks = div.querySelectorAll('input[type="checkbox"]');
    const activeCountries = new Set();
    const activeTypes = new Set();
    const activeEu = new Set();
    const activeCar = new Set();
    const minTransitCity = parseInt(sliderCity.value, 10);
    const minTransitRail = parseInt(sliderRail.value, 10);
    const minCycling = parseInt(sliderCycling.value, 10);

    checks.forEach(cb => {
      if (cb.checked) {
        if (cb.dataset.type === 'country') activeCountries.add(cb.dataset.val);
        if (cb.dataset.type === 'loc') activeTypes.add(cb.dataset.val);
        if (cb.dataset.type === 'eu') activeEu.add(cb.dataset.val);
        if (cb.dataset.type === 'car') activeCar.add(cb.dataset.val);
      }
    });

    Object.keys(countryGroups).forEach(c => {
      if (activeCountries.has(c)) {
        if (!map.hasLayer(countryGroups[c])) map.addLayer(countryGroups[c]);
        countryGroups[c].eachLayer(marker => {
          if (!marker._locData) return;
          const loc = marker._locData;
          const typeMatch = loc.inland ? activeTypes.has('inland') : activeTypes.has('coastal');
          const euMatch = activeEu.has(String(loc.eu));
          const carMatch = activeCar.has(String(loc.carReq));
          const transitCityMatch = (loc.transitCity || 0) >= minTransitCity;
          const transitRailMatch = (loc.transitRail || 0) >= minTransitRail;
          const cyclingMatch = (loc.cycling || 0) >= minCycling;
          const visible = typeMatch && euMatch && carMatch && transitCityMatch && transitRailMatch && cyclingMatch;
          marker.setOpacity(visible ? 1 : 0);
          if (marker._icon) marker._icon.style.pointerEvents = visible ? 'auto' : 'none';
        });
      } else {
        if (map.hasLayer(countryGroups[c])) map.removeLayer(countryGroups[c]);
      }
    });
  }

  div.addEventListener('change', applyFilters);

  return div;
};
filter.addTo(map);

// Mobile panel toggles
(function() {
  const filterPanel = document.querySelector('.filter-panel');
  const legendPanel = document.querySelector('.legend');

  const filterBtn = document.createElement('button');
  filterBtn.id = 'toggle-filter';
  filterBtn.className = 'panel-toggle';
  filterBtn.textContent = '☰';
  filterBtn.title = 'Toggle filters';
  document.body.appendChild(filterBtn);

  const legendBtn = document.createElement('button');
  legendBtn.id = 'toggle-legend';
  legendBtn.className = 'panel-toggle';
  legendBtn.textContent = '◻';
  legendBtn.title = 'Toggle legend';
  document.body.appendChild(legendBtn);

  if (window.innerWidth <= 768) {
    if (filterPanel) filterPanel.classList.add('collapsed');
    if (legendPanel) legendPanel.classList.add('collapsed');
  }

  filterBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    filterPanel.classList.toggle('collapsed');
    this.textContent = filterPanel.classList.contains('collapsed') ? '☰' : '✕';
  });

  legendBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    legendPanel.classList.toggle('collapsed');
    this.textContent = legendPanel.classList.contains('collapsed') ? '◻' : '✕';
  });
})();
</script>
</body>
</html>
